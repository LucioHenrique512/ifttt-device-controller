{"code":"!function(t,e){for(var r in e)t[r]=e[r]}(exports,function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=211)}([function(t,e,r){\"undefined\"==typeof process||\"renderer\"===process.type||!0===process.browser||process.__nwjs?t.exports=r(97):t.exports=r(99)},function(t,e){t.exports=require(\"util\")},function(t,e){t.exports=require(\"events\")},function(t,e){t.exports=require(\"crypto\")},function(t,e,r){var n=r(6),i=r(126),o=r(13),s=r(127),a=r(134),c=r(220),u=i(\"wks\"),h=n.Symbol,p=c?h:h&&h.withoutSetter||s;t.exports=function(t){return o(u,t)||(a&&o(h,t)?u[t]=h[t]:u[t]=p(\"Symbol.\"+t)),u[t]}},function(t,e){t.exports=require(\"fs\")},function(t,e){var r=function(t){return t&&t.Math==Math&&t};t.exports=r(\"object\"==typeof globalThis&&globalThis)||r(\"object\"==typeof window&&window)||r(\"object\"==typeof self&&self)||r(\"object\"==typeof global&&global)||Function(\"return this\")()},function(t,e){t.exports=require(\"path\")},function(t,e){t.exports=require(\"http\")},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return\"object\"==typeof t?null!==t:\"function\"==typeof t}},function(t,e,r){r(3);t.exports.linebrk=function(t,e){for(var r=\"\",n=0;n+e<t.length;)r+=t.substring(n,n+e)+\"\\n\",n+=e;return r+t.substring(n,t.length)},t.exports.detectEnvironment=function(){return process&&\"browser\"===process.title||\"undefined\"!=typeof window&&window?\"browser\":\"node\"},t.exports.get32IntFromBuffer=function(t,e){e=e||0;var r;if((r=t.length-e)>0){if(r>=4)return t.readUInt32BE(e);for(var n=0,i=e+r,o=0;i>e;i--,o+=2)n+=t[i-1]*Math.pow(16,o);return n}return NaN},t.exports._={isObject:function(t){var e=typeof t;return!!t&&(\"object\"==e||\"function\"==e)},isString:function(t){return\"string\"==typeof t||t instanceof String},isNumber:function(t){return\"number\"==typeof t||!isNaN(parseFloat(t))&&isFinite(t)},omit:function(t,e){var r={};for(var n in t)t.hasOwnProperty(n)&&n!==e&&(r[n]=t[n]);return r}}},function(t,e,r){var n=r(6),i=r(35).f,o=r(26),s=r(37),a=r(87),c=r(128),u=r(133);t.exports=function(t,e){var r,h,p,f,l,d=t.target,y=t.global,g=t.stat;if(r=y?n:g?n[d]||a(d,{}):(n[d]||{}).prototype)for(h in e){if(f=e[h],p=t.noTargetGet?(l=i(r,h))&&l.value:r[h],!u(y?h:d+(g?\".\":\"#\")+h,t.forced)&&void 0!==p){if(typeof f==typeof p)continue;c(f,p)}(t.sham||p&&p.sham)&&o(f,\"sham\",!0),s(r,h,f,t)}}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(10);t.exports=function(t){if(!n(t))throw TypeError(String(t)+\" is not an object\");return t}},function(t,e){t.exports=require(\"url\")},function(t,e,r){var n=r(111),i=r(32),o=r(113),s=r(114);e.protocol=3;var a=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},c=s(a),u={type:\"error\",data:\"parser error\"};const h=Buffer.concat([]);function p(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var i=t.data,o=Buffer.allocUnsafe(1);return o[0]=a[t.type],n(Buffer.concat([o,i]))}function f(t,e,r){for(var n=new Array(t.length),i=o(t.length,r),s=0;s<t.length;s++)e(t[s],(function(t,e){n[s]=e,i(t,n)}))}function l(t){for(var e=\"\",r=0,n=t.length;r<n;r++)e+=String.fromCharCode(t[r]);return e}function d(t){for(var e=Buffer.allocUnsafe(t.length),r=0,n=t.length;r<n;r++)e.writeUInt8(t.charCodeAt(r),r);return e}function y(t){var e=t.byteLength||t.length,r=t.byteOffset||0;return Buffer.from(t.buffer||t,r,e)}function g(t,r){e.encodePacket(t,!0,!0,(function(t){var e,n=\"\"+t.length;if(\"string\"==typeof t){(e=Buffer.allocUnsafe(n.length+2))[0]=0;for(var i=0;i<n.length;i++)e[i+1]=parseInt(n[i],10);return e[e.length-1]=255,r(null,Buffer.concat([e,d(t)]))}for((e=Buffer.allocUnsafe(n.length+2))[0]=1,i=0;i<n.length;i++)e[i+1]=parseInt(n[i],10);e[e.length-1]=255,r(null,Buffer.concat([e,t]))}))}e.encodePacket=function(t,e,r,i){if(\"function\"==typeof e&&(i=e,e=null),\"function\"==typeof r&&(i=r,r=null),Buffer.isBuffer(t.data))return p(t,e,i);if(t.data&&(t.data.buffer||t.data)instanceof ArrayBuffer)return p({type:t.type,data:y(t.data)},e,i);var o=a[t.type];return void 0!==t.data&&(o+=r?n.encode(String(t.data),{strict:!1}):String(t.data)),i(\"\"+o)},e.encodeBase64Packet=function(t,e){var r=Buffer.isBuffer(t.data)?t.data:y(t.data),n=\"b\"+a[t.type];return e(n+=r.toString(\"base64\"))},e.decodePacket=function(t,r,i){if(void 0===t)return u;var o;if(\"string\"==typeof t)return\"b\"===(o=t.charAt(0))?e.decodeBase64Packet(t.substr(1),r):i&&!1===(t=function(t){try{t=n.decode(t,{strict:!1})}catch(t){return!1}return t}(t))?u:Number(o)==o&&c[o]?t.length>1?{type:c[o],data:t.substring(1)}:{type:c[o]}:u;if(\"arraybuffer\"===r){var s=new Uint8Array(t);return o=s[0],{type:c[o],data:s.buffer.slice(1)}}return t instanceof ArrayBuffer&&(t=y(t)),o=t[0],{type:c[o],data:t.slice(1)}},e.decodeBase64Packet=function(t,e){var r=c[t.charAt(0)],n=Buffer.from(t.substr(1),\"base64\");if(\"arraybuffer\"===e){for(var i=new Uint8Array(n.length),o=0;o<i.length;o++)i[o]=n[o];n=i.buffer}return{type:r,data:n}},e.encodePayload=function(t,r,n){if(\"function\"==typeof r&&(n=r,r=null),r&&i(t))return e.encodePayloadAsBinary(t,n);if(!t.length)return n(\"0:\");f(t,(function(t,n){e.encodePacket(t,r,!1,(function(t){n(null,function(t){return t.length+\":\"+t}(t))}))}),(function(t,e){return n(e.join(\"\"))}))},e.decodePayload=function(t,r,n){if(\"string\"!=typeof t)return e.decodePayloadAsBinary(t,r,n);if(\"function\"==typeof r&&(n=r,r=null),\"\"===t)return n(u,0,1);for(var i,o,s,a=\"\",c=0,h=t.length;c<h;c++){var p=t.charAt(c);if(\":\"===p){if(\"\"===a||a!=(i=Number(a)))return n(u,0,1);if(a!=(o=t.substr(c+1,i)).length)return n(u,0,1);if(o.length){if(s=e.decodePacket(o,r,!1),u.type===s.type&&u.data===s.data)return n(u,0,1);if(!1===n(s,c+i,h))return}c+=i,a=\"\"}else a+=p}return\"\"!==a?n(u,0,1):void 0},e.encodePayloadAsBinary=function(t,e){if(!t.length)return e(h);f(t,g,(function(t,r){return e(Buffer.concat(r))}))},e.decodePayloadAsBinary=function(t,r,n){\"function\"==typeof r&&(n=r,r=null);for(var i,o=t,s=[];o.length>0;){var a=\"\",c=0===o[0];for(i=1;255!==o[i];i++){if(a.length>310)return n(u,0,1);a+=\"\"+o[i]}o=o.slice(a.length+1);var h=parseInt(a,10),p=o.slice(1,h+1);c&&(p=l(p)),s.push(p),o=o.slice(h+1)}var f=s.length;for(i=0;i<f;i++){var d=s[i];n(e.decodePacket(d,r,!0),i,f)}}},function(t,e){t.exports=require(\"net\")},,function(t,e,r){var n=r(9);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){t.exports=require(\"tty\")},function(t,e){t.exports=require(\"stream\")},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var n=r(19),i=r(124),o=r(14),s=r(85),a=Object.defineProperty;e.f=n?a:function(t,e,r){if(o(t),e=s(e,!0),o(r),i)try{return a(t,e,r)}catch(t){}if(\"get\"in r||\"set\"in r)throw TypeError(\"Accessors not supported\");return\"value\"in r&&(t[e]=r.value),t}},,function(t,e,r){\"use strict\";var n,i,o,s,a=r(12),c=r(38),u=r(6),h=r(39),p=r(218),f=r(37),l=r(219),d=r(94),y=r(221),g=r(10),m=r(57),v=r(222),b=r(22),w=r(88),_=r(223),S=r(229),E=r(135),x=r(136).set,k=r(230),O=r(231),C=r(232),T=r(140),B=r(233),P=r(89),I=r(133),A=r(4),D=r(96),N=A(\"species\"),R=\"Promise\",L=P.get,F=P.set,j=P.getterFor(R),U=p,q=u.TypeError,M=u.document,$=u.process,K=h(\"fetch\"),V=T.f,W=V,G=\"process\"==b($),H=!!(M&&M.createEvent&&u.dispatchEvent),z=I(R,(function(){if(!(w(U)!==String(U))){if(66===D)return!0;if(!G&&\"function\"!=typeof PromiseRejectionEvent)return!0}if(c&&!U.prototype.finally)return!0;if(D>=51&&/native code/.test(U))return!1;var t=U.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[N]=e,!(t.then((function(){}))instanceof e)})),Y=z||!S((function(t){U.all(t).catch((function(){}))})),X=function(t){var e;return!(!g(t)||\"function\"!=typeof(e=t.then))&&e},J=function(t,e,r){if(!e.notified){e.notified=!0;var n=e.reactions;k((function(){for(var i=e.value,o=1==e.state,s=0;n.length>s;){var a,c,u,h=n[s++],p=o?h.ok:h.fail,f=h.resolve,l=h.reject,d=h.domain;try{p?(o||(2===e.rejection&&et(t,e),e.rejection=1),!0===p?a=i:(d&&d.enter(),a=p(i),d&&(d.exit(),u=!0)),a===h.promise?l(q(\"Promise-chain cycle\")):(c=X(a))?c.call(a,f,l):f(a)):l(i)}catch(t){d&&!u&&d.exit(),l(t)}}e.reactions=[],e.notified=!1,r&&!e.rejection&&Q(t,e)}))}},Z=function(t,e,r){var n,i;H?((n=M.createEvent(\"Event\")).promise=e,n.reason=r,n.initEvent(t,!1,!0),u.dispatchEvent(n)):n={promise:e,reason:r},(i=u[\"on\"+t])?i(n):\"unhandledrejection\"===t&&C(\"Unhandled promise rejection\",r)},Q=function(t,e){x.call(u,(function(){var r,n=e.value;if(tt(e)&&(r=B((function(){G?$.emit(\"unhandledRejection\",n,t):Z(\"unhandledrejection\",t,n)})),e.rejection=G||tt(e)?2:1,r.error))throw r.value}))},tt=function(t){return 1!==t.rejection&&!t.parent},et=function(t,e){x.call(u,(function(){G?$.emit(\"rejectionHandled\",t):Z(\"rejectionhandled\",t,e.value)}))},rt=function(t,e,r,n){return function(i){t(e,r,i,n)}},nt=function(t,e,r,n){e.done||(e.done=!0,n&&(e=n),e.value=r,e.state=2,J(t,e,!0))},it=function(t,e,r,n){if(!e.done){e.done=!0,n&&(e=n);try{if(t===r)throw q(\"Promise can't be resolved itself\");var i=X(r);i?k((function(){var n={done:!1};try{i.call(r,rt(it,t,n,e),rt(nt,t,n,e))}catch(r){nt(t,n,r,e)}})):(e.value=r,e.state=1,J(t,e,!1))}catch(r){nt(t,{done:!1},r,e)}}};z&&(U=function(t){v(this,U,R),m(t),n.call(this);var e=L(this);try{t(rt(it,this,e),rt(nt,this,e))}catch(t){nt(this,e,t)}},(n=function(t){F(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=l(U.prototype,{then:function(t,e){var r=j(this),n=V(E(this,U));return n.ok=\"function\"!=typeof t||t,n.fail=\"function\"==typeof e&&e,n.domain=G?$.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&J(this,r,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new n,e=L(t);this.promise=t,this.resolve=rt(it,t,e),this.reject=rt(nt,t,e)},T.f=V=function(t){return t===U||t===o?new i(t):W(t)},c||\"function\"!=typeof p||(s=p.prototype.then,f(p.prototype,\"then\",(function(t,e){var r=this;return new U((function(t,e){s.call(r,t,e)})).then(t,e)}),{unsafe:!0}),\"function\"==typeof K&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return O(U,K.apply(u,arguments))}}))),a({global:!0,wrap:!0,forced:z},{Promise:U}),d(U,R,!1,!0),y(R),o=h(R),a({target:R,stat:!0,forced:z},{reject:function(t){var e=V(this);return e.reject.call(void 0,t),e.promise}}),a({target:R,stat:!0,forced:c||z},{resolve:function(t){return O(c&&this===o?U:this,t)}}),a({target:R,stat:!0,forced:Y},{all:function(t){var e=this,r=V(e),n=r.resolve,i=r.reject,o=B((function(){var r=m(e.resolve),o=[],s=0,a=1;_(t,(function(t){var c=s++,u=!1;o.push(void 0),a++,r.call(e,t).then((function(t){u||(u=!0,o[c]=t,--a||n(o))}),i)})),--a||n(o)}));return o.error&&i(o.value),r.promise},race:function(t){var e=this,r=V(e),n=r.reject,i=B((function(){var i=m(e.resolve);_(t,(function(t){i.call(e,t).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}})},function(t,e,r){var n=r(19),i=r(23),o=r(56);t.exports=n?function(t,e,r){return i.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(92),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},,function(t,e,r){var n=r(123),i=r(36);t.exports=function(t){return n(i(t))}},function(t,e,r){t.exports={pkcs1:r(246),pkcs1_oaep:r(247),pss:r(248),isEncryption:function(e){return t.exports[e]&&t.exports[e].isEncryption},isSignature:function(e){return t.exports[e]&&t.exports[e].isSignature}}},function(t,e){var r=1e3,n=6e4,i=60*n,o=24*i;function s(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+\" \"+r:Math.ceil(t/e)+\" \"+r+\"s\"}t.exports=function(t,e){e=e||{};var a,c=typeof t;if(\"string\"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return 315576e5*s;case\"days\":case\"day\":case\"d\":return s*o;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return s*i;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return s*n;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return s*r;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return s;default:return}}(t);if(\"number\"===c&&!1===isNaN(t))return e.long?s(a=t,o,\"day\")||s(a,i,\"hour\")||s(a,n,\"minute\")||s(a,r,\"second\")||a+\" ms\":function(t){if(t>=o)return Math.round(t/o)+\"d\";if(t>=i)return Math.round(t/i)+\"h\";if(t>=n)return Math.round(t/n)+\"m\";if(t>=r)return Math.round(t/r)+\"s\";return t+\"ms\"}(t);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(t))}},function(t,e,r){var n=r(112),i=Object.prototype.toString,o=\"function\"==typeof Blob||\"undefined\"!=typeof Blob&&\"[object BlobConstructor]\"===i.call(Blob),s=\"function\"==typeof File||\"undefined\"!=typeof File&&\"[object FileConstructor]\"===i.call(File);t.exports=function t(e){if(!e||\"object\"!=typeof e)return!1;if(n(e)){for(var r=0,i=e.length;r<i;r++)if(t(e[r]))return!0;return!1}if(\"function\"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||\"function\"==typeof ArrayBuffer&&e instanceof ArrayBuffer||o&&e instanceof Blob||s&&e instanceof File)return!0;if(e.toJSON&&\"function\"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return!0;return!1}},,,function(t,e,r){var n=r(19),i=r(213),o=r(56),s=r(29),a=r(85),c=r(13),u=r(124),h=Object.getOwnPropertyDescriptor;e.f=n?h:function(t,e){if(t=s(t),e=a(e,!0),u)try{return h(t,e)}catch(t){}if(c(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e){t.exports=function(t){if(null==t)throw TypeError(\"Can't call method on \"+t);return t}},function(t,e,r){var n=r(6),i=r(26),o=r(13),s=r(87),a=r(88),c=r(89),u=c.get,h=c.enforce,p=String(String).split(\"String\");(t.exports=function(t,e,r,a){var c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,f=!!a&&!!a.noTargetGet;\"function\"==typeof r&&(\"string\"!=typeof e||o(r,\"name\")||i(r,\"name\",e),h(r).source=p.join(\"string\"==typeof e?e:\"\")),t!==n?(c?!f&&t[e]&&(u=!0):delete t[e],u?t[e]=r:i(t,e,r)):u?t[e]=r:s(e,r)})(Function.prototype,\"toString\",(function(){return\"function\"==typeof this&&u(this).source||a(this)}))},function(t,e){t.exports=!1},function(t,e,r){var n=r(215),i=r(6),o=function(t){return\"function\"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(n[t])||o(i[t]):n[t]&&n[t][e]||i[t]&&i[t][e]}},function(t,e){t.exports={}},function(t,e,r){t.exports=function(t){function e(t){let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e|=0;return n.colors[Math.abs(e)%n.colors.length]}function n(t){let r;function s(...t){if(!s.enabled)return;const e=s,i=Number(new Date),o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i,t[0]=n.coerce(t[0]),\"string\"!=typeof t[0]&&t.unshift(\"%O\");let a=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(r,i)=>{if(\"%%\"===r)return r;a++;const o=n.formatters[i];if(\"function\"==typeof o){const n=t[a];r=o.call(e,n),t.splice(a,1),a--}return r}),n.formatArgs.call(e,t);(e.log||n.log).apply(e,t)}return s.namespace=t,s.enabled=n.enabled(t),s.useColors=n.useColors(),s.color=e(t),s.destroy=i,s.extend=o,\"function\"==typeof n.init&&n.init(s),n.instances.push(s),s}function i(){const t=n.instances.indexOf(this);return-1!==t&&(n.instances.splice(t,1),!0)}function o(t,e){const r=n(this.namespace+(void 0===e?\":\":e)+t);return r.log=this.log,r}function s(t){return t.toString().substring(2,t.toString().length-2).replace(/\\.\\*\\?$/,\"*\")}return n.debug=n,n.default=n,n.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},n.disable=function(){const t=[...n.names.map(s),...n.skips.map(s).map(t=>\"-\"+t)].join(\",\");return n.enable(\"\"),t},n.enable=function(t){let e;n.save(t),n.names=[],n.skips=[];const r=(\"string\"==typeof t?t:\"\").split(/[\\s,]+/),i=r.length;for(e=0;e<i;e++)r[e]&&(\"-\"===(t=r[e].replace(/\\*/g,\".*?\"))[0]?n.skips.push(new RegExp(\"^\"+t.substr(1)+\"$\")):n.names.push(new RegExp(\"^\"+t+\"$\")));for(e=0;e<n.instances.length;e++){const t=n.instances[e];t.enabled=n.enabled(t.namespace)}},n.enabled=function(t){if(\"*\"===t[t.length-1])return!0;let e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=r(98),Object.keys(t).forEach(e=>{n[e]=t[e]}),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=e,n.enable(n.load()),n}},function(t,e,r){\"use strict\";r(141),r(142),r(25),r(235);const n=r(243),i=r(244);t.exports={DDP_VERSION:\"00020020\",DDP_PORT:987,REQ_PORT:997,STATUS_AWAKE:\"200 Ok\",STATUS_STANDBY:\"620 Server Standby\",parse(t){const e=t.toString().split(\"\\n\"),r=0===e[0].indexOf(\"HTTP\")?\"device\":e[0].substr(0,e[0].indexOf(\" \")),n={type:r};if(\"device\"===r){n.statusLine=e[0].substr(\"HTTP/1.1 \".length);const t=n.statusLine.split(\" \");n.statusCode=t[0],n.status=2===t.length?t[1]:t[2]}return e.slice(1).reduce((t,e)=>{const r=e.split(\":\");return r[1]&&(t[r[0]]=r[1]),t},n)},udpSocket:()=>t.exports.wrap(n.createSocket(\"udp4\")),wrap:t=>(t.discover=function(e,r,n){n||(n={address:\"255.255.255.255\",port:987}),r?r.port&&\"number\"==typeof r.port&&(n=r,r={}):r={},n.port||(n.port=987),0!==e.indexOf(\"HTTP\")&&(e+=\" * HTTP/1.1\");const i=Buffer.from(`${e}\\n${Object.keys(r).reduce((t,e)=>`${t+e}:${r[e]}\\n`,\"\")}device-discovery-protocol-version:00020020\\n`);return new Promise((e,r)=>{t.send(i,0,i.length,n.port,n.address,n=>n?r(n):e(t))})},t),createPublicKey:()=>new i(\"-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxfAO/MDk5ovZpp7xlG9J\\nJKc4Sg4ztAz+BbOt6Gbhub02tF9bryklpTIyzM0v817pwQ3TCoigpxEcWdTykhDL\\ncGhAbcp6E7Xh8aHEsqgtQ/c+wY1zIl3fU//uddlB1XuipXthDv6emXsyyU/tJWqc\\nzy9HCJncLJeYo7MJvf2TE9nnlVm1x4flmD0k1zrvb3MONqoZbKb/TQVuVhBv7SM+\\nU5PSi3diXIx1Nnj4vQ8clRNUJ5X1tT9XfVmKQS1J513XNZ0uYHYRDzQYujpLWucu\\nob7v50wCpUm3iKP1fYCixMP6xFm0jPYz1YQaMV35VkYwc40qgk3av0PDS+1G0dCm\\nswIDAQAB\\n-----END PUBLIC KEY-----\",\"pkcs8-public\")}},function(t,e,r){var n=r(3),i=r(11)._;function o(t,e){null!=t&&(\"number\"==typeof t?this.fromNumber(t,e):Buffer.isBuffer(t)?this.fromBuffer(t):null==e&&\"string\"!=typeof t?this.fromByteArray(t):this.fromString(t,e))}function s(){return new o(null)}o.prototype.am=function(t,e,r,n,i,o){for(var s=16383&e,a=e>>14;--o>=0;){var c=16383&this[t],u=this[t++]>>14,h=a*c+u*s;i=((c=s*c+((16383&h)<<14)+r[n]+i)>>28)+(h>>14)+a*u,r[n++]=268435455&c}return i},o.prototype.DB=28,o.prototype.DM=268435455,o.prototype.DV=1<<28;o.prototype.FV=Math.pow(2,52),o.prototype.F1=24,o.prototype.F2=4;var a,c,u=new Array;for(a=\"0\".charCodeAt(0),c=0;c<=9;++c)u[a++]=c;for(a=\"a\".charCodeAt(0),c=10;c<36;++c)u[a++]=c;for(a=\"A\".charCodeAt(0),c=10;c<36;++c)u[a++]=c;function h(t){return\"0123456789abcdefghijklmnopqrstuvwxyz\".charAt(t)}function p(t,e){var r=u[t.charCodeAt(e)];return null==r?-1:r}function f(t){var e=s();return e.fromInt(t),e}function l(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function d(t){this.m=t}function y(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function g(t,e){return t&e}function m(t,e){return t|e}function v(t,e){return t^e}function b(t,e){return t&~e}function w(t){if(0===t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function _(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function S(){}function E(t){return t}function x(t){this.r2=s(),this.q3=s(),o.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}d.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},d.prototype.revert=function(t){return t},d.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},d.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},d.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},y.prototype.convert=function(t){var e=s();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(o.ZERO)>0&&this.m.subTo(e,e),e},y.prototype.revert=function(t){var e=s();return t.copyTo(e),this.reduce(e),e},y.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},y.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},y.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},S.prototype.convert=E,S.prototype.revert=E,S.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},S.prototype.sqrTo=function(t,e){t.squareTo(e)},x.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=s();return t.copyTo(e),this.reduce(e),e},x.prototype.revert=function(t){return t},x.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},x.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},x.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var k=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],O=(1<<26)/k[k.length-1];o.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s},o.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0},o.prototype.fromString=function(t,e,r){var n;switch(e){case 2:n=1;break;case 4:n=2;break;case 8:n=3;break;case 16:n=4;break;case 32:n=5;break;case 256:n=8;break;default:return void this.fromRadix(t,e)}this.t=0,this.s=0;for(var i=t.length,s=!1,a=0;--i>=0;){var c=8==n?255&t[i]:p(t,i);c<0?\"-\"==t.charAt(i)&&(s=!0):(s=!1,0===a?this[this.t++]=c:a+n>this.DB?(this[this.t-1]|=(c&(1<<this.DB-a)-1)<<a,this[this.t++]=c>>this.DB-a):this[this.t-1]|=c<<a,(a+=n)>=this.DB&&(a-=this.DB))}r||8!=n||0==(128&t[0])||(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),s&&o.ZERO.subTo(this,this)},o.prototype.fromByteArray=function(t,e){this.fromString(t,256,e)},o.prototype.fromBuffer=function(t){this.fromString(t,256,!0)},o.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},o.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s},o.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s},o.prototype.lShiftTo=function(t,e){var r,n=t%this.DB,i=this.DB-n,o=(1<<i)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)e[r+s+1]=this[r]>>i|a,a=(this[r]&o)<<n;for(r=s-1;r>=0;--r)e[r]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()},o.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e[0]=this[r]>>n;for(var s=r+1;s<this.t;++s)e[s-r-1]|=(this[s]&o)<<i,e[s-r]=this[s]>>n;n>0&&(e[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}},o.prototype.subTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]-t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t[r],e[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[r++]=this.DV+n:n>0&&(e[r++]=n),e.t=r,e.clamp()},o.prototype.multiplyTo=function(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e[i]=0;for(i=0;i<n.t;++i)e[i+r.t]=r.am(0,n[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&o.ZERO.subTo(e,e)},o.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()},o.prototype.divRemTo=function(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=s());var a=s(),c=this.s,u=t.s,h=this.DB-l(n[n.t-1]);h>0?(n.lShiftTo(h,a),i.lShiftTo(h,r)):(n.copyTo(a),i.copyTo(r));var p=a.t,f=a[p-1];if(0!==f){var d=f*(1<<this.F1)+(p>1?a[p-2]>>this.F2:0),y=this.FV/d,g=(1<<this.F1)/d,m=1<<this.F2,v=r.t,b=v-p,w=null==e?s():e;for(a.dlShiftTo(b,w),r.compareTo(w)>=0&&(r[r.t++]=1,r.subTo(w,r)),o.ONE.dlShiftTo(p,w),w.subTo(a,a);a.t<p;)a[a.t++]=0;for(;--b>=0;){var _=r[--v]==f?this.DM:Math.floor(r[v]*y+(r[v-1]+m)*g);if((r[v]+=a.am(0,_,r,b,0,p))<_)for(a.dlShiftTo(b,w),r.subTo(w,r);r[v]<--_;)r.subTo(w,r)}null!=e&&(r.drShiftTo(p,e),c!=u&&o.ZERO.subTo(e,e)),r.t=p,r.clamp(),h>0&&r.rShiftTo(h,r),c<0&&o.ZERO.subTo(r,r)}}},o.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},o.prototype.isEven=function(){return 0===(this.t>0?1&this[0]:this.s)},o.prototype.exp=function(t,e){if(t>4294967295||t<1)return o.ONE;var r=s(),n=s(),i=e.convert(this),a=l(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var c=r;r=n,n=c}return e.revert(r)},o.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},o.prototype.toRadix=function(t){if(null==t&&(t=10),0===this.signum()||t<2||t>36)return\"0\";var e=this.chunkSize(t),r=Math.pow(t,e),n=f(r),i=s(),o=s(),a=\"\";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a},o.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,s=0,a=0,c=0;c<t.length;++c){var u=p(t,c);u<0?\"-\"==t.charAt(c)&&0===this.signum()&&(i=!0):(a=e*a+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(a,0)),i&&o.ZERO.subTo(this,this)},o.prototype.fromNumber=function(t,e){if(\"number\"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t),this.testBit(t-1)||this.bitwiseTo(o.ONE.shiftLeft(t-1),m,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(o.ONE.shiftLeft(t-1),this);else{var r=n.randomBytes(1+(t>>3)),i=7&t;i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromByteArray(r)}},o.prototype.bitwiseTo=function(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r[n]=e(this[n],t[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r[n]=e(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},o.prototype.changeBit=function(t,e){var r=o.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},o.prototype.addTo=function(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this[r]+t[r],e[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this[r],e[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t[r],e[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[r++]=n:n<-1&&(e[r++]=this.DV+n),e.t=r,e.clamp()},o.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},o.prototype.dAddOffset=function(t,e){if(0!==t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},o.prototype.multiplyLowerTo=function(t,e,r){var n,i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(n=Math.min(t.t,e);i<n;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()},o.prototype.multiplyUpperTo=function(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)},o.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0===e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r},o.prototype.millerRabin=function(t){var e=this.subtract(o.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var n=e.shiftRight(r);(t=t+1>>1)>k.length&&(t=k.length);for(var i=s(),a=0;a<t;++a){i.fromInt(k[Math.floor(Math.random()*k.length)]);var c=i.modPow(n,this);if(0!=c.compareTo(o.ONE)&&0!=c.compareTo(e)){for(var u=1;u++<r&&0!=c.compareTo(e);)if(0===(c=c.modPowInt(2,this)).compareTo(o.ONE))return!1;if(0!=c.compareTo(e))return!1}}return!0},o.prototype.toString=function(t){if(this.s<0)return\"-\"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,n=(1<<e)-1,i=!1,o=\"\",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(r=this[s]>>a)>0&&(i=!0,o=h(r));s>=0;)a<e?(r=(this[s]&(1<<a)-1)<<e-a,r|=this[--s]>>(a+=this.DB-e)):(r=this[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),r>0&&(i=!0),i&&(o+=h(r));return i?o:\"0\"},o.prototype.negate=function(){var t=s();return o.ZERO.subTo(this,t),t},o.prototype.abs=function(){return this.s<0?this.negate():this},o.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0},o.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+l(this[this.t-1]^this.s&this.DM)},o.prototype.mod=function(t){var e=s();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(o.ZERO)>0&&t.subTo(e,e),e},o.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new d(e):new y(e),this.exp(t,r)},o.prototype.clone=function(){var t=s();return this.copyTo(t),t},o.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},o.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},o.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},o.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},o.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,n=this.DB-t*this.DB%8,i=0;if(t-- >0)for(n<this.DB&&(r=this[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this[t]&(1<<n)-1)<<8-n,r|=this[--t]>>(n+=this.DB-8)):(r=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&r)&&(r|=-256),0===i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e},o.prototype.toBuffer=function(t){var e=new Buffer(this.toByteArray());if(!0===t&&0===e[0])e=e.slice(1);else if(i.isNumber(t)){if(e.length>t){for(var r=0;r<e.length-t;r++)if(0!==e[r])return null;return e.slice(e.length-t)}if(e.length<t){var n=new Buffer(t);return n.fill(0,0,t-e.length),e.copy(n,t-e.length),n}}return e},o.prototype.equals=function(t){return 0==this.compareTo(t)},o.prototype.min=function(t){return this.compareTo(t)<0?this:t},o.prototype.max=function(t){return this.compareTo(t)>0?this:t},o.prototype.and=function(t){var e=s();return this.bitwiseTo(t,g,e),e},o.prototype.or=function(t){var e=s();return this.bitwiseTo(t,m,e),e},o.prototype.xor=function(t){var e=s();return this.bitwiseTo(t,v,e),e},o.prototype.andNot=function(t){var e=s();return this.bitwiseTo(t,b,e),e},o.prototype.not=function(){for(var t=s(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t},o.prototype.shiftLeft=function(t){var e=s();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},o.prototype.shiftRight=function(t){var e=s();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},o.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+w(this[t]);return this.s<0?this.t*this.DB:-1},o.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=_(this[r]^e);return t},o.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},o.prototype.setBit=function(t){return this.changeBit(t,m)},o.prototype.clearBit=function(t){return this.changeBit(t,b)},o.prototype.flipBit=function(t){return this.changeBit(t,v)},o.prototype.add=function(t){var e=s();return this.addTo(t,e),e},o.prototype.subtract=function(t){var e=s();return this.subTo(t,e),e},o.prototype.multiply=function(t){var e=s();return this.multiplyTo(t,e),e},o.prototype.divide=function(t){var e=s();return this.divRemTo(t,e,null),e},o.prototype.remainder=function(t){var e=s();return this.divRemTo(t,null,e),e},o.prototype.divideAndRemainder=function(t){var e=s(),r=s();return this.divRemTo(t,e,r),new Array(e,r)},o.prototype.modPow=function(t,e){var r,n,i=t.bitLength(),o=f(1);if(i<=0)return o;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new d(e):e.isEven()?new x(e):new y(e);var a=new Array,c=3,u=r-1,h=(1<<r)-1;if(a[1]=n.convert(this),r>1){var p=s();for(n.sqrTo(a[1],p);c<=h;)a[c]=s(),n.mulTo(p,a[c-2],a[c]),c+=2}var g,m,v=t.t-1,b=!0,w=s();for(i=l(t[v])-1;v>=0;){for(i>=u?g=t[v]>>i-u&h:(g=(t[v]&(1<<i+1)-1)<<u-i,v>0&&(g|=t[v-1]>>this.DB+i-u)),c=r;0==(1&g);)g>>=1,--c;if((i-=c)<0&&(i+=this.DB,--v),b)a[g].copyTo(o),b=!1;else{for(;c>1;)n.sqrTo(o,w),n.sqrTo(w,o),c-=2;c>0?n.sqrTo(o,w):(m=o,o=w,w=m),n.mulTo(w,a[g],o)}for(;v>=0&&0==(t[v]&1<<i);)n.sqrTo(o,w),m=o,o=w,w=m,--i<0&&(i=this.DB-1,--v)}return n.revert(o)},o.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0===t.signum())return o.ZERO;for(var r=t.clone(),n=this.clone(),i=f(1),s=f(0),a=f(0),c=f(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(t,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),e?(a.isEven()&&c.isEven()||(a.addTo(this,a),c.subTo(t,c)),a.rShiftTo(1,a)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),s.subTo(c,s)):(n.subTo(r,n),e&&a.subTo(i,a),c.subTo(s,c))}return 0!=n.compareTo(o.ONE)?o.ZERO:c.compareTo(t)>=0?c.subtract(t):c.signum()<0?(c.addTo(t,c),c.signum()<0?c.add(t):c):c},o.prototype.pow=function(t){return this.exp(t,new S)},o.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},o.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r[0]<=k[k.length-1]){for(e=0;e<k.length;++e)if(r[0]==k[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<k.length;){for(var n=k[e],i=e+1;i<k.length&&n<O;)n*=k[i++];for(n=r.modInt(n);e<i;)if(n%k[e++]==0)return!1}return r.millerRabin(t)},o.int2char=h,o.ZERO=f(0),o.ONE=f(1),o.prototype.square=function(){var t=s();return this.squareTo(t),t},t.exports=o},function(t,e,r){\"use strict\";var n=r(12),i=r(146).filter,o=r(61),s=r(60),a=o(\"filter\"),c=s(\"filter\");n({target:\"Array\",proto:!0,forced:!a||!c},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){var n=r(12),i=r(19),o=r(129),s=r(29),a=r(35),c=r(102);n({target:\"Object\",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){for(var e,r,n=s(t),i=a.f,u=o(n),h={},p=0;u.length>p;)void 0!==(r=i(n,e=u[p++]))&&c(h,e,r);return h}})},function(t,e,r){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[\"$\"+t]=this._callbacks[\"$\"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks[\"$\"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[\"$\"+t],this;for(var i=0;i<n.length;i++)if((r=n[i])===e||r.fn===e){n.splice(i,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[\"$\"+t];if(r)for(var n=0,i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[\"$\"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){t.exports=require(\"zlib\")},function(t,e,r){\"use strict\";t.exports={BINARY_TYPES:[\"nodebuffer\",\"arraybuffer\",\"fragments\"],GUID:\"258EAFA5-E914-47DA-95CA-C5AB0DC85B11\",kStatusCode:Symbol(\"status-code\"),kWebSocket:Symbol(\"websocket\"),EMPTY_BUFFER:Buffer.alloc(0),NOOP:()=>{}}},,,,,,,,function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if(\"function\"!=typeof t)throw TypeError(String(t)+\" is not a function\");return t}},function(t,e,r){\"use strict\";const n=r(59),i=r(100),o=process.env;let s;function a(t){return function(t){return 0!==t&&{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}(function(t){if(!1===s)return 0;if(i(\"color=16m\")||i(\"color=full\")||i(\"color=truecolor\"))return 3;if(i(\"color=256\"))return 2;if(t&&!t.isTTY&&!0!==s)return 0;const e=s?1:0;if(\"win32\"===process.platform){const t=n.release().split(\".\");return Number(process.versions.node.split(\".\")[0])>=8&&Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if(\"CI\"in o)return[\"TRAVIS\",\"CIRCLECI\",\"APPVEYOR\",\"GITLAB_CI\"].some(t=>t in o)||\"codeship\"===o.CI_NAME?1:e;if(\"TEAMCITY_VERSION\"in o)return/^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(o.TEAMCITY_VERSION)?1:0;if(\"truecolor\"===o.COLORTERM)return 3;if(\"TERM_PROGRAM\"in o){const t=parseInt((o.TERM_PROGRAM_VERSION||\"\").split(\".\")[0],10);switch(o.TERM_PROGRAM){case\"iTerm.app\":return t>=3?3:2;case\"Apple_Terminal\":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||\"COLORTERM\"in o?1:(o.TERM,e)}(t))}i(\"no-color\")||i(\"no-colors\")||i(\"color=false\")?s=!1:(i(\"color\")||i(\"colors\")||i(\"color=true\")||i(\"color=always\"))&&(s=!0),\"FORCE_COLOR\"in o&&(s=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),t.exports={supportsColor:a,stdout:a(process.stdout),stderr:a(process.stderr)}},function(t,e){t.exports=require(\"os\")},function(t,e,r){var n=r(19),i=r(9),o=r(13),s=Object.defineProperty,a={},c=function(t){throw t};t.exports=function(t,e){if(o(a,t))return a[t];e||(e={});var r=[][t],u=!!o(e,\"ACCESSORS\")&&e.ACCESSORS,h=o(e,0)?e[0]:c,p=o(e,1)?e[1]:void 0;return a[t]=!!r&&!i((function(){if(u&&!n)return!0;var t={length:-1};u?s(t,1,{enumerable:!0,get:c}):t[1]=1,r.call(t,h,p)}))}},function(t,e,r){var n=r(9),i=r(4),o=r(96),s=i(\"species\");t.exports=function(t){return o>=51||!n((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,r){\"use strict\";var n,i,o=r(238),s=r(239),a=RegExp.prototype.exec,c=String.prototype.replace,u=a,h=(n=/a/,i=/b*/g,a.call(n,\"a\"),a.call(i,\"a\"),0!==n.lastIndex||0!==i.lastIndex),p=s.UNSUPPORTED_Y||s.BROKEN_CARET,f=void 0!==/()??/.exec(\"\")[1];(h||f||p)&&(u=function(t){var e,r,n,i,s=this,u=p&&s.sticky,l=o.call(s),d=s.source,y=0,g=t;return u&&(-1===(l=l.replace(\"y\",\"\")).indexOf(\"g\")&&(l+=\"g\"),g=String(t).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&\"\\n\"!==t[s.lastIndex-1])&&(d=\"(?: \"+d+\")\",g=\" \"+g,y++),r=new RegExp(\"^(?:\"+d+\")\",l)),f&&(r=new RegExp(\"^\"+d+\"$(?!\\\\s)\",l)),h&&(e=s.lastIndex),n=a.call(u?r:s,g),u?n?(n.input=n.input.slice(y),n[0]=n[0].slice(y),n.index=s.lastIndex,s.lastIndex+=n[0].length):s.lastIndex=0:h&&n&&(s.lastIndex=s.global?n.index+n[0].length:e),f&&n&&n.length>1&&c.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n}),t.exports=u},function(t,e){t.exports=require(\"constants\")},function(t,e){t.exports=require(\"https\")},function(t,e){e.encode=function(t){var e=\"\";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+=\"&\"),e+=encodeURIComponent(r)+\"=\"+encodeURIComponent(t[r]));return e},e.decode=function(t){for(var e={},r=t.split(\"&\"),n=0,i=r.length;n<i;n++){var o=r[n].split(\"=\");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e){t.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){\"use strict\";const n=r(291),i=r(47),o=r(117),{kStatusCode:s,NOOP:a}=r(48),c=Buffer.from([0,0,255,255]),u=Buffer.from([0]),h=Symbol(\"permessage-deflate\"),p=Symbol(\"total-length\"),f=Symbol(\"callback\"),l=Symbol(\"buffers\"),d=Symbol(\"error\");let y;function g(t){this[l].push(t),this[p]+=t.length}function m(t){this[p]+=t.length,this[h]._maxPayload<1||this[p]<=this[h]._maxPayload?this[l].push(t):(this[d]=new RangeError(\"Max payload size exceeded\"),this[d][s]=1009,this.removeListener(\"data\",m),this.reset())}function v(t){this[h]._inflate=null,t[s]=1007,this[f](t)}t.exports=class{constructor(t,e,r){if(this._maxPayload=0|r,this._options=t||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!e,this._deflate=null,this._inflate=null,this.params=null,!y){const t=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;y=new n({concurrency:t})}}static get extensionName(){return\"permessage-deflate\"}offer(){const t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate&&(this._deflate.close(),this._deflate=null)}acceptAsServer(t){const e=this._options,r=t.find(t=>!(!1===e.serverNoContextTakeover&&t.server_no_context_takeover||t.server_max_window_bits&&(!1===e.serverMaxWindowBits||\"number\"==typeof e.serverMaxWindowBits&&e.serverMaxWindowBits>t.server_max_window_bits)||\"number\"==typeof e.clientMaxWindowBits&&!t.client_max_window_bits));if(!r)throw new Error(\"None of the extension offers can be accepted\");return e.serverNoContextTakeover&&(r.server_no_context_takeover=!0),e.clientNoContextTakeover&&(r.client_no_context_takeover=!0),\"number\"==typeof e.serverMaxWindowBits&&(r.server_max_window_bits=e.serverMaxWindowBits),\"number\"==typeof e.clientMaxWindowBits?r.client_max_window_bits=e.clientMaxWindowBits:!0!==r.client_max_window_bits&&!1!==e.clientMaxWindowBits||delete r.client_max_window_bits,r}acceptAsClient(t){const e=t[0];if(!1===this._options.clientNoContextTakeover&&e.client_no_context_takeover)throw new Error('Unexpected parameter \"client_no_context_takeover\"');if(e.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||\"number\"==typeof this._options.clientMaxWindowBits&&e.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter \"client_max_window_bits\"')}else\"number\"==typeof this._options.clientMaxWindowBits&&(e.client_max_window_bits=this._options.clientMaxWindowBits);return e}normalizeParams(t){return t.forEach(t=>{Object.keys(t).forEach(e=>{var r=t[e];if(r.length>1)throw new Error(`Parameter \"${e}\" must have only a single value`);if(r=r[0],\"client_max_window_bits\"===e){if(!0!==r){const t=+r;if(!Number.isInteger(t)||t<8||t>15)throw new TypeError(`Invalid value for parameter \"${e}\": ${r}`);r=t}else if(!this._isServer)throw new TypeError(`Invalid value for parameter \"${e}\": ${r}`)}else if(\"server_max_window_bits\"===e){const t=+r;if(!Number.isInteger(t)||t<8||t>15)throw new TypeError(`Invalid value for parameter \"${e}\": ${r}`);r=t}else{if(\"client_no_context_takeover\"!==e&&\"server_no_context_takeover\"!==e)throw new Error(`Unknown parameter \"${e}\"`);if(!0!==r)throw new TypeError(`Invalid value for parameter \"${e}\": ${r}`)}t[e]=r})}),t}decompress(t,e,r){y.push(n=>{this._decompress(t,e,(t,e)=>{n(),r(t,e)})})}compress(t,e,r){y.push(n=>{this._compress(t,e,(t,e)=>{n(),r(t,e)})})}_decompress(t,e,r){const n=this._isServer?\"client\":\"server\";if(!this._inflate){const t=n+\"_max_window_bits\",e=\"number\"!=typeof this.params[t]?i.Z_DEFAULT_WINDOWBITS:this.params[t];this._inflate=i.createInflateRaw(Object.assign({},this._options.zlibInflateOptions,{windowBits:e})),this._inflate[h]=this,this._inflate[p]=0,this._inflate[l]=[],this._inflate.on(\"error\",v),this._inflate.on(\"data\",m)}this._inflate[f]=r,this._inflate.write(t),e&&this._inflate.write(c),this._inflate.flush(()=>{const t=this._inflate[d];if(t)return this._inflate.close(),this._inflate=null,void r(t);const i=o.concat(this._inflate[l],this._inflate[p]);e&&this.params[n+\"_no_context_takeover\"]?(this._inflate.close(),this._inflate=null):(this._inflate[p]=0,this._inflate[l]=[]),r(null,i)})}_compress(t,e,r){if(!t||0===t.length)return void process.nextTick(r,null,u);const n=this._isServer?\"server\":\"client\";if(!this._deflate){const t=n+\"_max_window_bits\",e=\"number\"!=typeof this.params[t]?i.Z_DEFAULT_WINDOWBITS:this.params[t];this._deflate=i.createDeflateRaw(Object.assign({},this._options.zlibDeflateOptions,{windowBits:e})),this._deflate[p]=0,this._deflate[l]=[],this._deflate.on(\"error\",a),this._deflate.on(\"data\",g)}this._deflate.write(t),this._deflate.flush(i.Z_SYNC_FLUSH,()=>{if(this._deflate){var t=o.concat(this._deflate[l],this._deflate[p]);e&&(t=t.slice(0,t.length-4)),e&&this.params[n+\"_no_context_takeover\"]?(this._deflate.close(),this._deflate=null):(this._deflate[p]=0,this._deflate[l]=[]),r(null,t)}})}}},,,,,,,,,,,,,function(t,e,r){r(81).config(Object.assign({},r(82),r(83)(process.argv)))},function(t,e,r){const n=r(5),i=r(7);function o(t){console.log(\"[dotenv][DEBUG] \"+t)}const s=/^\\s*([\\w.-]+)\\s*=\\s*(.*)?\\s*$/,a=/\\\\n/g,c=/\\n|\\r|\\r\\n/;function u(t,e){const r=Boolean(e&&e.debug),n={};return t.toString().split(c).forEach((function(t,e){const i=t.match(s);if(null!=i){const t=i[1];let e=i[2]||\"\";const r=e.length-1,o='\"'===e[0]&&'\"'===e[r];\"'\"===e[0]&&\"'\"===e[r]||o?(e=e.substring(1,r),o&&(e=e.replace(a,\"\\n\"))):e=e.trim(),n[t]=e}else r&&o(`did not match key and value when parsing line ${e+1}: ${t}`)})),n}t.exports.config=function(t){let e=i.resolve(process.cwd(),\".env\"),r=\"utf8\",s=!1;t&&(null!=t.path&&(e=t.path),null!=t.encoding&&(r=t.encoding),null!=t.debug&&(s=!0));try{const t=u(n.readFileSync(e,{encoding:r}),{debug:s});return Object.keys(t).forEach((function(e){Object.prototype.hasOwnProperty.call(process.env,e)?s&&o(`\"${e}\" is already defined in \\`process.env\\` and will not be overwritten`):process.env[e]=t[e]})),{parsed:t}}catch(t){return{error:t}}},t.exports.parse=u},function(t,e){const r={};null!=process.env.DOTENV_CONFIG_ENCODING&&(r.encoding=process.env.DOTENV_CONFIG_ENCODING),null!=process.env.DOTENV_CONFIG_PATH&&(r.path=process.env.DOTENV_CONFIG_PATH),null!=process.env.DOTENV_CONFIG_DEBUG&&(r.debug=process.env.DOTENV_CONFIG_DEBUG),t.exports=r},function(t,e){const r=/^dotenv_config_(encoding|path|debug)=(.+)$/;t.exports=function(t){return t.reduce((function(t,e){const n=e.match(r);return n&&(t[n[1]]=n[2]),t}),{})}},function(t,e,r){\"use strict\";r(25);const n=r(1),i=r(2),o=r(0)(\"ps4:detector\"),s=r(42);function a(){this.alive=!0}n.inherits(a,i.EventEmitter),a.prototype.detect=function(t){const e=this,r=s.udpSocket();this.socket=r;let n=t;if(n&&\"number\"!=typeof n){if(n&&\"object\"!=typeof n)throw new Error(\"Illegal value for detectOpts: \"+n)}else n={timeout:n};r.bind(n.bindPort,n.bindAddress,()=>{r.setBroadcast(!0),r.on(\"message\",(t,r)=>{const n=s.parse(t);o(\"received\",n,\"from\",r);const i=n.type.toLowerCase();e.emit(i,n,r)}),r.on(\"error\",t=>{e.emit(\"error\",t)});const t=()=>{e.alive&&(o(\"sending SRCH\"),r.discover(\"SRCH\"),e.searchTimer=setTimeout(t,1e3))};t()}),\"number\"==typeof n.timeout&&(e.timeoutTimer=setTimeout(this.close.bind(this),n.timeout))},a.prototype.close=function(){clearTimeout(this.searchTimer),clearTimeout(this.timeoutTimer),this.emit(\"close\"),this.alive=!1,this.socket&&this.socket.close()},a.findWhen=function(t,e,r){if(!r)throw new Error(\"`callback` is required\");return new Promise(n=>{const i={},o=new a,s=()=>{r(new Error(\"Could not detect any matching PS4 device\"))};o.on(\"close\",s),o.on(\"device\",(e,n)=>{if(!i[e[\"host-id\"]]&&(i[e[\"host-id\"]]=!0,t(e,n))){o.removeListener(\"close\",s);r(null,e,n)&&o.close()}}),o.on(\"close\",()=>{n()}),o.detect(e)})},a.findFirst=function(t,e,r){return a.findWhen(t,e,(t,e,n)=>(r(t,e,n),!0))},a.findAny=function(t,e){return a.findFirst(()=>!0,t,e)},a.find=function(t,e,r){return a.findFirst((e,r)=>r.address===t,e,r)},t.exports=a},function(t,e,r){var n=r(10);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&\"function\"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if(\"function\"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&\"function\"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError(\"Can't convert object to primitive value\")}},function(t,e,r){var n=r(6),i=r(10),o=n.document,s=i(o)&&i(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e,r){var n=r(6),i=r(26);t.exports=function(t,e){try{i(n,t,e)}catch(r){n[t]=e}return e}},function(t,e,r){var n=r(125),i=Function.toString;\"function\"!=typeof n.inspectSource&&(n.inspectSource=function(t){return i.call(t)}),t.exports=n.inspectSource},function(t,e,r){var n,i,o,s=r(214),a=r(6),c=r(10),u=r(26),h=r(13),p=r(90),f=r(91),l=a.WeakMap;if(s){var d=new l,y=d.get,g=d.has,m=d.set;n=function(t,e){return m.call(d,t,e),e},i=function(t){return y.call(d,t)||{}},o=function(t){return g.call(d,t)}}else{var v=p(\"state\");f[v]=!0,n=function(t,e){return u(t,v,e),e},i=function(t){return h(t,v)?t[v]:{}},o=function(t){return h(t,v)}}t.exports={set:n,get:i,has:o,enforce:function(t){return o(t)?i(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!c(e)||(r=i(e)).type!==t)throw TypeError(\"Incompatible receiver, \"+t+\" required\");return r}}}},function(t,e,r){var n=r(126),i=r(127),o=n(\"keys\");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e){t.exports={}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e){t.exports=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"]},function(t,e,r){var n=r(23).f,i=r(13),o=r(4)(\"toStringTag\");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(57);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n,i,o=r(6),s=r(139),a=o.process,c=a&&a.versions,u=c&&c.v8;u?i=(n=u.split(\".\"))[0]+n[1]:s&&(!(n=s.match(/Edge\\/(\\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\\/(\\d+)/))&&(i=n[1]),t.exports=i&&+i},function(t,e,r){e.log=function(...t){return\"object\"==typeof console&&console.log&&console.log(...t)},e.formatArgs=function(e){if(e[0]=(this.useColors?\"%c\":\"\")+this.namespace+(this.useColors?\" %c\":\" \")+e[0]+(this.useColors?\"%c \":\" \")+\"+\"+t.exports.humanize(this.diff),!this.useColors)return;const r=\"color: \"+this.color;e.splice(1,0,r,\"color: inherit\");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,t=>{\"%%\"!==t&&(n++,\"%c\"===t&&(i=n))}),e.splice(i,0,r)},e.save=function(t){try{t?e.storage.setItem(\"debug\",t):e.storage.removeItem(\"debug\")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem(\"debug\")}catch(t){}!t&&\"undefined\"!=typeof process&&\"env\"in process&&(t=process.env.DEBUG);return t},e.useColors=function(){if(\"undefined\"!=typeof window&&window.process&&(\"renderer\"===window.process.type||window.process.__nwjs))return!0;if(\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/))return!1;return\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=[\"#0000CC\",\"#0000FF\",\"#0033CC\",\"#0033FF\",\"#0066CC\",\"#0066FF\",\"#0099CC\",\"#0099FF\",\"#00CC00\",\"#00CC33\",\"#00CC66\",\"#00CC99\",\"#00CCCC\",\"#00CCFF\",\"#3300CC\",\"#3300FF\",\"#3333CC\",\"#3333FF\",\"#3366CC\",\"#3366FF\",\"#3399CC\",\"#3399FF\",\"#33CC00\",\"#33CC33\",\"#33CC66\",\"#33CC99\",\"#33CCCC\",\"#33CCFF\",\"#6600CC\",\"#6600FF\",\"#6633CC\",\"#6633FF\",\"#66CC00\",\"#66CC33\",\"#9900CC\",\"#9900FF\",\"#9933CC\",\"#9933FF\",\"#99CC00\",\"#99CC33\",\"#CC0000\",\"#CC0033\",\"#CC0066\",\"#CC0099\",\"#CC00CC\",\"#CC00FF\",\"#CC3300\",\"#CC3333\",\"#CC3366\",\"#CC3399\",\"#CC33CC\",\"#CC33FF\",\"#CC6600\",\"#CC6633\",\"#CC9900\",\"#CC9933\",\"#CCCC00\",\"#CCCC33\",\"#FF0000\",\"#FF0033\",\"#FF0066\",\"#FF0099\",\"#FF00CC\",\"#FF00FF\",\"#FF3300\",\"#FF3333\",\"#FF3366\",\"#FF3399\",\"#FF33CC\",\"#FF33FF\",\"#FF6600\",\"#FF6633\",\"#FF9900\",\"#FF9933\",\"#FFCC00\",\"#FFCC33\"],t.exports=r(41)(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return\"[UnexpectedJSONParseError]: \"+t.message}}},function(t,e){var r=1e3,n=6e4,i=60*n,o=24*i;function s(t,e,r,n){var i=e>=1.5*r;return Math.round(t/r)+\" \"+n+(i?\"s\":\"\")}t.exports=function(t,e){e=e||{};var a=typeof t;if(\"string\"===a&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||\"ms\").toLowerCase()){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return 315576e5*s;case\"weeks\":case\"week\":case\"w\":return 6048e5*s;case\"days\":case\"day\":case\"d\":return s*o;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return s*i;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return s*n;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return s*r;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return s;default:return}}(t);if(\"number\"===a&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return s(t,e,o,\"day\");if(e>=i)return s(t,e,i,\"hour\");if(e>=n)return s(t,e,n,\"minute\");if(e>=r)return s(t,e,r,\"second\");return t+\" ms\"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+\"d\";if(e>=i)return Math.round(t/i)+\"h\";if(e>=n)return Math.round(t/n)+\"m\";if(e>=r)return Math.round(t/r)+\"s\";return t+\"ms\"}(t);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(t))}},function(t,e,r){const n=r(20),i=r(1);e.init=function(t){t.inspectOpts={};const r=Object.keys(e.inspectOpts);for(let n=0;n<r.length;n++)t.inspectOpts[r[n]]=e.inspectOpts[r[n]]},e.log=function(...t){return process.stderr.write(i.format(...t)+\"\\n\")},e.formatArgs=function(r){const{namespace:n,useColors:i}=this;if(i){const e=this.color,i=\"\u001b[3\"+(e<8?e:\"8;5;\"+e),o=`  ${i};1m${n} \u001b[0m`;r[0]=o+r[0].split(\"\\n\").join(\"\\n\"+o),r.push(i+\"m+\"+t.exports.humanize(this.diff)+\"\u001b[0m\")}else r[0]=function(){if(e.inspectOpts.hideDate)return\"\";return(new Date).toISOString()+\" \"}()+n+\" \"+r[0]},e.save=function(t){t?process.env.DEBUG=t:delete process.env.DEBUG},e.load=function(){return process.env.DEBUG},e.useColors=function(){return\"colors\"in e.inspectOpts?Boolean(e.inspectOpts.colors):n.isatty(process.stderr.fd)},e.colors=[6,2,3,4,5,1];try{const t=r(58);t&&(t.stderr||t).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}e.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{const r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(t,e)=>e.toUpperCase());let n=process.env[e];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&(\"null\"===n?null:Number(n)),t[r]=n,t},{}),t.exports=r(41)(e);const{formatters:o}=t.exports;o.o=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts).replace(/\\s*\\n\\s*/g,\" \")},o.O=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts)}},function(t,e,r){\"use strict\";t.exports=(t,e)=>{e=e||process.argv;const r=t.startsWith(\"-\")?\"\":1===t.length?\"-\":\"--\",n=e.indexOf(r+t),i=e.indexOf(\"--\");return-1!==n&&(-1===i||n<i)}},function(t,e,r){var n=r(22);t.exports=Array.isArray||function(t){return\"Array\"==n(t)}},function(t,e,r){\"use strict\";var n=r(85),i=r(23),o=r(56);t.exports=function(t,e,r){var s=n(e);s in t?i.f(t,s,o(0,r)):t[s]=r}},function(t,e,r){var n=r(252);t.exports={Ber:n,BerReader:n.Reader,BerWriter:n.Writer}},function(t,e){t.exports={newInvalidAsn1Error:function(t){var e=new Error;return e.name=\"InvalidAsn1Error\",e.message=t||\"\",e}}},function(t,e){t.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},function(t,e,r){var n=r(36);t.exports=function(t){return Object(n(t))}},function(t,e,r){\"use strict\";function n(t,e,r,n,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,i)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var s=t.apply(e,r);function a(t){n(s,i,o,a,c,\"next\",t)}function c(t){n(s,i,o,a,c,\"throw\",t)}a(void 0)}))}}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(r,!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(44),r(45),r(25);const c=r(1),u=r(2),h=r(17),p=r(0)(\"ps4:socket\"),f=r(42),l=r(274),d=r(152).delayMillis;let y;function g(t){this.config=s({modelAppendHostname:!0,autoLogin:!0},t),this.packets=new l,this.loggedIn=!1,this._loginResult=null,this.config.host&&this.connect(this.config.host,this.config.port)}c.inherits(g,u.EventEmitter),g.prototype.connect=function(t,e){var r=this;if(this.client)throw new Error(\"Socket is already connected\");const n={\"user-credential\":this.config.accountId},o={address:t};this._lastConnect={host:t,port:e};const s=f.udpSocket();s.bind(i((function*(){yield s.discover(\"WAKEUP\",n,o),yield s.discover(\"LAUNCH\",n,o),yield d(500),r._connect(t,e),s.close()})))},g.prototype._connect=function(t,e){const r=e||997;return this.client=h.connect({host:t,port:r},()=>{p(\"client connected\"),this.emit(\"connected\",this),this.send(this.packets.newCHelloPacket())}),this.client.on(\"data\",this.receiveData.bind(this)),this.client.on(\"error\",t=>{this.client=null,this._loginResult=null,p(\"error\",t),this.emit(\"error\",t)}),this.client.on(\"close\",()=>{this._cleanup(),p(\"client disconnected\"),this.emit(\"disconnected\",this)}),this},g.prototype._cleanup=function(){this.packets.reset(),this.client=null,this.loggedIn=!1,this._loginResult=null},g.prototype.close=function(){p(\"close(); sending BYE\"),this.packets.newByePacket().encrypted().send(this)},g.prototype.isLoggedIn=function(){return this.loggedIn},g.prototype.login=function(t,e){let r=t||{};\"string\"!=typeof r&&\"number\"!=typeof r||(r={pinCode:r});let n=e;if(n||\"function\"!=typeof r||(n=r,r={}),this.loggedIn)n&&n(null);else{if(r=s({pinCode:\"\"},r),n){if(p.enabled){const t=s({},r);r.accountId&&(t.accountId=\"<redacted>\"),r.passCode&&(t.passCode=\"<redacted>\"),p(\"Login w/ config\",t)}let t;const e=e=>(p(\"Login result\",e),clearTimeout(t),e.error?n(new Error(e.error)):e.error_code?n(new Error(\"ERR: \"+e.error_code)):n(null));t=setTimeout(()=>{p(\"Login timed out\"),this.removeListener(\"login_result\",e),this.emit(\"login_result\",{error_code:-1,error:\"Timeout\"}),n(new Error(\"Timeout logging in\"))},6e4),this.once(\"login_result\",e)}p(\"Sending registration:\",r.pinCode),this.packets.newLoginPacket({accountId:this.config.accountId,passCode:r.passCode||\"\",pinCode:r.pinCode,modelAppendHostname:this.config.modelAppendHostname}).encrypted().send(this)}},g.prototype.logout=function(t){if(this.packets.newLogoutPacket().encrypted().send(this),!t)return;let e;const r=r=>{clearTimeout(e),r.status?t(new Error(\"Unable to logout: \"+r.status)):t(null)};e=setTimeout(()=>{p(\"Logout timeout\"),this.removeListener(\"login_result\",r),t(new Error(\"Timeout waiting for logout result\"))},6e4),this.once(\"logout_result\",r)},g.prototype.requestStandby=function(t){p(\"Requesting standby\"),this.packets.create(8).writeInt(26).encrypted().send(this),t&&this.once(\"standby_result\",e=>{if(e.status){const r=new Error(\"Unable to go standby:\"+e.status);return r.status=e.status,t(r)}return t()})},g.prototype.receiveData=function(t){const e=this.packets.parse(t);p(\"<<\",t,`\\n====>(${e.type()})`,e.buf),this.emit(\"packet\",e);const r=e.type();y[r]?y[r].call(this,e):p(\"<<< UNKNOWN PACKET!\")},g.prototype.send=function(t){if(!this.client)throw new Error(\"This socket is not connected\");t.send(this.client)},g.prototype.changeOskString=function(t,e){this.packets.newOskChangeStringPacket(t,e).encrypted().send(this)},g.prototype.sendOskCommand=function(t){this.packets.newOskControlPacket(t).encrypted().send(this)},g.prototype.startOsk=function(t){p(\"Starting OSK\"),this.packets.newOskStartPacket().encrypted().send(this),t&&this.once(\"start_osk_result\",e=>{e.status?t(new Error(\"Unable to start OSK: Error code \"+e.status)):t(null,e)})},g.prototype.startTitle=function(t,e){p(\"Starting title\",t),this.packets.newBootRequestPacket(t).encrypted().send(this),e&&this.once(\"start_title_result\",r=>{r.status?e(new Error(`Error ${r.status} starting ${t}`)):e()})},g.prototype.startTitle2=function(t){p(\"Starting title\",t),this.packets.newBootRequest2Packet(t).encrypted().send(this)},g.prototype.remoteControl=function(t,e){p(\"Sending remote control\",t,e),this.packets.newRemoteControlPacket(t,e).encrypted().send(this)},g.prototype.write=function(t){p(\">>\",t.length,t),this.client.write(t)},y={1868784496:function(t){t.status=t.readInt(12),0!==t.status&&(this.emit(\"error\",new Error(\"Unknown status code: \"+t.status)),this.close()),p(\"Sending handshake\"),this.send(this.packets.newHandshakePacket(t)),this.emit(\"shello\",t),this.config.autoLogin?this.login(this.config,t=>{t?p(\"Auto-Login error:\",t):p(\"Auto-Login success!\")}):this.emit(\"ready\",this)},0:function(t){p(\"<<< INVALID\"),this.emit(\"invalid\",t)},7:function(t){const e=t.readInt(8);if(t.result=e,p(\"<<< LOGIN_RESULT\",e),0!==e){t.error=\"LOGIN_FAILED\",t.error_code=e;const r={20:\"PIN_IS_NEEDED\",22:\"PASSCODE_IS_NEEDED\",24:\"PASSCODE_IS_UNMATCHED\",30:\"LOGIN_MGR_BUSY\"};r[e]&&(t.error=r[e])}0===e&&(this.packets.newStatusPacket(0).encrypted().send(this),this.loggedIn=!0),this._loginResult=t,this.emit(\"ready\",this),this.emit(\"login_result\",t)},11:function(t){t.status=t.readInt(8),p(\"<<< START_TITLE_RESULT\",t.status),this.emit(\"start_title_result\",t)},13:function(t){t.status=t.readInt(8),t.oskType=t.readInt(12),t.buf.length>36&&(t.max=t.readInt(32),t.initial=t.readString(36)),this.emit(\"start_osk_result\",t)},14:function(t){t._index=8,t.preEditIndex=t.readInt(),t.preEditLength=t.readInt(),t.buf.length>36&&(t._index+=16,t.editIndex=t.readInt(),t.editLength=t.readInt(),t.caretIndex=t.readInt(),t.string=t.readString(t._index)),this.emit(\"osk_string_changed\",t)},16:function(t){t.commandId=t.readInt(),t.command=0===t.commandId?\"return\":\"close\",this.emit(\"osk_command\",t)},18:function(t){t.status=t.readInt(8),p(\"<<< SERVER_STATUS\",t.status),this.emit(\"status\",t),this.packets.newStatusPacket(0).encrypted().send(this)},27:function(t){t.status=t.readInt(8),p(\"<<< STANDBY_RESULT\",t.status),this.emit(\"standby_result\",t)},35:function(t){t.status=t.readInt(8),p(\"<<< LOGOUT_RESULT\",t.status),this.emit(\"logout_result\",t)}},t.exports=function(t,e){const r=new g(t);return e&&(r.on(\"error\",t=>{e(t)}),r.once(\"ready\",()=>{e(null,r)})),r},t.exports.RCKeys=l.RCKeys},function(t,e,r){var n=r(281)(\"socket.io-parser\"),i=r(46),o=r(284),s=r(157),a=r(158);function c(){}e.protocol=4,e.types=[\"CONNECT\",\"DISCONNECT\",\"EVENT\",\"ACK\",\"ERROR\",\"BINARY_EVENT\",\"BINARY_ACK\"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=c,e.Decoder=p;var u=e.ERROR+'\"encode error\"';function h(t){var r=\"\"+t.type;if(e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(r+=t.attachments+\"-\"),t.nsp&&\"/\"!==t.nsp&&(r+=t.nsp+\",\"),null!=t.id&&(r+=t.id),null!=t.data){var i=function(t){try{return JSON.stringify(t)}catch(t){return!1}}(t.data);if(!1===i)return u;r+=i}return n(\"encoded %j as %s\",t,r),r}function p(){this.reconstructor=null}function f(t){this.reconPack=t,this.buffers=[]}function l(t){return{type:e.ERROR,data:\"parser error: \"+t}}c.prototype.encode=function(t,r){(n(\"encoding packet %j\",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)?function(t,e){o.removeBlobs(t,(function(t){var r=o.deconstructPacket(t),n=h(r.packet),i=r.buffers;i.unshift(n),e(i)}))}(t,r):r([h(t)])},i(p.prototype),p.prototype.add=function(t){var r;if(\"string\"==typeof t)r=function(t){var r=0,i={type:Number(t.charAt(0))};if(null==e.types[i.type])return l(\"unknown packet type \"+i.type);if(e.BINARY_EVENT===i.type||e.BINARY_ACK===i.type){for(var o=\"\";\"-\"!==t.charAt(++r)&&(o+=t.charAt(r),r!=t.length););if(o!=Number(o)||\"-\"!==t.charAt(r))throw new Error(\"Illegal attachments\");i.attachments=Number(o)}if(\"/\"===t.charAt(r+1))for(i.nsp=\"\";++r;){if(\",\"===(c=t.charAt(r)))break;if(i.nsp+=c,r===t.length)break}else i.nsp=\"/\";var a=t.charAt(r+1);if(\"\"!==a&&Number(a)==a){for(i.id=\"\";++r;){var c;if(null==(c=t.charAt(r))||Number(c)!=c){--r;break}if(i.id+=t.charAt(r),r===t.length)break}i.id=Number(i.id)}if(t.charAt(++r)){var u=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(r));if(!(!1!==u&&(i.type===e.ERROR||s(u))))return l(\"invalid payload\");i.data=u}return n(\"decoded %s as %j\",t,i),i}(t),e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type?(this.reconstructor=new f(r),0===this.reconstructor.reconPack.attachments&&this.emit(\"decoded\",r)):this.emit(\"decoded\",r);else{if(!a(t)&&!t.base64)throw new Error(\"Unknown type: \"+t);if(!this.reconstructor)throw new Error(\"got binary data when not reconstructing a packet\");(r=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit(\"decoded\",r))}},p.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},f.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},f.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,r){\n/**\n * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.\n *\n * This can be used with JS designed for browsers to improve reuse of code and\n * allow the use of existing libraries.\n *\n * Usage: include(\"XMLHttpRequest.js\") and use XMLHttpRequest per W3C specs.\n *\n * @author Dan DeFelippi <dan@driverdan.com>\n * @contributor David Ellis <d.f.ellis@ieee.org>\n * @license MIT\n */\nvar n=r(5),i=r(15),o=r(154).spawn;function s(t){\"use strict\";t=t||{};var e,s,a=this,c=r(8),u=r(64),h={},p=!1,f={\"User-Agent\":\"node-XMLHttpRequest\",Accept:\"*/*\"},l=Object.assign({},f),d=[\"accept-charset\",\"accept-encoding\",\"access-control-request-headers\",\"access-control-request-method\",\"connection\",\"content-length\",\"content-transfer-encoding\",\"cookie\",\"cookie2\",\"date\",\"expect\",\"host\",\"keep-alive\",\"origin\",\"referer\",\"te\",\"trailer\",\"transfer-encoding\",\"upgrade\",\"via\"],y=[\"TRACE\",\"TRACK\",\"CONNECT\"],g=!1,m=!1,v={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText=\"\",this.responseXML=\"\",this.status=null,this.statusText=null;this.open=function(t,e,r,n,i){if(this.abort(),m=!1,!function(t){return t&&-1===y.indexOf(t)}(t))throw\"SecurityError: Request method not allowed\";h={method:t,url:e.toString(),async:\"boolean\"!=typeof r||r,user:n||null,password:i||null},b(this.OPENED)},this.setDisableHeaderCheck=function(t){p=t},this.setRequestHeader=function(t,e){if(this.readyState!=this.OPENED)throw\"INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN\";if(!function(t){return p||t&&-1===d.indexOf(t.toLowerCase())}(t))return console.warn('Refused to set unsafe header \"'+t+'\"'),!1;if(g)throw\"INVALID_STATE_ERR: send flag is true\";return l[t]=e,!0},this.getResponseHeader=function(t){return\"string\"==typeof t&&this.readyState>this.OPENED&&s.headers[t.toLowerCase()]&&!m?s.headers[t.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||m)return\"\";var t=\"\";for(var e in s.headers)\"set-cookie\"!==e&&\"set-cookie2\"!==e&&(t+=e+\": \"+s.headers[e]+\"\\r\\n\");return t.substr(0,t.length-2)},this.getRequestHeader=function(t){return\"string\"==typeof t&&l[t]?l[t]:\"\"},this.send=function(r){if(this.readyState!=this.OPENED)throw\"INVALID_STATE_ERR: connection must be opened before send() is called\";if(g)throw\"INVALID_STATE_ERR: send has already been called\";var p,f=!1,d=!1,y=i.parse(h.url);switch(y.protocol){case\"https:\":f=!0;case\"http:\":p=y.hostname;break;case\"file:\":d=!0;break;case void 0:case\"\":p=\"localhost\";break;default:throw\"Protocol not supported.\"}if(d){if(\"GET\"!==h.method)throw\"XMLHttpRequest: Only GET method is supported\";if(h.async)n.readFile(y.pathname,\"utf8\",(function(t,e){t?a.handleError(t):(a.status=200,a.responseText=e,b(a.DONE))}));else try{this.responseText=n.readFileSync(y.pathname,\"utf8\"),this.status=200,b(a.DONE)}catch(t){this.handleError(t)}}else{var v=y.port||(f?443:80),w=y.pathname+(y.search?y.search:\"\");if(l.Host=p,f&&443===v||80===v||(l.Host+=\":\"+y.port),h.user){void 0===h.password&&(h.password=\"\");var _=new Buffer(h.user+\":\"+h.password);l.Authorization=\"Basic \"+_.toString(\"base64\")}\"GET\"===h.method||\"HEAD\"===h.method?r=null:r?(l[\"Content-Length\"]=Buffer.isBuffer(r)?r.length:Buffer.byteLength(r),l[\"Content-Type\"]||(l[\"Content-Type\"]=\"text/plain;charset=UTF-8\")):\"POST\"===h.method&&(l[\"Content-Length\"]=0);var S=t.agent||!1,E={host:p,port:v,path:w,method:h.method,headers:l,agent:S};if(f&&(E.pfx=t.pfx,E.key=t.key,E.passphrase=t.passphrase,E.cert=t.cert,E.ca=t.ca,E.ciphers=t.ciphers,E.rejectUnauthorized=t.rejectUnauthorized),m=!1,h.async){var x=f?u.request:c.request;g=!0,a.dispatchEvent(\"readystatechange\");var k=function(r){if(302===(s=r).statusCode||303===s.statusCode||307===s.statusCode){h.url=s.headers.location;var n=i.parse(h.url);p=n.hostname;var o={hostname:n.hostname,port:n.port,path:n.path,method:303===s.statusCode?\"GET\":h.method,headers:l};return f&&(o.pfx=t.pfx,o.key=t.key,o.passphrase=t.passphrase,o.cert=t.cert,o.ca=t.ca,o.ciphers=t.ciphers,o.rejectUnauthorized=t.rejectUnauthorized),void(e=x(o,k).on(\"error\",O)).end()}s&&s.setEncoding&&s.setEncoding(\"utf8\"),b(a.HEADERS_RECEIVED),a.status=s.statusCode,s.on(\"data\",(function(t){t&&(a.responseText+=t),g&&b(a.LOADING)})),s.on(\"end\",(function(){g&&(g=!1,b(a.DONE))})),s.on(\"error\",(function(t){a.handleError(t)}))},O=function(t){a.handleError(t)};e=x(E,k).on(\"error\",O),r&&e.write(r),e.end(),a.dispatchEvent(\"loadstart\")}else{var C=\".node-xmlhttprequest-content-\"+process.pid,T=\".node-xmlhttprequest-sync-\"+process.pid;n.writeFileSync(T,\"\",\"utf8\");for(var B=\"var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http\"+(f?\"s\":\"\")+\".request;var options = \"+JSON.stringify(E)+\";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('\"+C+\"', 'NODE-XMLHTTPREQUEST-STATUS:' + response.statusCode + ',' + responseText, 'utf8');fs.unlinkSync('\"+T+\"');});response.on('error', function(error) {fs.writeFileSync('\"+C+\"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('\"+T+\"');});}).on('error', function(error) {fs.writeFileSync('\"+C+\"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('\"+T+\"');});\"+(r?\"req.write('\"+r.replace(/'/g,\"\\\\'\")+\"');\":\"\")+\"req.end();\",P=o(process.argv[0],[\"-e\",B]);n.existsSync(T););if(a.responseText=n.readFileSync(C,\"utf8\"),P.stdin.end(),n.unlinkSync(C),a.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var I=a.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,\"\");a.handleError(I)}else a.status=a.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,\"$1\"),a.responseText=a.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,\"$1\"),b(a.DONE)}}},this.handleError=function(t){this.status=503,this.statusText=t,this.responseText=t.stack,m=!0,b(this.DONE)},this.abort=function(){e&&(e.abort(),e=null),l=Object.assign({},f),this.responseText=\"\",this.responseXML=\"\",m=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!g||this.readyState===this.DONE||(g=!1,b(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(t,e){t in v||(v[t]=[]),v[t].push(e)},this.removeEventListener=function(t,e){t in v&&(v[t]=v[t].filter((function(t){return t!==e})))},this.dispatchEvent=function(t){if(\"function\"==typeof a[\"on\"+t]&&a[\"on\"+t](),t in v)for(var e=0,r=v[t].length;e<r;e++)v[t][e].call(a)};var b=function(t){a.readyState!==t&&(a.readyState=t,(h.async||a.readyState<a.OPENED||a.readyState===a.DONE)&&a.dispatchEvent(\"readystatechange\"),a.readyState!==a.DONE||m||(a.dispatchEvent(\"load\"),a.dispatchEvent(\"loadend\")))}}t.exports=s,s.XMLHttpRequest=s},function(t,e,r){var n=r(16),i=r(115);function o(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState=\"\",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.isReactNative=t.isReactNative,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}t.exports=o,i(o.prototype),o.prototype.onError=function(t,e){var r=new Error(t);return r.type=\"TransportError\",r.description=e,this.emit(\"error\",r),this},o.prototype.open=function(){return\"closed\"!==this.readyState&&\"\"!==this.readyState||(this.readyState=\"opening\",this.doOpen()),this},o.prototype.close=function(){return\"opening\"!==this.readyState&&\"open\"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(t){if(\"open\"!==this.readyState)throw new Error(\"Transport not open\");this.write(t)},o.prototype.onOpen=function(){this.readyState=\"open\",this.writable=!0,this.emit(\"open\")},o.prototype.onData=function(t){var e=n.decodePacket(t,this.socket.binaryType);this.onPacket(e)},o.prototype.onPacket=function(t){this.emit(\"packet\",t)},o.prototype.onClose=function(){this.readyState=\"closed\",this.emit(\"close\")}},function(t,e){\n/*! https://mths.be/utf8js v2.1.2 by @mathias */\nvar r,n,i,o=String.fromCharCode;function s(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function a(t,e){if(t>=55296&&t<=57343){if(e)throw Error(\"Lone surrogate U+\"+t.toString(16).toUpperCase()+\" is not a scalar value\");return!1}return!0}function c(t,e){return o(t>>e&63|128)}function u(t,e){if(0==(4294967168&t))return o(t);var r=\"\";return 0==(4294965248&t)?r=o(t>>6&31|192):0==(4294901760&t)?(a(t,e)||(t=65533),r=o(t>>12&15|224),r+=c(t,6)):0==(4292870144&t)&&(r=o(t>>18&7|240),r+=c(t,12),r+=c(t,6)),r+=o(63&t|128)}function h(){if(i>=n)throw Error(\"Invalid byte index\");var t=255&r[i];if(i++,128==(192&t))return 63&t;throw Error(\"Invalid continuation byte\")}function p(t){var e,o;if(i>n)throw Error(\"Invalid byte index\");if(i==n)return!1;if(e=255&r[i],i++,0==(128&e))return e;if(192==(224&e)){if((o=(31&e)<<6|h())>=128)return o;throw Error(\"Invalid continuation byte\")}if(224==(240&e)){if((o=(15&e)<<12|h()<<6|h())>=2048)return a(o,t)?o:65533;throw Error(\"Invalid continuation byte\")}if(240==(248&e)&&(o=(7&e)<<18|h()<<12|h()<<6|h())>=65536&&o<=1114111)return o;throw Error(\"Invalid UTF-8 detected\")}t.exports={version:\"2.1.2\",encode:function(t,e){for(var r=!1!==(e=e||{}).strict,n=s(t),i=n.length,o=-1,a=\"\";++o<i;)a+=u(n[o],r);return a},decode:function(t,e){var a=!1!==(e=e||{}).strict;r=s(t),n=r.length,i=0;for(var c,u=[];!1!==(c=p(a));)u.push(c);return function(t){for(var e,r=t.length,n=-1,i=\"\";++n<r;)(e=t[n])>65535&&(i+=o((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=o(e);return i}(u)}}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return\"[object Array]\"==r.call(t)}},function(t,e){function r(){}t.exports=function(t,e,n){var i=!1;return n=n||r,o.count=t,0===t?e():o;function o(t,r){if(o.count<=0)throw new Error(\"after called too many times\");--o.count,t?(i=!0,e(t),e=n):0!==o.count||i||e(null,r)}}},function(t,e){t.exports=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e}},function(t,e,r){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}t.exports=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[\"$\"+t]=this._callbacks[\"$\"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks[\"$\"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[\"$\"+t],this;for(var i=0;i<n.length;i++)if((r=n[i])===e||r.fn===e){n.splice(i,1);break}return 0===n.length&&delete this._callbacks[\"$\"+t],this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks[\"$\"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){n=0;for(var i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[\"$\"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){t.exports=require(\"tls\")},function(t,e,r){\"use strict\";function n(t,e){const r=Buffer.allocUnsafe(e);for(var n=0,i=0;i<t.length;i++){const e=t[i];e.copy(r,n),n+=e.length}return r}function i(t,e,r,n,i){for(var o=0;o<i;o++)r[n+o]=t[o]^e[3&o]}function o(t,e){const r=t.length;for(var n=0;n<r;n++)t[n]^=e[3&n]}try{const e=r(!function(){var t=new Error(\"Cannot find module 'bufferutil'\");throw t.code=\"MODULE_NOT_FOUND\",t}()),s=e.BufferUtil||e;t.exports={mask(t,e,r,n,o){o<48?i(t,e,r,n,o):s.mask(t,e,r,n,o)},unmask(t,e){t.length<32?o(t,e):s.unmask(t,e)},concat:n}}catch(e){t.exports={concat:n,mask:i,unmask:o}}},,,,,,function(t,e,r){var n=r(9),i=r(22),o=\"\".split;t.exports=n((function(){return!Object(\"z\").propertyIsEnumerable(0)}))?function(t){return\"String\"==i(t)?o.call(t,\"\"):Object(t)}:Object},function(t,e,r){var n=r(19),i=r(9),o=r(86);t.exports=!n&&!i((function(){return 7!=Object.defineProperty(o(\"div\"),\"a\",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(6),i=r(87),o=n[\"__core-js_shared__\"]||i(\"__core-js_shared__\",{});t.exports=o},function(t,e,r){var n=r(38),i=r(125);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})(\"versions\",[]).push({version:\"3.6.5\",mode:n?\"pure\":\"global\",copyright:\"© 2020 Denis Pushkarev (zloirock.ru)\"})},function(t,e){var r=0,n=Math.random();t.exports=function(t){return\"Symbol(\"+String(void 0===t?\"\":t)+\")_\"+(++r+n).toString(36)}},function(t,e,r){var n=r(13),i=r(129),o=r(35),s=r(23);t.exports=function(t,e){for(var r=i(e),a=s.f,c=o.f,u=0;u<r.length;u++){var h=r[u];n(t,h)||a(t,h,c(e,h))}}},function(t,e,r){var n=r(39),i=r(216),o=r(217),s=r(14);t.exports=n(\"Reflect\",\"ownKeys\")||function(t){var e=i.f(s(t)),r=o.f;return r?e.concat(r(t)):e}},function(t,e,r){var n=r(13),i=r(29),o=r(131).indexOf,s=r(91);t.exports=function(t,e){var r,a=i(t),c=0,u=[];for(r in a)!n(s,r)&&n(a,r)&&u.push(r);for(;e.length>c;)n(a,r=e[c++])&&(~o(u,r)||u.push(r));return u}},function(t,e,r){var n=r(29),i=r(27),o=r(132),s=function(t){return function(e,r,s){var a,c=n(e),u=i(c.length),h=o(s,u);if(t&&r!=r){for(;u>h;)if((a=c[h++])!=a)return!0}else for(;u>h;h++)if((t||h in c)&&c[h]===r)return t||h||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},function(t,e,r){var n=r(92),i=Math.max,o=Math.min;t.exports=function(t,e){var r=n(t);return r<0?i(r+e,0):o(r,e)}},function(t,e,r){var n=r(9),i=/#|\\.prototype\\./,o=function(t,e){var r=a[s(t)];return r==u||r!=c&&(\"function\"==typeof e?n(e):!!e)},s=o.normalize=function(t){return String(t).replace(i,\".\").toLowerCase()},a=o.data={},c=o.NATIVE=\"N\",u=o.POLYFILL=\"P\";t.exports=o},function(t,e,r){var n=r(9);t.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},function(t,e,r){var n=r(14),i=r(57),o=r(4)(\"species\");t.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||null==(r=n(s)[o])?e:i(r)}},function(t,e,r){var n,i,o,s=r(6),a=r(9),c=r(22),u=r(95),h=r(137),p=r(86),f=r(138),l=s.location,d=s.setImmediate,y=s.clearImmediate,g=s.process,m=s.MessageChannel,v=s.Dispatch,b=0,w={},_=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}},S=function(t){return function(){_(t)}},E=function(t){_(t.data)},x=function(t){s.postMessage(t+\"\",l.protocol+\"//\"+l.host)};d&&y||(d=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return w[++b]=function(){(\"function\"==typeof t?t:Function(t)).apply(void 0,e)},n(b),b},y=function(t){delete w[t]},\"process\"==c(g)?n=function(t){g.nextTick(S(t))}:v&&v.now?n=function(t){v.now(S(t))}:m&&!f?(o=(i=new m).port2,i.port1.onmessage=E,n=u(o.postMessage,o,1)):!s.addEventListener||\"function\"!=typeof postMessage||s.importScripts||a(x)||\"file:\"===l.protocol?n=\"onreadystatechange\"in p(\"script\")?function(t){h.appendChild(p(\"script\")).onreadystatechange=function(){h.removeChild(this),_(t)}}:function(t){setTimeout(S(t),0)}:(n=x,s.addEventListener(\"message\",E,!1))),t.exports={set:d,clear:y}},function(t,e,r){var n=r(39);t.exports=n(\"document\",\"documentElement\")},function(t,e,r){var n=r(139);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},function(t,e,r){var n=r(39);t.exports=n(\"navigator\",\"userAgent\")||\"\"},function(t,e,r){\"use strict\";var n=r(57),i=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError(\"Bad Promise constructor\");e=t,r=n})),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new i(t)}},function(t,e,r){\"use strict\";var n=r(12),i=r(131).indexOf,o=r(234),s=r(60),a=[].indexOf,c=!!a&&1/[1].indexOf(1,-0)<0,u=o(\"indexOf\"),h=s(\"indexOf\",{ACCESSORS:!0,1:0});n({target:\"Array\",proto:!0,forced:c||!u||!h},{indexOf:function(t){return c?a.apply(this,arguments)||0:i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){\"use strict\";var n=r(12),i=r(10),o=r(101),s=r(132),a=r(27),c=r(29),u=r(102),h=r(4),p=r(61),f=r(60),l=p(\"slice\"),d=f(\"slice\",{ACCESSORS:!0,0:0,1:2}),y=h(\"species\"),g=[].slice,m=Math.max;n({target:\"Array\",proto:!0,forced:!l||!d},{slice:function(t,e){var r,n,h,p=c(this),f=a(p.length),l=s(t,f),d=s(void 0===e?f:e,f);if(o(p)&&(\"function\"!=typeof(r=p.constructor)||r!==Array&&!o(r.prototype)?i(r)&&null===(r=r[y])&&(r=void 0):r=void 0,r===Array||void 0===r))return g.call(p,l,d);for(n=new(void 0===r?Array:r)(m(d-l,0)),h=0;l<d;l++,h++)l in p&&u(n,h,p[l]);return n.length=h,n}})},function(t,e,r){var n=r(10),i=r(22),o=r(4)(\"match\");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:\"RegExp\"==i(t))}},function(t,e,r){var n=r(43),i=r(30);t.exports=function(t,e){var r=i.pkcs1.makeScheme(t,e);return{encrypt:function(e,i){var o,s;return i?(o=new n(r.encPad(e,{type:1})),s=t.$doPrivate(o)):(o=new n(t.encryptionScheme.encPad(e)),s=t.$doPublic(o)),s.toBuffer(t.encryptedDataLength)},decrypt:function(e,i){var o,s=new n(e);return i?(o=t.$doPublic(s),r.encUnPad(o.toBuffer(t.encryptedDataLength),{type:1})):(o=t.$doPrivate(s),t.encryptionScheme.encUnPad(o.toBuffer(t.encryptedDataLength)))}}}},function(t,e){t.exports=require(\"assert\")},function(t,e,r){var n=r(95),i=r(123),o=r(106),s=r(27),a=r(147),c=[].push,u=function(t){var e=1==t,r=2==t,u=3==t,h=4==t,p=6==t,f=5==t||p;return function(l,d,y,g){for(var m,v,b=o(l),w=i(b),_=n(d,y,3),S=s(w.length),E=0,x=g||a,k=e?x(l,S):r?x(l,0):void 0;S>E;E++)if((f||E in w)&&(v=_(m=w[E],E,b),t))if(e)k[E]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return E;case 2:c.call(k,m)}else if(h)return!1;return p?-1:u||h?h:k}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},function(t,e,r){var n=r(10),i=r(101),o=r(4)(\"species\");t.exports=function(t,e){var r;return i(t)&&(\"function\"!=typeof(r=t.constructor)||r!==Array&&!i(r.prototype)?n(r)&&null===(r=r[o])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)}},function(t,e,r){\"use strict\";var n=r(29),i=r(261),o=r(40),s=r(89),a=r(264),c=s.set,u=s.getterFor(\"Array Iterator\");t.exports=a(Array,\"Array\",(function(t,e){c(this,{type:\"Array Iterator\",target:n(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):\"keys\"==r?{value:n,done:!1}:\"values\"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),\"values\"),o.Arguments=o.Array,i(\"keys\"),i(\"values\"),i(\"entries\")},function(t,e,r){var n,i=r(14),o=r(262),s=r(93),a=r(91),c=r(137),u=r(86),h=r(90),p=h(\"IE_PROTO\"),f=function(){},l=function(t){return\"<script>\"+t+\"<\\/script>\"},d=function(){try{n=document.domain&&new ActiveXObject(\"htmlfile\")}catch(t){}var t,e;d=n?function(t){t.write(l(\"\")),t.close();var e=t.parentWindow.Object;return t=null,e}(n):((e=u(\"iframe\")).style.display=\"none\",c.appendChild(e),e.src=String(\"javascript:\"),(t=e.contentWindow.document).open(),t.write(l(\"document.F=Object\")),t.close(),t.F);for(var r=s.length;r--;)delete d.prototype[s[r]];return d()};a[p]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(f.prototype=i(t),r=new f,f.prototype=null,r[p]=t):r=d(),void 0===e?r:o(r,e)}},function(t,e,r){\"use strict\";var n,i,o,s=r(151),a=r(26),c=r(13),u=r(4),h=r(38),p=u(\"iterator\"),f=!1;[].keys&&(\"next\"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(n=i):f=!0),null==n&&(n={}),h||c(n,p)||a(n,p,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},function(t,e,r){var n=r(13),i=r(106),o=r(90),s=r(266),a=o(\"IE_PROTO\"),c=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=i(t),n(t,a)?t[a]:\"function\"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},function(t,e,r){\"use strict\";r(25),t.exports={delayMillis:function(t){return new Promise(e=>{setTimeout(e.bind(e,!0),t)})}}},function(t,e,r){\"use strict\";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(44),r(45);const o=r(1),s=r(2),a=r(5),c=r(0)(\"ps4:waker\"),u=r(84),h=r(275),p=r(42),f=r(107),l=r(276),d=[\"client-type\",\"auth-type\",\"user-credential\"];function y(t,e){this.credentials=t,this.config=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(r,!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({autoLogin:!0,errorIfAwake:!0,keepSocket:!1,debug:!1},e),this.ui=e.ui||l.createForUI()}o.inherits(y,s.EventEmitter),y.prototype.wake=function(t,e,r){if(\"number\"==typeof t||\"function\"==typeof r||\"object\"==typeof t&&e&&(e[\"host-name\"]||\"function\"==typeof e)||(r=e,e=t,t=void 0),\"function\"==typeof e&&(r=e,e=void 0),!r)throw new Error(\"callback parameter is required\");e?this._doWake(e,t,r):u.findAny(t,(n,i,o)=>{n?r(n):(i.address=o.address,i.port=e[\"host-request-port\"],this._doWake(i,t,r))})},y.prototype._doWake=function(t,e,r){this.readCredentials((n,i)=>{n&&this.listeners(\"need-credentials\")?this.emit(\"need-credentials\",t):n?this.requestCredentials(this._doWake.bind(this,t,e,r)):t.status&&\"Standby\"!==t.status&&this.config.errorIfAwake?r(new Error(`${t[\"host-name\"]} is already awake! (${t.status})`)):this.sendWake(t,e,i,r)})},y.prototype.readCredentials=function(t){null!==this.credentials&&\"object\"==typeof this.credentials?t(null,this.credentials):a.readFile(this.credentials,(e,r)=>e?t(e):t(null,JSON.parse(r.toString())))},y.prototype.requestCredentials=function(t){const e=new h;e.setStandby(),e.once(\"wakeup\",r=>{const n=d.reduce((t,e)=>(t[e]=r[e],t),{});\"object\"==typeof this.credentials?t(null,n):a.writeFile(this.credentials,JSON.stringify(n),e=>e?t(e):t(null,n)),e.close()}),e.once(\"error\",e=>{t(e)}),e.once(\"ready\",()=>{this.ui.logEvent('\"PS4-Waker\" device should now be available...'),this.ui.options[\"user-id\"]&&process.setuid&&(process.setuid(this.ui.options[\"user-id\"]),this.ui.logEvent(\"Relinquished root privileges\"))}),e.listen()},y.prototype.sendWake=function(t,e,r,n){if(e&&\"number\"!=typeof e){if(e&&\"object\"!=typeof e)throw new Error(\"Illegal value for detectOpts: \"+e)}else e={timeout:e};e.timeout=Math.max(e.timeout,3e4),t.port=p.DDP_PORT,this.udp=p.udpSocket(),this.udp.bind(void 0,e.bindAddress,()=>{this.udp.setBroadcast(!0),c(\"sending WAKEUP to\",t),this.udp.discover(\"WAKEUP\",r,t),this._whenAwake(t,e,()=>{this._login(t,r,e,n)})})},y.prototype._whenAwake=function(t,e,r){this.emit(\"device-notified\",t);const n=(new Date).getTime(),i=(o,s)=>{if((s=s||{}).statusLine===p.STATUS_AWAKE)this.udp.close(),r(null);else{const o=(new Date).getTime()-n,s=e.timeout-o-1e3;s>0?(e.timeout=s,setTimeout(()=>{u.find(t.address,e,i)},1e3)):(this.udp.close(),r(new Error(\"Device didn't wake in time\")))}};i(null)},y.prototype._login=function(t,e,r,n,i){if(i||!this.config.autoLogin)return void n();this.emit(\"logging-in\",t);const o=f({accountId:e[\"user-credential\"],host:t.address,passCode:r.passCode||\"\",pinCode:\"\"});o.retries=0,o.once(\"login_result\",t=>{this.config.keepSocket?n(null,o):(o.close(),n(null)),0!==t.result&&this.emit(\"login_result\",t)}).on(\"error\",e=>{if(o.retries+=1,o.retries<5&&\"ECONNREFUSED\"===e.code)return this.ui.logEvent(\"Login connect refused; retrying soon\"),void setTimeout(()=>{o.connect(t.address)},1e3);this.ui.logError(\"Error logging in:\",e),n(null)})},t.exports=y},function(t,e){t.exports=require(\"child_process\")},function(t,e){var r=/^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/,n=[\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"];t.exports=function(t){var e=t,i=t.indexOf(\"[\"),o=t.indexOf(\"]\");-1!=i&&-1!=o&&(t=t.substring(0,i)+t.substring(i,o).replace(/:/g,\";\")+t.substring(o,t.length));for(var s=r.exec(t||\"\"),a={},c=14;c--;)a[n[c]]=s[c]||\"\";return-1!=i&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,\":\"),a.authority=a.authority.replace(\"[\",\"\").replace(\"]\",\"\").replace(/;/g,\":\"),a.ipv6uri=!0),a}},function(t,e,r){function n(t){var r;function n(){if(n.enabled){var t=n,i=+new Date,o=i-(r||i);t.diff=o,t.prev=r,t.curr=i,r=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),\"string\"!=typeof s[0]&&s.unshift(\"%O\");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(r,n){if(\"%%\"===r)return r;c++;var i=e.formatters[n];if(\"function\"==typeof i){var o=s[c];r=i.call(t,o),s.splice(c,1),c--}return r})),e.formatArgs.call(t,s);var u=n.log||e.log||console.log.bind(console);u.apply(t,s)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var r,n=0;for(r in t)n=(n<<5)-n+t.charCodeAt(r),n|=0;return e.colors[Math.abs(n)%e.colors.length]}(t),n.destroy=i,\"function\"==typeof e.init&&e.init(n),e.instances.push(n),n}function i(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable(\"\")},e.enable=function(t){var r;e.save(t),e.names=[],e.skips=[];var n=(\"string\"==typeof t?t:\"\").split(/[\\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&(\"-\"===(t=n[r].replace(/\\*/g,\".*?\"))[0]?e.skips.push(new RegExp(\"^\"+t.substr(1)+\"$\")):e.names.push(new RegExp(\"^\"+t+\"$\")));for(r=0;r<e.instances.length;r++){var o=e.instances[r];o.enabled=e.enabled(o.namespace)}},e.enabled=function(t){if(\"*\"===t[t.length-1])return!0;var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(31),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return\"[object Array]\"==r.call(t)}},function(t,e){t.exports=function(t){return r&&Buffer.isBuffer(t)||n&&(t instanceof ArrayBuffer||function(t){return\"function\"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))};var r=\"function\"==typeof Buffer&&\"function\"==typeof Buffer.isBuffer,n=\"function\"==typeof ArrayBuffer},function(t,e,r){var n=r(285),i=r(170),o=r(46),s=r(108),a=r(171),c=r(172),u=r(0)(\"socket.io-client:manager\"),h=r(169),p=r(295),f=Object.prototype.hasOwnProperty;function l(t,e){if(!(this instanceof l))return new l(t,e);t&&\"object\"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||\"/socket.io\",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new p({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState=\"closed\",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=e.parser||s;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}t.exports=l,l.prototype.emitAll=function(){for(var t in this.emit.apply(this,arguments),this.nsps)f.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},l.prototype.updateSocketIds=function(){for(var t in this.nsps)f.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},l.prototype.generateId=function(t){return(\"/\"===t?\"\":t+\"#\")+this.engine.id},o(l.prototype),l.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},l.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},l.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},l.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},l.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},l.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},l.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},l.prototype.open=l.prototype.connect=function(t,e){if(u(\"readyState %s\",this.readyState),~this.readyState.indexOf(\"open\"))return this;u(\"opening %s\",this.uri),this.engine=n(this.uri,this.opts);var r=this.engine,i=this;this.readyState=\"opening\",this.skipReconnect=!1;var o=a(r,\"open\",(function(){i.onopen(),t&&t()})),s=a(r,\"error\",(function(e){if(u(\"connect_error\"),i.cleanup(),i.readyState=\"closed\",i.emitAll(\"connect_error\",e),t){var r=new Error(\"Connection error\");r.data=e,t(r)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;u(\"connect attempt will timeout after %d\",c);var h=setTimeout((function(){u(\"connect attempt timed out after %d\",c),o.destroy(),r.close(),r.emit(\"error\",\"timeout\"),i.emitAll(\"connect_timeout\",c)}),c);this.subs.push({destroy:function(){clearTimeout(h)}})}return this.subs.push(o),this.subs.push(s),this},l.prototype.onopen=function(){u(\"open\"),this.cleanup(),this.readyState=\"open\",this.emit(\"open\");var t=this.engine;this.subs.push(a(t,\"data\",c(this,\"ondata\"))),this.subs.push(a(t,\"ping\",c(this,\"onping\"))),this.subs.push(a(t,\"pong\",c(this,\"onpong\"))),this.subs.push(a(t,\"error\",c(this,\"onerror\"))),this.subs.push(a(t,\"close\",c(this,\"onclose\"))),this.subs.push(a(this.decoder,\"decoded\",c(this,\"ondecoded\")))},l.prototype.onping=function(){this.lastPing=new Date,this.emitAll(\"ping\")},l.prototype.onpong=function(){this.emitAll(\"pong\",new Date-this.lastPing)},l.prototype.ondata=function(t){this.decoder.add(t)},l.prototype.ondecoded=function(t){this.emit(\"packet\",t)},l.prototype.onerror=function(t){u(\"error\",t),this.emitAll(\"error\",t)},l.prototype.socket=function(t,e){var r=this.nsps[t];if(!r){r=new i(this,t,e),this.nsps[t]=r;var n=this;r.on(\"connecting\",o),r.on(\"connect\",(function(){r.id=n.generateId(t)})),this.autoConnect&&o()}function o(){~h(n.connecting,r)||n.connecting.push(r)}return r},l.prototype.destroy=function(t){var e=h(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},l.prototype.packet=function(t){u(\"writing packet %j\",t);var e=this;t.query&&0===t.type&&(t.nsp+=\"?\"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,(function(r){for(var n=0;n<r.length;n++)e.engine.write(r[n],t.options);e.encoding=!1,e.processPacketQueue()})))},l.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},l.prototype.cleanup=function(){u(\"cleanup\");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},l.prototype.close=l.prototype.disconnect=function(){u(\"disconnect\"),this.skipReconnect=!0,this.reconnecting=!1,\"opening\"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState=\"closed\",this.engine&&this.engine.close()},l.prototype.onclose=function(t){u(\"onclose\"),this.cleanup(),this.backoff.reset(),this.readyState=\"closed\",this.emit(\"close\",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},l.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)u(\"reconnect failed\"),this.backoff.reset(),this.emitAll(\"reconnect_failed\"),this.reconnecting=!1;else{var e=this.backoff.duration();u(\"will wait %dms before reconnect attempt\",e),this.reconnecting=!0;var r=setTimeout((function(){t.skipReconnect||(u(\"attempting reconnect\"),t.emitAll(\"reconnect_attempt\",t.backoff.attempts),t.emitAll(\"reconnecting\",t.backoff.attempts),t.skipReconnect||t.open((function(e){e?(u(\"reconnect attempt error\"),t.reconnecting=!1,t.reconnect(),t.emitAll(\"reconnect_error\",e.data)):(u(\"reconnect success\"),t.onreconnect())})))}),e);this.subs.push({destroy:function(){clearTimeout(r)}})}},l.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll(\"reconnect\",t)}},function(t,e,r){var n=r(109),i=r(287),o=r(288),s=r(289);e.polling=function(t){var e=!1,r=!1,s=!1!==t.jsonp;if(\"undefined\"!=typeof location){var a=\"https:\"===location.protocol,c=location.port;c||(c=a?443:80),e=t.hostname!==location.hostname||c!==t.port,r=t.secure!==a}if(t.xdomain=e,t.xscheme=r,\"open\"in new n(t)&&!t.forceJSONP)return new i(t);if(!s)throw new Error(\"JSONP disabled\");return new o(t)},e.websocket=s},function(t,e,r){var n=r(110),i=r(65),o=r(16),s=r(66),a=r(162),c=r(0)(\"engine.io-client:polling\");t.exports=h;var u=null!=new(r(109))({xdomain:!1}).responseType;function h(t){var e=t&&t.forceBase64;u&&!e||(this.supportsBinary=!1),n.call(this,t)}s(h,n),h.prototype.name=\"polling\",h.prototype.doOpen=function(){this.poll()},h.prototype.pause=function(t){var e=this;function r(){c(\"paused\"),e.readyState=\"paused\",t()}if(this.readyState=\"pausing\",this.polling||!this.writable){var n=0;this.polling&&(c(\"we are currently polling - waiting to pause\"),n++,this.once(\"pollComplete\",(function(){c(\"pre-pause polling complete\"),--n||r()}))),this.writable||(c(\"we are currently writing - waiting to pause\"),n++,this.once(\"drain\",(function(){c(\"pre-pause writing complete\"),--n||r()})))}else r()},h.prototype.poll=function(){c(\"polling\"),this.polling=!0,this.doPoll(),this.emit(\"poll\")},h.prototype.onData=function(t){var e=this;c(\"polling got data %s\",t);o.decodePayload(t,this.socket.binaryType,(function(t,r,n){if(\"opening\"===e.readyState&&e.onOpen(),\"close\"===t.type)return e.onClose(),!1;e.onPacket(t)})),\"closed\"!==this.readyState&&(this.polling=!1,this.emit(\"pollComplete\"),\"open\"===this.readyState?this.poll():c('ignoring poll - transport state \"%s\"',this.readyState))},h.prototype.doClose=function(){var t=this;function e(){c(\"writing close packet\"),t.write([{type:\"close\"}])}\"open\"===this.readyState?(c(\"transport open - closing\"),e()):(c(\"transport not open - deferring close\"),this.once(\"open\",e))},h.prototype.write=function(t){var e=this;this.writable=!1;var r=function(){e.writable=!0,e.emit(\"drain\")};o.encodePayload(t,this.supportsBinary,(function(t){e.doWrite(t,r)}))},h.prototype.uri=function(){var t=this.query||{},e=this.secure?\"https\":\"http\",r=\"\";return!1!==this.timestampRequests&&(t[this.timestampParam]=a()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&(\"https\"===e&&443!==Number(this.port)||\"http\"===e&&80!==Number(this.port))&&(r=\":\"+this.port),t.length&&(t=\"?\"+t),e+\"://\"+(-1!==this.hostname.indexOf(\":\")?\"[\"+this.hostname+\"]\":this.hostname)+r+this.path+t}},function(t,e,r){\"use strict\";var n,i=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_\".split(\"\"),o={},s=0,a=0;function c(t){var e=\"\";do{e=i[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function u(){var t=c(+new Date);return t!==n?(s=0,n=t):t+\".\"+c(s++)}for(;a<64;a++)o[i[a]]=a;u.encode=c,u.decode=function(t){var e=0;for(a=0;a<t.length;a++)e=64*e+o[t.charAt(a)];return e},t.exports=u},function(t,e){t.exports=global},function(t,e,r){\"use strict\";const n=r(2),i=r(3),o=r(64),s=r(8),a=r(17),c=r(116),u=r(15),h=r(67),p=r(292),f=r(165),l=r(48),d=r(166),y=r(168),g=[\"CONNECTING\",\"OPEN\",\"CLOSING\",\"CLOSED\"],m=l.kWebSocket,v=[8,13];class b extends n{constructor(t,e,r){super(),this.readyState=b.CONNECTING,this.protocol=\"\",this._binaryType=l.BINARY_TYPES[0],this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=\"\",this._closeTimer=null,this._closeCode=1006,this._extensions={},this._isServer=!0,this._receiver=null,this._sender=null,this._socket=null,null!==t&&(Array.isArray(e)?e=e.join(\", \"):\"object\"==typeof e&&null!==e&&(r=e,e=void 0),w.call(this,t,e,r))}get CONNECTING(){return b.CONNECTING}get CLOSING(){return b.CLOSING}get CLOSED(){return b.CLOSED}get OPEN(){return b.OPEN}get binaryType(){return this._binaryType}set binaryType(t){l.BINARY_TYPES.includes(t)&&(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?(this._socket.bufferSize||0)+this._sender._bufferedBytes:0}get extensions(){return Object.keys(this._extensions).join()}setSocket(t,e,r){const n=new d(this._binaryType,this._extensions,r);this._sender=new y(t,this._extensions),this._receiver=n,this._socket=t,n[m]=this,t[m]=this,n.on(\"conclude\",x),n.on(\"drain\",k),n.on(\"error\",O),n.on(\"message\",T),n.on(\"ping\",B),n.on(\"pong\",P),t.setTimeout(0),t.setNoDelay(),e.length>0&&t.unshift(e),t.on(\"close\",I),t.on(\"data\",A),t.on(\"end\",D),t.on(\"error\",N),this.readyState=b.OPEN,this.emit(\"open\")}emitClose(){this.readyState=b.CLOSED,this._socket?(this._extensions[h.extensionName]&&this._extensions[h.extensionName].cleanup(),this._receiver.removeAllListeners(),this.emit(\"close\",this._closeCode,this._closeMessage)):this.emit(\"close\",this._closeCode,this._closeMessage)}close(t,e){if(this.readyState!==b.CLOSED){if(this.readyState===b.CONNECTING){const t=\"WebSocket was closed before the connection was established\";return E(this,this._req,t)}this.readyState!==b.CLOSING?(this.readyState=b.CLOSING,this._sender.close(t,e,!this._isServer,t=>{t||(this._closeFrameSent=!0,this._socket.writable&&(this._closeFrameReceived&&this._socket.end(),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)))})):this._closeFrameSent&&this._closeFrameReceived&&this._socket.end()}}ping(t,e,r){if(\"function\"==typeof t?(r=t,t=e=void 0):\"function\"==typeof e&&(r=e,e=void 0),this.readyState!==b.OPEN){const t=new Error(`WebSocket is not open: readyState ${this.readyState} (${g[this.readyState]})`);if(r)return r(t);throw t}\"number\"==typeof t&&(t=t.toString()),void 0===e&&(e=!this._isServer),this._sender.ping(t||l.EMPTY_BUFFER,e,r)}pong(t,e,r){if(\"function\"==typeof t?(r=t,t=e=void 0):\"function\"==typeof e&&(r=e,e=void 0),this.readyState!==b.OPEN){const t=new Error(`WebSocket is not open: readyState ${this.readyState} (${g[this.readyState]})`);if(r)return r(t);throw t}\"number\"==typeof t&&(t=t.toString()),void 0===e&&(e=!this._isServer),this._sender.pong(t||l.EMPTY_BUFFER,e,r)}send(t,e,r){if(\"function\"==typeof e&&(r=e,e={}),this.readyState!==b.OPEN){const t=new Error(`WebSocket is not open: readyState ${this.readyState} (${g[this.readyState]})`);if(r)return r(t);throw t}\"number\"==typeof t&&(t=t.toString());const n=Object.assign({binary:\"string\"!=typeof t,mask:!this._isServer,compress:!0,fin:!0},e);this._extensions[h.extensionName]||(n.compress=!1),this._sender.send(t||l.EMPTY_BUFFER,n,r)}terminate(){if(this.readyState!==b.CLOSED){if(this.readyState===b.CONNECTING){const t=\"WebSocket was closed before the connection was established\";return E(this,this._req,t)}this._socket&&(this.readyState=b.CLOSING,this._socket.destroy())}}}function w(t,e,r){if(r=Object.assign({protocolVersion:v[1],perMessageDeflate:!0,maxPayload:104857600},r,{createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:void 0,auth:void 0,host:void 0,path:void 0,port:void 0}),!v.includes(r.protocolVersion))throw new RangeError(`Unsupported protocol version: ${r.protocolVersion} (supported versions: ${v.join(\", \")})`);var n;this._isServer=!1,\"object\"==typeof t&&void 0!==t.href?(n=t,this.url=t.href):(n=u.URL?new u.URL(t):u.parse(t),this.url=t);const a=\"ws+unix:\"===n.protocol;if(!(n.host||a&&n.pathname))throw new Error(\"Invalid URL: \"+this.url);const c=\"wss:\"===n.protocol||\"https:\"===n.protocol,p=c?443:80,d=i.randomBytes(16).toString(\"base64\"),y=c?o:s,g=n.search?`${n.pathname||\"/\"}${n.search}`:n.pathname||\"/\";var m;if(r.createConnection=c?S:_,r.defaultPort=r.defaultPort||p,r.port=n.port||p,r.host=n.hostname.startsWith(\"[\")?n.hostname.slice(1,-1):n.hostname,r.headers=Object.assign({\"Sec-WebSocket-Version\":r.protocolVersion,\"Sec-WebSocket-Key\":d,Connection:\"Upgrade\",Upgrade:\"websocket\"},r.headers),r.path=g,r.timeout=r.handshakeTimeout,r.perMessageDeflate&&(m=new h(!0!==r.perMessageDeflate?r.perMessageDeflate:{},!1,r.maxPayload),r.headers[\"Sec-WebSocket-Extensions\"]=f.format({[h.extensionName]:m.offer()})),e&&(r.headers[\"Sec-WebSocket-Protocol\"]=e),r.origin&&(r.protocolVersion<13?r.headers[\"Sec-WebSocket-Origin\"]=r.origin:r.headers.Origin=r.origin),n.auth?r.auth=n.auth:(n.username||n.password)&&(r.auth=`${n.username}:${n.password}`),a){const t=g.split(\":\");r.socketPath=t[0],r.path=t[1]}var w=this._req=y.get(r);r.handshakeTimeout&&w.on(\"timeout\",()=>{E(this,w,\"Opening handshake has timed out\")}),w.on(\"error\",t=>{this._req.aborted||(w=this._req=null,this.readyState=b.CLOSING,this.emit(\"error\",t),this.emitClose())}),w.on(\"response\",t=>{this.emit(\"unexpected-response\",w,t)||E(this,w,\"Unexpected server response: \"+t.statusCode)}),w.on(\"upgrade\",(t,n,o)=>{if(this.emit(\"upgrade\",t),this.readyState!==b.CONNECTING)return;w=this._req=null;const s=i.createHash(\"sha1\").update(d+l.GUID,\"binary\").digest(\"base64\");if(t.headers[\"sec-websocket-accept\"]!==s)return void E(this,n,\"Invalid Sec-WebSocket-Accept header\");const a=t.headers[\"sec-websocket-protocol\"],c=(e||\"\").split(/, */);var u;if(!e&&a?u=\"Server sent a subprotocol but none was requested\":e&&!a?u=\"Server sent no subprotocol\":a&&!c.includes(a)&&(u=\"Server sent an invalid subprotocol\"),u)E(this,n,u);else{if(a&&(this.protocol=a),m)try{const e=f.parse(t.headers[\"sec-websocket-extensions\"]);e[h.extensionName]&&(m.accept(e[h.extensionName]),this._extensions[h.extensionName]=m)}catch(t){return void E(this,n,\"Invalid Sec-WebSocket-Extensions header\")}this.setSocket(n,o,r.maxPayload)}})}function _(t){return t.protocolVersion&&(t.path=t.socketPath),a.connect(t)}function S(t){return t.path=void 0,t.servername=t.servername||t.host,c.connect(t)}function E(t,e,r){t.readyState=b.CLOSING;const n=new Error(r);Error.captureStackTrace(n,E),e.setHeader?(e.abort(),e.once(\"abort\",t.emitClose.bind(t)),t.emit(\"error\",n)):(e.destroy(n),e.once(\"error\",t.emit.bind(t,\"error\")),e.once(\"close\",t.emitClose.bind(t)))}function x(t,e){const r=this[m];r._socket.removeListener(\"data\",A),r._socket.resume(),r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,1005===t?r.close():r.close(t,e)}function k(){this[m]._socket.resume()}function O(t){const e=this[m];e._socket.removeListener(\"data\",A),e.readyState=b.CLOSING,e._closeCode=t[l.kStatusCode],e.emit(\"error\",t),e._socket.destroy()}function C(){this[m].emitClose()}function T(t){this[m].emit(\"message\",t)}function B(t){const e=this[m];e.pong(t,!e._isServer,l.NOOP),e.emit(\"ping\",t)}function P(t){this[m].emit(\"pong\",t)}function I(){const t=this[m];this.removeListener(\"close\",I),this.removeListener(\"end\",D),t.readyState=b.CLOSING,t._socket.read(),t._receiver.end(),this.removeListener(\"data\",A),this[m]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on(\"error\",C),t._receiver.on(\"finish\",C))}function A(t){this[m]._receiver.write(t)||this.pause()}function D(){const t=this[m];t.readyState=b.CLOSING,t._receiver.end(),this.end()}function N(){const t=this[m];this.removeListener(\"error\",N),this.on(\"error\",l.NOOP),t&&(t.readyState=b.CLOSING,this.destroy())}g.forEach((t,e)=>{b[t]=e}),[\"open\",\"error\",\"close\",\"message\"].forEach(t=>{Object.defineProperty(b.prototype,\"on\"+t,{get(){const e=this.listeners(t);for(var r=0;r<e.length;r++)if(e[r]._listener)return e[r]._listener},set(e){const r=this.listeners(t);for(var n=0;n<r.length;n++)r[n]._listener&&this.removeListener(t,r[n]);this.addEventListener(t,e)}})}),b.prototype.addEventListener=p.addEventListener,b.prototype.removeEventListener=p.removeEventListener,t.exports=b},function(t,e,r){\"use strict\";const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function i(t,e,r){Object.prototype.hasOwnProperty.call(t,e)?t[e].push(r):t[e]=[r]}t.exports={format:function(t){return Object.keys(t).map(e=>{var r=t[e];return Array.isArray(r)||(r=[r]),r.map(t=>[e].concat(Object.keys(t).map(e=>{var r=t[e];return Array.isArray(r)||(r=[r]),r.map(t=>!0===t?e:`${e}=${t}`).join(\"; \")})).join(\"; \")).join(\", \")}).join(\", \")},parse:function(t){const e={};if(void 0===t||\"\"===t)return e;for(var r,o,s={},a=!1,c=!1,u=!1,h=-1,p=-1,f=0;f<t.length;f++){const d=t.charCodeAt(f);if(void 0===r)if(-1===p&&1===n[d])-1===h&&(h=f);else if(32===d||9===d)-1===p&&-1!==h&&(p=f);else{if(59!==d&&44!==d)throw new SyntaxError(\"Unexpected character at index \"+f);{if(-1===h)throw new SyntaxError(\"Unexpected character at index \"+f);-1===p&&(p=f);const n=t.slice(h,p);44===d?(i(e,n,s),s={}):r=n,h=p=-1}}else if(void 0===o)if(-1===p&&1===n[d])-1===h&&(h=f);else if(32===d||9===d)-1===p&&-1!==h&&(p=f);else if(59===d||44===d){if(-1===h)throw new SyntaxError(\"Unexpected character at index \"+f);-1===p&&(p=f),i(s,t.slice(h,p),!0),44===d&&(i(e,r,s),s={},r=void 0),h=p=-1}else{if(61!==d||-1===h||-1!==p)throw new SyntaxError(\"Unexpected character at index \"+f);o=t.slice(h,f),h=p=-1}else if(c){if(1!==n[d])throw new SyntaxError(\"Unexpected character at index \"+f);-1===h?h=f:a||(a=!0),c=!1}else if(u)if(1===n[d])-1===h&&(h=f);else if(34===d&&-1!==h)u=!1,p=f;else{if(92!==d)throw new SyntaxError(\"Unexpected character at index \"+f);c=!0}else if(34===d&&61===t.charCodeAt(f-1))u=!0;else if(-1===p&&1===n[d])-1===h&&(h=f);else if(-1===h||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(\"Unexpected character at index \"+f);if(-1===h)throw new SyntaxError(\"Unexpected character at index \"+f);-1===p&&(p=f);var l=t.slice(h,p);a&&(l=l.replace(/\\\\/g,\"\"),a=!1),i(s,o,l),44===d&&(i(e,r,s),s={},r=void 0),o=void 0,h=p=-1}else-1===p&&(p=f)}if(-1===h||u)throw new SyntaxError(\"Unexpected end of input\");-1===p&&(p=f);const d=t.slice(h,p);return void 0===r?i(e,d,{}):(void 0===o?i(s,d,!0):i(s,o,a?d.replace(/\\\\/g,\"\"):d),i(e,r,s)),e}}},function(t,e,r){\"use strict\";const n=r(21),i=r(67),o=r(117),s=r(167),a=r(48);class c extends n.Writable{constructor(t,e,r){super(),this._binaryType=t||a.BINARY_TYPES[0],this[a.kWebSocket]=void 0,this._extensions=e||{},this._maxPayload=0|r,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(t,e,r){if(8===this._opcode&&0==this._state)return r();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(r)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){const e=this._buffers[0];return this._buffers[0]=e.slice(t),e.slice(0,t)}const e=Buffer.allocUnsafe(t);do{const r=this._buffers[0];t>=r.length?this._buffers.shift().copy(e,e.length-t):(r.copy(e,e.length-t,0,t),this._buffers[0]=r.slice(t)),t-=r.length}while(t>0);return e}startLoop(t){var e;this._loop=!0;do{switch(this._state){case 0:e=this.getInfo();break;case 1:e=this.getPayloadLength16();break;case 2:e=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:e=this.getData(t);break;default:return void(this._loop=!1)}}while(this._loop);t(e)}getInfo(){if(this._bufferedBytes<2)return void(this._loop=!1);const t=this.consume(2);if(0!=(48&t[0]))return this._loop=!1,u(RangeError,\"RSV2 and RSV3 must be clear\",!0,1002);const e=64==(64&t[0]);if(e&&!this._extensions[i.extensionName])return this._loop=!1,u(RangeError,\"RSV1 must be clear\",!0,1002);if(this._fin=128==(128&t[0]),this._opcode=15&t[0],this._payloadLength=127&t[1],0===this._opcode){if(e)return this._loop=!1,u(RangeError,\"RSV1 must be clear\",!0,1002);if(!this._fragmented)return this._loop=!1,u(RangeError,\"invalid opcode 0\",!0,1002);this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,u(RangeError,\"invalid opcode \"+this._opcode,!0,1002);this._compressed=e}else{if(!(this._opcode>7&&this._opcode<11))return this._loop=!1,u(RangeError,\"invalid opcode \"+this._opcode,!0,1002);if(!this._fin)return this._loop=!1,u(RangeError,\"FIN must be set\",!0,1002);if(e)return this._loop=!1,u(RangeError,\"RSV1 must be clear\",!0,1002);if(this._payloadLength>125)return this._loop=!1,u(RangeError,\"invalid payload length \"+this._payloadLength,!0,1002)}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=128==(128&t[1]),126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(!(this._bufferedBytes<2))return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength();this._loop=!1}getPayloadLength64(){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),e=t.readUInt32BE(0);return e>Math.pow(2,21)-1?(this._loop=!1,u(RangeError,\"Unsupported WebSocket frame: payload length > 2^53 - 1\",!1,1009)):(this._payloadLength=e*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,u(RangeError,\"Max payload size exceeded\",!1,1009);this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(t){var e=a.EMPTY_BUFFER;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);e=this.consume(this._payloadLength),this._masked&&o.unmask(e,this._mask)}return this._opcode>7?this.controlMessage(e):this._compressed?(this._state=5,void this.decompress(e,t)):(e.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(e)),this.dataMessage())}decompress(t,e){this._extensions[i.extensionName].decompress(t,this._fin,(t,r)=>{if(t)return e(t);if(r.length){if(this._messageLength+=r.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return e(u(RangeError,\"Max payload size exceeded\",!1,1009));this._fragments.push(r)}const n=this.dataMessage();if(n)return e(n);this.startLoop(e)})}dataMessage(){if(this._fin){const e=this._messageLength,r=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){var t;t=\"nodebuffer\"===this._binaryType?h(r,e):\"arraybuffer\"===this._binaryType?function(t){if(t.byteLength===t.buffer.byteLength)return t.buffer;return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}(h(r,e)):r,this.emit(\"message\",t)}else{const t=h(r,e);if(!s.isValidUTF8(t))return this._loop=!1,u(Error,\"invalid UTF-8 sequence\",!0,1007);this.emit(\"message\",t.toString())}}this._state=0}controlMessage(t){if(8===this._opcode)if(this._loop=!1,0===t.length)this.emit(\"conclude\",1005,\"\"),this.end();else{if(1===t.length)return u(RangeError,\"invalid payload length 1\",!0,1002);{const e=t.readUInt16BE(0);if(!s.isValidStatusCode(e))return u(RangeError,\"invalid status code \"+e,!0,1002);const r=t.slice(2);if(!s.isValidUTF8(r))return u(Error,\"invalid UTF-8 sequence\",!0,1007);this.emit(\"conclude\",e,r.toString()),this.end()}}else 9===this._opcode?this.emit(\"ping\",t):this.emit(\"pong\",t);this._state=0}}function u(t,e,r,n){const i=new t(r?\"Invalid WebSocket frame: \"+e:e);return Error.captureStackTrace(i,u),i[a.kStatusCode]=n,i}function h(t,e){return 1===t.length?t[0]:t.length>1?o.concat(t,e):a.EMPTY_BUFFER}t.exports=c},function(t,e,r){\"use strict\";try{const t=r(!function(){var t=new Error(\"Cannot find module 'utf-8-validate'\");throw t.code=\"MODULE_NOT_FOUND\",t}());e.isValidUTF8=\"object\"==typeof t?t.Validation.isValidUTF8:t}catch(t){e.isValidUTF8=()=>!0}e.isValidStatusCode=t=>t>=1e3&&t<=1013&&1004!==t&&1005!==t&&1006!==t||t>=3e3&&t<=4999},function(t,e,r){\"use strict\";const n=r(3),i=r(67),o=r(117),s=r(167),a=r(48);class c{constructor(t,e){this._extensions=e||{},this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(t,e){const r=t.length<1024||e.mask&&e.readOnly;var i=e.mask?6:2,s=t.length;t.length>=65536?(i+=8,s=127):t.length>125&&(i+=2,s=126);const a=Buffer.allocUnsafe(r?t.length+i:i);if(a[0]=e.fin?128|e.opcode:e.opcode,e.rsv1&&(a[0]|=64),126===s?a.writeUInt16BE(t.length,2):127===s&&(a.writeUInt32BE(0,2),a.writeUInt32BE(t.length,6)),!e.mask)return a[1]=s,r?(t.copy(a,i),[a]):[a,t];const c=n.randomBytes(4);return a[1]=128|s,a[i-4]=c[0],a[i-3]=c[1],a[i-2]=c[2],a[i-1]=c[3],r?(o.mask(t,c,a,i,t.length),[a]):(o.mask(t,c,t,0,t.length),[a,t])}close(t,e,r,n){var i;if(void 0===t)i=a.EMPTY_BUFFER;else{if(\"number\"!=typeof t||!s.isValidStatusCode(t))throw new TypeError(\"First argument must be a valid error code number\");void 0===e||\"\"===e?(i=Buffer.allocUnsafe(2)).writeUInt16BE(t,0):((i=Buffer.allocUnsafe(2+Buffer.byteLength(e))).writeUInt16BE(t,0),i.write(e,2))}this._deflating?this.enqueue([this.doClose,i,r,n]):this.doClose(i,r,n)}doClose(t,e,r){this.sendFrame(c.frame(t,{fin:!0,rsv1:!1,opcode:8,mask:e,readOnly:!1}),r)}ping(t,e,r){var n=!0;Buffer.isBuffer(t)||(t instanceof ArrayBuffer?t=Buffer.from(t):ArrayBuffer.isView(t)?t=u(t):(t=Buffer.from(t),n=!1)),this._deflating?this.enqueue([this.doPing,t,e,n,r]):this.doPing(t,e,n,r)}doPing(t,e,r,n){this.sendFrame(c.frame(t,{fin:!0,rsv1:!1,opcode:9,mask:e,readOnly:r}),n)}pong(t,e,r){var n=!0;Buffer.isBuffer(t)||(t instanceof ArrayBuffer?t=Buffer.from(t):ArrayBuffer.isView(t)?t=u(t):(t=Buffer.from(t),n=!1)),this._deflating?this.enqueue([this.doPong,t,e,n,r]):this.doPong(t,e,n,r)}doPong(t,e,r,n){this.sendFrame(c.frame(t,{fin:!0,rsv1:!1,opcode:10,mask:e,readOnly:r}),n)}send(t,e,r){var n=e.binary?2:1,o=e.compress,s=!0;Buffer.isBuffer(t)||(t instanceof ArrayBuffer?t=Buffer.from(t):ArrayBuffer.isView(t)?t=u(t):(t=Buffer.from(t),s=!1));const a=this._extensions[i.extensionName];if(this._firstFragment?(this._firstFragment=!1,o&&a&&(o=t.length>=a._threshold),this._compress=o):(o=!1,n=0),e.fin&&(this._firstFragment=!0),a){const i={fin:e.fin,rsv1:o,opcode:n,mask:e.mask,readOnly:s};this._deflating?this.enqueue([this.dispatch,t,this._compress,i,r]):this.dispatch(t,this._compress,i,r)}else this.sendFrame(c.frame(t,{fin:e.fin,rsv1:!1,opcode:n,mask:e.mask,readOnly:s}),r)}dispatch(t,e,r,n){if(!e)return void this.sendFrame(c.frame(t,r),n);const o=this._extensions[i.extensionName];this._deflating=!0,o.compress(t,r.fin,(t,e)=>{this._deflating=!1,r.readOnly=!1,this.sendFrame(c.frame(e,r),n),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){const t=this._queue.shift();this._bufferedBytes-=t[1].length,t[0].apply(this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[1].length,this._queue.push(t)}sendFrame(t,e){2===t.length?(this._socket.write(t[0]),this._socket.write(t[1],e)):this._socket.write(t[0],e)}}function u(t){const e=Buffer.from(t.buffer);return t.byteLength!==t.buffer.byteLength?e.slice(t.byteOffset,t.byteOffset+t.byteLength):e}t.exports=c},function(t,e){var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e,r){var n=r(108),i=r(46),o=r(294),s=r(171),a=r(172),c=r(0)(\"socket.io-client:socket\"),u=r(65),h=r(32);t.exports=l;var p={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=i.prototype.emit;function l(t,e,r){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}i(l.prototype),l.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[s(t,\"open\",a(this,\"onopen\")),s(t,\"packet\",a(this,\"onpacket\")),s(t,\"close\",a(this,\"onclose\"))]}},l.prototype.open=l.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.open(),\"open\"===this.io.readyState&&this.onopen(),this.emit(\"connecting\")),this},l.prototype.send=function(){var t=o(arguments);return t.unshift(\"message\"),this.emit.apply(this,t),this},l.prototype.emit=function(t){if(p.hasOwnProperty(t))return f.apply(this,arguments),this;var e=o(arguments),r={type:(void 0!==this.flags.binary?this.flags.binary:h(e))?n.BINARY_EVENT:n.EVENT,data:e,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,\"function\"==typeof e[e.length-1]&&(c(\"emitting packet with ack id %d\",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},l.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},l.prototype.onopen=function(){if(c(\"transport is open - connecting\"),\"/\"!==this.nsp)if(this.query){var t=\"object\"==typeof this.query?u.encode(this.query):this.query;c(\"sending connect packet with query %s\",t),this.packet({type:n.CONNECT,query:t})}else this.packet({type:n.CONNECT})},l.prototype.onclose=function(t){c(\"close (%s)\",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit(\"disconnect\",t)},l.prototype.onpacket=function(t){var e=t.nsp===this.nsp,r=t.type===n.ERROR&&\"/\"===t.nsp;if(e||r)switch(t.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(t);break;case n.ACK:case n.BINARY_ACK:this.onack(t);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit(\"error\",t.data)}},l.prototype.onevent=function(t){var e=t.data||[];c(\"emitting event %j\",e),null!=t.id&&(c(\"attaching ack callback to event\"),e.push(this.ack(t.id))),this.connected?f.apply(this,e):this.receiveBuffer.push(e)},l.prototype.ack=function(t){var e=this,r=!1;return function(){if(!r){r=!0;var i=o(arguments);c(\"sending ack %j\",i),e.packet({type:h(i)?n.BINARY_ACK:n.ACK,id:t,data:i})}}},l.prototype.onack=function(t){var e=this.acks[t.id];\"function\"==typeof e?(c(\"calling ack %s with %j\",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):c(\"bad ack %s\",t.id)},l.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit(\"connect\"),this.emitBuffered()},l.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)f.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},l.prototype.ondisconnect=function(){c(\"server disconnect (%s)\",this.nsp),this.destroy(),this.onclose(\"io server disconnect\")},l.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},l.prototype.close=l.prototype.disconnect=function(){return this.connected&&(c(\"performing disconnect (%s)\",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose(\"io client disconnect\"),this},l.prototype.compress=function(t){return this.flags.compress=t,this},l.prototype.binary=function(t){return this.flags.binary=t,this}},function(t,e){t.exports=function(t,e,r){return t.on(e,r),{destroy:function(){t.removeListener(e,r)}}}},function(t,e){var r=[].slice;t.exports=function(t,e){if(\"string\"==typeof e&&(e=t[e]),\"function\"!=typeof e)throw new Error(\"bind() requires a function\");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){r(80);const n=process.env.SOKET_PORT,i=process.env.URLPATH,o=process.env.DEVICE_PS4_ADRESS,s=process.env.DEVICE_PS4_PASSCODE,{Device:a}=r(212),c=r(279)(`${i}:${n}`),u=new a({adress:o,passCode:s});u.getDeviceStatus().then(t=>console.log(t)).catch(t=>console.error(t)),console.log({env:{URLPATH:i,SOKET_PORT:n,DEVICE_PS4_ADRESS:o,DEVICE_PS4_PASSCODE:s}});c.on(\"PS4_ACTION\",async t=>{const e=await(t=>{switch(t.action){case\"TURN_ON_PS4\":return u.turnOn().then(e=>(u.login(),{action:t.action,exec:!0})).catch(e=>({action:t.action,exec:!1}));case\"TURN_OFF_PS4\":return u.turnOff().then(e=>({action:t.action,exec:!0})).catch(t=>console.log(t));case\"OPEN_NETFLIX_PS4\":return u.startTitle(\"NPUA80960\"),{action:t.action,exec:!0};case\"OPEN_YOUTUBE_PS4\":return u.startTitle(\"CUSA01015\"),{action:t.action,exec:!0};default:return!1}})(t);console.log(e),c.emit(\"ACTION_RESPONSE\",e)})},function(t,e,r){var n=r(84),i=r(259),o=r(153),s=r(107);t.exports=o,t.exports.Detector=n,t.exports.Device=i,t.exports.Socket=s,t.exports.Waker=o},function(t,e,r){\"use strict\";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!n.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},function(t,e,r){var n=r(6),i=r(88),o=n.WeakMap;t.exports=\"function\"==typeof o&&/native code/.test(i(o))},function(t,e,r){var n=r(6);t.exports=n},function(t,e,r){var n=r(130),i=r(93).concat(\"length\",\"prototype\");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(6);t.exports=n.Promise},function(t,e,r){var n=r(37);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},function(t,e,r){var n=r(134);t.exports=n&&!Symbol.sham&&\"symbol\"==typeof Symbol.iterator},function(t,e,r){\"use strict\";var n=r(39),i=r(23),o=r(4),s=r(19),a=o(\"species\");t.exports=function(t){var e=n(t),r=i.f;s&&e&&!e[a]&&r(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,r){if(!(t instanceof e))throw TypeError(\"Incorrect \"+(r?r+\" \":\"\")+\"invocation\");return t}},function(t,e,r){var n=r(14),i=r(224),o=r(27),s=r(95),a=r(225),c=r(228),u=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,r,h,p){var f,l,d,y,g,m,v,b=s(e,r,h?2:1);if(p)f=t;else{if(\"function\"!=typeof(l=a(t)))throw TypeError(\"Target is not iterable\");if(i(l)){for(d=0,y=o(t.length);y>d;d++)if((g=h?b(n(v=t[d])[0],v[1]):b(t[d]))&&g instanceof u)return g;return new u(!1)}f=l.call(t)}for(m=f.next;!(v=m.call(f)).done;)if(\"object\"==typeof(g=c(f,b,v.value,h))&&g&&g instanceof u)return g;return new u(!1)}).stop=function(t){return new u(!0,t)}},function(t,e,r){var n=r(4),i=r(40),o=n(\"iterator\"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||s[o]===t)}},function(t,e,r){var n=r(226),i=r(40),o=r(4)(\"iterator\");t.exports=function(t){if(null!=t)return t[o]||t[\"@@iterator\"]||i[n(t)]}},function(t,e,r){var n=r(227),i=r(22),o=r(4)(\"toStringTag\"),s=\"Arguments\"==i(function(){return arguments}());t.exports=n?i:function(t){var e,r,n;return void 0===t?\"Undefined\":null===t?\"Null\":\"string\"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?r:s?i(e):\"Object\"==(n=i(e))&&\"function\"==typeof e.callee?\"Arguments\":n}},function(t,e,r){var n={};n[r(4)(\"toStringTag\")]=\"z\",t.exports=\"[object z]\"===String(n)},function(t,e,r){var n=r(14);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,r){var n=r(4)(\"iterator\"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},t(o)}catch(t){}return r}},function(t,e,r){var n,i,o,s,a,c,u,h,p=r(6),f=r(35).f,l=r(22),d=r(136).set,y=r(138),g=p.MutationObserver||p.WebKitMutationObserver,m=p.process,v=p.Promise,b=\"process\"==l(m),w=f(p,\"queueMicrotask\"),_=w&&w.value;_||(n=function(){var t,e;for(b&&(t=m.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?s():o=void 0,t}}o=void 0,t&&t.enter()},b?s=function(){m.nextTick(n)}:g&&!y?(a=!0,c=document.createTextNode(\"\"),new g(n).observe(c,{characterData:!0}),s=function(){c.data=a=!a}):v&&v.resolve?(u=v.resolve(void 0),h=u.then,s=function(){h.call(u,n)}):s=function(){d.call(p,n)}),t.exports=_||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,s()),o=e}},function(t,e,r){var n=r(14),i=r(10),o=r(140);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){var n=r(6);t.exports=function(t,e){var r=n.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,r){\"use strict\";var n=r(9);t.exports=function(t,e){var r=[][t];return!!r&&n((function(){r.call(null,e||function(){throw 1},1)}))}},function(t,e,r){\"use strict\";var n=r(236),i=r(143),o=r(14),s=r(36),a=r(135),c=r(240),u=r(27),h=r(242),p=r(62),f=r(9),l=[].push,d=Math.min,y=!f((function(){return!RegExp(4294967295,\"y\")}));n(\"split\",2,(function(t,e,r){var n;return n=\"c\"==\"abbc\".split(/(b)*/)[1]||4!=\"test\".split(/(?:)/,-1).length||2!=\"ab\".split(/(?:ab)*/).length||4!=\".\".split(/(.?)(.?)/).length||\".\".split(/()()/).length>1||\"\".split(/.?/).length?function(t,r){var n=String(s(this)),o=void 0===r?4294967295:r>>>0;if(0===o)return[];if(void 0===t)return[n];if(!i(t))return e.call(n,t,o);for(var a,c,u,h=[],f=(t.ignoreCase?\"i\":\"\")+(t.multiline?\"m\":\"\")+(t.unicode?\"u\":\"\")+(t.sticky?\"y\":\"\"),d=0,y=new RegExp(t.source,f+\"g\");(a=p.call(y,n))&&!((c=y.lastIndex)>d&&(h.push(n.slice(d,a.index)),a.length>1&&a.index<n.length&&l.apply(h,a.slice(1)),u=a[0].length,d=c,h.length>=o));)y.lastIndex===a.index&&y.lastIndex++;return d===n.length?!u&&y.test(\"\")||h.push(\"\"):h.push(n.slice(d)),h.length>o?h.slice(0,o):h}:\"0\".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var i=s(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,r):n.call(String(i),e,r)},function(t,i){var s=r(n,t,this,i,n!==e);if(s.done)return s.value;var p=o(t),f=String(this),l=a(p,RegExp),g=p.unicode,m=(p.ignoreCase?\"i\":\"\")+(p.multiline?\"m\":\"\")+(p.unicode?\"u\":\"\")+(y?\"y\":\"g\"),v=new l(y?p:\"^(?:\"+p.source+\")\",m),b=void 0===i?4294967295:i>>>0;if(0===b)return[];if(0===f.length)return null===h(v,f)?[f]:[];for(var w=0,_=0,S=[];_<f.length;){v.lastIndex=y?_:0;var E,x=h(v,y?f:f.slice(_));if(null===x||(E=d(u(v.lastIndex+(y?0:_)),f.length))===w)_=c(f,_,g);else{if(S.push(f.slice(w,_)),S.length===b)return S;for(var k=1;k<=x.length-1;k++)if(S.push(x[k]),S.length===b)return S;_=w=E}}return S.push(f.slice(w)),S}]}),!y)},function(t,e,r){\"use strict\";r(237);var n=r(37),i=r(9),o=r(4),s=r(62),a=r(26),c=o(\"species\"),u=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:\"7\"},t},\"7\"!==\"\".replace(t,\"$<a>\")})),h=\"$0\"===\"a\".replace(/./,\"$0\"),p=o(\"replace\"),f=!!/./[p]&&\"\"===/./[p](\"a\",\"$0\"),l=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r=\"ab\".split(t);return 2!==r.length||\"a\"!==r[0]||\"b\"!==r[1]}));t.exports=function(t,e,r,p){var d=o(t),y=!i((function(){var e={};return e[d]=function(){return 7},7!=\"\"[t](e)})),g=y&&!i((function(){var e=!1,r=/a/;return\"split\"===t&&((r={}).constructor={},r.constructor[c]=function(){return r},r.flags=\"\",r[d]=/./[d]),r.exec=function(){return e=!0,null},r[d](\"\"),!e}));if(!y||!g||\"replace\"===t&&(!u||!h||f)||\"split\"===t&&!l){var m=/./[d],v=r(d,\"\"[t],(function(t,e,r,n,i){return e.exec===s?y&&!i?{done:!0,value:m.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=v[0],w=v[1];n(String.prototype,t,b),n(RegExp.prototype,d,2==e?function(t,e){return w.call(t,this,e)}:function(t){return w.call(t,this)})}p&&a(RegExp.prototype[d],\"sham\",!0)}},function(t,e,r){\"use strict\";var n=r(12),i=r(62);n({target:\"RegExp\",proto:!0,forced:/./.exec!==i},{exec:i})},function(t,e,r){\"use strict\";var n=r(14);t.exports=function(){var t=n(this),e=\"\";return t.global&&(e+=\"g\"),t.ignoreCase&&(e+=\"i\"),t.multiline&&(e+=\"m\"),t.dotAll&&(e+=\"s\"),t.unicode&&(e+=\"u\"),t.sticky&&(e+=\"y\"),e}},function(t,e,r){\"use strict\";var n=r(9);function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=i(\"a\",\"y\");return t.lastIndex=2,null!=t.exec(\"abcd\")})),e.BROKEN_CARET=n((function(){var t=i(\"^r\",\"gy\");return t.lastIndex=2,null!=t.exec(\"str\")}))},function(t,e,r){\"use strict\";var n=r(241).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},function(t,e,r){var n=r(92),i=r(36),o=function(t){return function(e,r){var o,s,a=String(i(e)),c=n(r),u=a.length;return c<0||c>=u?t?\"\":void 0:(o=a.charCodeAt(c))<55296||o>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):o:t?a.slice(c,c+2):s-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e,r){var n=r(22),i=r(62);t.exports=function(t,e){var r=t.exec;if(\"function\"==typeof r){var o=r.call(t,e);if(\"object\"!=typeof o)throw TypeError(\"RegExp exec method returned something other than an Object or null\");return o}if(\"RegExp\"!==n(t))throw TypeError(\"RegExp#exec called on incompatible receiver\");return i.call(t,e)}},function(t,e){t.exports=require(\"dgram\")},function(t,e,r){\n/*!\n * RSA library for Node.js\n *\n * Copyright (c) 2014 rzcoder\n * All Rights Reserved.\n *\n * License BSD\n */\nvar n=r(63),i=r(245),o=(r(3),r(103).Ber,r(11)._),s=r(11),a=r(30),c=r(255);void 0===n.RSA_NO_PADDING&&(n.RSA_NO_PADDING=3),t.exports=function(){var t={node10:[\"md4\",\"md5\",\"ripemd160\",\"sha\",\"sha1\",\"sha224\",\"sha256\",\"sha384\",\"sha512\"],node:[\"md4\",\"md5\",\"ripemd160\",\"sha\",\"sha1\",\"sha224\",\"sha256\",\"sha384\",\"sha512\"],iojs:[\"md4\",\"md5\",\"ripemd160\",\"sha\",\"sha1\",\"sha224\",\"sha256\",\"sha384\",\"sha512\"],browser:[\"md5\",\"ripemd160\",\"sha1\",\"sha256\",\"sha512\"]},e={private:\"pkcs1-private-pem\",\"private-der\":\"pkcs1-private-der\",public:\"pkcs8-public-pem\",\"public-der\":\"pkcs8-public-der\"};function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);o.isObject(e)&&(n=e,e=void 0),this.$options={signingScheme:\"pkcs1\",signingSchemeOptions:{hash:\"sha256\",saltLength:null},encryptionScheme:\"pkcs1_oaep\",encryptionSchemeOptions:{hash:\"sha1\",label:null},environment:s.detectEnvironment(),rsaUtils:this},this.keyPair=new i.Key,this.$cache={},Buffer.isBuffer(t)||o.isString(t)?this.importKey(t,e):o.isObject(t)&&this.generateKeyPair(t.b,t.e),this.setOptions(n)}return r.prototype.setOptions=function(e){if((e=e||{}).environment&&(this.$options.environment=e.environment),e.signingScheme){if(o.isString(e.signingScheme)){var r=e.signingScheme.toLowerCase().split(\"-\");1==r.length?t.node.indexOf(r[0])>-1?(this.$options.signingSchemeOptions={hash:r[0]},this.$options.signingScheme=\"pkcs1\"):(this.$options.signingScheme=r[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:r[1]},this.$options.signingScheme=r[0])}else o.isObject(e.signingScheme)&&(this.$options.signingScheme=e.signingScheme.scheme||\"pkcs1\",this.$options.signingSchemeOptions=o.omit(e.signingScheme,\"scheme\"));if(!a.isSignature(this.$options.signingScheme))throw Error(\"Unsupported signing scheme\");if(this.$options.signingSchemeOptions.hash&&-1===t[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash))throw Error(\"Unsupported hashing algorithm for \"+this.$options.environment+\" environment\")}if(e.encryptionScheme){if(o.isString(e.encryptionScheme)?(this.$options.encryptionScheme=e.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):o.isObject(e.encryptionScheme)&&(this.$options.encryptionScheme=e.encryptionScheme.scheme||\"pkcs1_oaep\",this.$options.encryptionSchemeOptions=o.omit(e.encryptionScheme,\"scheme\")),!a.isEncryption(this.$options.encryptionScheme))throw Error(\"Unsupported encryption scheme\");if(this.$options.encryptionSchemeOptions.hash&&-1===t[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash))throw Error(\"Unsupported hashing algorithm for \"+this.$options.environment+\" environment\")}this.keyPair.setOptions(this.$options)},r.prototype.generateKeyPair=function(t,e){if(e=e||65537,(t=t||2048)%8!=0)throw Error(\"Key size must be a multiple of 8.\");return this.keyPair.generate(t,e.toString(16)),this.$cache={},this},r.prototype.importKey=function(t,r){if(!t)throw Error(\"Empty key given\");if(r&&(r=e[r]||r),!c.detectAndImport(this.keyPair,t,r)&&void 0===r)throw Error(\"Key format must be specified\");this.$cache={}},r.prototype.exportKey=function(t){return t=e[t=t||\"private\"]||t,this.$cache[t]||(this.$cache[t]=c.detectAndExport(this.keyPair,t)),this.$cache[t]},r.prototype.isPrivate=function(){return this.keyPair.isPrivate()},r.prototype.isPublic=function(t){return this.keyPair.isPublic(t)},r.prototype.isEmpty=function(t){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},r.prototype.encrypt=function(t,e,r){return this.$$encryptKey(!1,t,e,r)},r.prototype.decrypt=function(t,e){return this.$$decryptKey(!1,t,e)},r.prototype.encryptPrivate=function(t,e,r){return this.$$encryptKey(!0,t,e,r)},r.prototype.decryptPublic=function(t,e){return this.$$decryptKey(!0,t,e)},r.prototype.$$encryptKey=function(t,e,r,n){try{var i=this.keyPair.encrypt(this.$getDataForEncrypt(e,n),t);return\"buffer\"!=r&&r?i.toString(r):i}catch(t){throw Error(\"Error during encryption. Original error: \"+t)}},r.prototype.$$decryptKey=function(t,e,r){try{e=o.isString(e)?new Buffer(e,\"base64\"):e;var n=this.keyPair.decrypt(e,t);if(null===n)throw Error(\"Key decrypt method returns null.\");return this.$getDecryptedData(n,r)}catch(t){throw Error(\"Error during decryption (probably incorrect key). Original error: \"+t)}},r.prototype.sign=function(t,e,r){if(!this.isPrivate())throw Error(\"This is not private key\");var n=this.keyPair.sign(this.$getDataForEncrypt(t,r));return e&&\"buffer\"!=e&&(n=n.toString(e)),n},r.prototype.verify=function(t,e,r,n){if(!this.isPublic())throw Error(\"This is not public key\");return n=n&&\"buffer\"!=n?n:null,this.keyPair.verify(this.$getDataForEncrypt(t,r),e,n)},r.prototype.getKeySize=function(){return this.keyPair.keySize},r.prototype.getMaxMessageSize=function(){return this.keyPair.maxMessageLength},r.prototype.$getDataForEncrypt=function(t,e){if(o.isString(t)||o.isNumber(t))return new Buffer(\"\"+t,e||\"utf8\");if(Buffer.isBuffer(t))return t;if(o.isObject(t))return new Buffer(JSON.stringify(t));throw Error(\"Unexpected data type\")},r.prototype.$getDecryptedData=function(t,e){return\"buffer\"==(e=e||\"buffer\")?t:\"json\"==e?JSON.parse(t.toString()):t.toString(e)},r}()},function(t,e,r){var n=r(11)._,i=(r(3),r(43)),o=r(11),s=r(30),a=r(249);e.BigInteger=i,t.exports.Key=function(){function t(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return t.prototype.setOptions=function(t){var e=s[t.signingScheme],r=s[t.encryptionScheme];e===r?this.signingScheme=this.encryptionScheme=r.makeScheme(this,t):(this.encryptionScheme=r.makeScheme(this,t),this.signingScheme=e.makeScheme(this,t)),this.encryptEngine=a.getEngine(this,t)},t.prototype.generate=function(t,e){var r=t>>1;this.e=parseInt(e,16);for(var n=new i(e,16);;){for(;this.p=new i(t-r,1),0!==this.p.subtract(i.ONE).gcd(n).compareTo(i.ONE)||!this.p.isProbablePrime(10););for(;this.q=new i(r,1),0!==this.q.subtract(i.ONE).gcd(n).compareTo(i.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var s=this.p.subtract(i.ONE),a=this.q.subtract(i.ONE),c=s.multiply(a);if(0===c.gcd(n).compareTo(i.ONE)){if(this.n=this.p.multiply(this.q),this.n.bitLength()<t)continue;this.d=n.modInverse(c),this.dmp1=this.d.mod(s),this.dmq1=this.d.mod(a),this.coeff=this.q.modInverse(this.p);break}}this.$$recalculateCache()},t.prototype.setPrivate=function(t,e,r,s,a,c,u,h){if(!(t&&e&&r&&t.length>0&&(n.isNumber(e)||e.length>0)&&r.length>0))throw Error(\"Invalid RSA private key\");this.n=new i(t),this.e=n.isNumber(e)?e:o.get32IntFromBuffer(e,0),this.d=new i(r),s&&a&&c&&u&&h&&(this.p=new i(s),this.q=new i(a),this.dmp1=new i(c),this.dmq1=new i(u),this.coeff=new i(h)),this.$$recalculateCache()},t.prototype.setPublic=function(t,e){if(!(t&&e&&t.length>0&&(n.isNumber(e)||e.length>0)))throw Error(\"Invalid RSA public key\");this.n=new i(t),this.e=n.isNumber(e)?e:o.get32IntFromBuffer(e,0),this.$$recalculateCache()},t.prototype.$doPrivate=function(t){if(this.p||this.q)return t.modPow(this.d,this.n);for(var e=t.mod(this.p).modPow(this.dmp1,this.p),r=t.mod(this.q).modPow(this.dmq1,this.q);e.compareTo(r)<0;)e=e.add(this.p);return e.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},t.prototype.$doPublic=function(t){return t.modPowInt(this.e,this.n)},t.prototype.encrypt=function(t,e){var r=[],n=[],i=t.length,o=Math.ceil(i/this.maxMessageLength)||1,s=Math.ceil(i/o||1);if(1==o)r.push(t);else for(var a=0;a<o;a++)r.push(t.slice(a*s,(a+1)*s));for(var c=0;c<r.length;c++)n.push(this.encryptEngine.encrypt(r[c],e));return Buffer.concat(n)},t.prototype.decrypt=function(t,e){if(t.length%this.encryptedDataLength>0)throw Error(\"Incorrect data or key\");for(var r=[],n=0,i=0,o=t.length/this.encryptedDataLength,s=0;s<o;s++)i=(n=s*this.encryptedDataLength)+this.encryptedDataLength,r.push(this.encryptEngine.decrypt(t.slice(n,Math.min(i,t.length)),e));return Buffer.concat(r)},t.prototype.sign=function(t){return this.signingScheme.sign.apply(this.signingScheme,arguments)},t.prototype.verify=function(t,e,r){return this.signingScheme.verify.apply(this.signingScheme,arguments)},t.prototype.isPrivate=function(){return this.n&&this.e&&this.d||!1},t.prototype.isPublic=function(t){return this.n&&this.e&&!(t&&this.d)||!1},Object.defineProperty(t.prototype,\"keySize\",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(t.prototype,\"encryptedDataLength\",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(t.prototype,\"maxMessageLength\",{get:function(){return this.encryptionScheme.maxMessageLength()}}),t.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},t}()},function(t,e,r){var n=r(43),i=r(3),o=r(63),s={md2:new Buffer(\"3020300c06082a864886f70d020205000410\",\"hex\"),md5:new Buffer(\"3020300c06082a864886f70d020505000410\",\"hex\"),sha1:new Buffer(\"3021300906052b0e03021a05000414\",\"hex\"),sha224:new Buffer(\"302d300d06096086480165030402040500041c\",\"hex\"),sha256:new Buffer(\"3031300d060960864801650304020105000420\",\"hex\"),sha384:new Buffer(\"3041300d060960864801650304020205000430\",\"hex\"),sha512:new Buffer(\"3051300d060960864801650304020305000440\",\"hex\"),ripemd160:new Buffer(\"3021300906052b2403020105000414\",\"hex\"),rmd160:new Buffer(\"3021300906052b2403020105000414\",\"hex\")},a={ripemd160:\"rmd160\"};t.exports={isEncryption:!0,isSignature:!0},t.exports.makeScheme=function(t,e){function r(t,e){this.key=t,this.options=e}return r.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==o.RSA_NO_PADDING?this.key.encryptedDataLength:this.key.encryptedDataLength-11},r.prototype.encPad=function(t,e){var r;if(e=e||{},t.length>this.key.maxMessageLength)throw new Error(\"Message too long for RSA (n=\"+this.key.encryptedDataLength+\", l=\"+t.length+\")\");if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==o.RSA_NO_PADDING)return this.pkcs0pad(t);if(1===e.type)return(r=new Buffer(this.key.encryptedDataLength-t.length-1)).fill(255,0,r.length-1),r[0]=1,r[r.length-1]=0,Buffer.concat([r,t]);(r=new Buffer(this.key.encryptedDataLength-t.length))[0]=0,r[1]=2;for(var n=i.randomBytes(r.length-3),s=0;s<n.length;s++){for(var a=n[s];0===a;)a=i.randomBytes(1)[0];r[s+2]=a}return r[r.length-1]=0,Buffer.concat([r,t])},r.prototype.encUnPad=function(t,e){e=e||{};var r=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==o.RSA_NO_PADDING)return this.pkcs0unpad(t);if(t.length<4)return null;if(1===e.type){if(0!==t[0]&&1!==t[1])return null;for(r=3;0!==t[r];)if(255!=t[r]||++r>=t.length)return null}else{if(0!==t[0]&&2!==t[1])return null;for(r=3;0!==t[r];)if(++r>=t.length)return null}return t.slice(r+1,t.length)},r.prototype.sign=function(t){var e=this.options.signingSchemeOptions.hash||\"sha256\";if(\"browser\"===this.options.environment){e=a[e]||e;var r=i.createHash(e);r.update(t);var o=this.pkcs1pad(r.digest(),e);return this.key.$doPrivate(new n(o)).toBuffer(this.key.encryptedDataLength)}var s=i.createSign(\"RSA-\"+e.toUpperCase());return s.update(t),s.sign(this.options.rsaUtils.exportKey(\"private\"))},r.prototype.verify=function(t,e,r){if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==o.RSA_NO_PADDING)return!1;var s=this.options.signingSchemeOptions.hash||\"sha256\";if(\"browser\"===this.options.environment){s=a[s]||s,r&&(e=new Buffer(e,r));var c=i.createHash(s);c.update(t);var u=this.pkcs1pad(c.digest(),s);return this.key.$doPublic(new n(e)).toBuffer().toString(\"hex\")==u.toString(\"hex\")}var h=i.createVerify(\"RSA-\"+s.toUpperCase());return h.update(t),h.verify(this.options.rsaUtils.exportKey(\"public\"),e,r)},r.prototype.pkcs0pad=function(t){var e=new Buffer(this.key.maxMessageLength-t.length);return e.fill(0),Buffer.concat([e,t])},r.prototype.pkcs0unpad=function(t){return\"function\"==typeof t.lastIndexOf?t.slice(t.lastIndexOf(\"\\0\")+1,t.length):t.slice(String.prototype.lastIndexOf.call(t,\"\\0\")+1,t.length)},r.prototype.pkcs1pad=function(t,e){var r=s[e];if(!r)throw Error(\"Unsupported hash algorithm\");var n=Buffer.concat([r,t]);if(n.length+10>this.key.encryptedDataLength)throw Error(\"Key is too short for signing algorithm (\"+e+\")\");var i=new Buffer(this.key.encryptedDataLength-n.length-1);return i.fill(255,0,i.length-1),i[0]=1,i[i.length-1]=0,Buffer.concat([i,n])},new r(t,e)}},function(t,e,r){r(43);var n=r(3);t.exports={isEncryption:!0,isSignature:!1},t.exports.digestLength={md4:16,md5:16,ripemd160:20,rmd160:20,sha:20,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64};t.exports.eme_oaep_mgf1=function(e,r,i){i=i||\"sha1\";for(var o=t.exports.digestLength[i],s=Math.ceil(r/o),a=new Buffer(o*s),c=new Buffer(4),u=0;u<s;++u){var h=n.createHash(i);h.update(e),c.writeUInt32BE(u,0),h.update(c),h.digest().copy(a,u*o)}return a.slice(0,r)},t.exports.makeScheme=function(e,r){function i(t,e){this.key=t,this.options=e}return i.prototype.maxMessageLength=function(){return this.key.encryptedDataLength-2*t.exports.digestLength[this.options.encryptionSchemeOptions.hash||\"sha1\"]-2},i.prototype.encPad=function(e){var r=this.options.encryptionSchemeOptions.hash||\"sha1\",i=this.options.encryptionSchemeOptions.mgf||t.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||new Buffer(0),s=this.key.encryptedDataLength,a=t.exports.digestLength[r];if(e.length>s-2*a-2)throw new Error(\"Message is too long to encode into an encoded message with a length of \"+s+\" bytes, increaseemLen to fix this error (minimum value for given parameters and options: \"+(s-2*a-2)+\")\");var c=n.createHash(r);c.update(o),c=c.digest();var u=new Buffer(s-e.length-2*a-1);u.fill(0),u[u.length-1]=1;for(var h=Buffer.concat([c,u,e]),p=n.randomBytes(a),f=i(p,h.length,r),l=0;l<h.length;l++)h[l]^=f[l];for(f=i(h,a,r),l=0;l<p.length;l++)p[l]^=f[l];var d=new Buffer(1+p.length+h.length);return d[0]=0,p.copy(d,1),h.copy(d,1+p.length),d},i.prototype.encUnPad=function(e){var r=this.options.encryptionSchemeOptions.hash||\"sha1\",i=this.options.encryptionSchemeOptions.mgf||t.exports.eme_oaep_mgf1,o=this.options.encryptionSchemeOptions.label||new Buffer(0),s=t.exports.digestLength[r];if(e.length<2*s+2)throw new Error(\"Error decoding message, the supplied message is not long enough to be a valid OAEP encoded message\");for(var a=e.slice(1,s+1),c=e.slice(1+s),u=i(c,s,r),h=0;h<a.length;h++)a[h]^=u[h];for(u=i(a,c.length,r),h=0;h<c.length;h++)c[h]^=u[h];var p=n.createHash(r);if(p.update(o),p=p.digest(),c.slice(0,s).toString(\"hex\")!=p.toString(\"hex\"))throw new Error(\"Error decoding message, the lHash calculated from the label provided and the lHash in the encrypted data do not match.\");for(h=s;0===c[h++]&&h<c.length;);if(1!=c[h-1])throw new Error(\"Error decoding message, there is no padding message separator byte\");return c.slice(h)},new i(e,r)}},function(t,e,r){var n=r(43),i=r(3);t.exports={isEncryption:!1,isSignature:!0};t.exports.makeScheme=function(t,e){var o=r(30).pkcs1_oaep;function s(t,e){this.key=t,this.options=e}return s.prototype.sign=function(t){var e=i.createHash(this.options.signingSchemeOptions.hash||\"sha1\");e.update(t);var r=this.emsa_pss_encode(e.digest(),this.key.keySize-1);return this.key.$doPrivate(new n(r)).toBuffer(this.key.encryptedDataLength)},s.prototype.verify=function(t,e,r){r&&(e=new Buffer(e,r)),e=new n(e);var o=Math.ceil((this.key.keySize-1)/8),s=this.key.$doPublic(e).toBuffer(o),a=i.createHash(this.options.signingSchemeOptions.hash||\"sha1\");return a.update(t),this.emsa_pss_verify(a.digest(),s,this.key.keySize-1)},s.prototype.emsa_pss_encode=function(t,e){var r=this.options.signingSchemeOptions.hash||\"sha1\",n=this.options.signingSchemeOptions.mgf||o.eme_oaep_mgf1,s=this.options.signingSchemeOptions.saltLength||20,a=o.digestLength[r],c=Math.ceil(e/8);if(c<a+s+2)throw new Error(\"Output length passed to emBits(\"+e+\") is too small for the options specified(\"+r+\", \"+s+\"). To fix this issue increase the value of emBits. (minimum size: \"+(8*a+8*s+9)+\")\");var u=i.randomBytes(s),h=new Buffer(8+a+s);h.fill(0,0,8),t.copy(h,8),u.copy(h,8+t.length);var p=i.createHash(r);p.update(h),p=p.digest();var f=new Buffer(c-u.length-a-2);f.fill(0);var l=new Buffer(f.length+1+u.length);f.copy(l),l[f.length]=1,u.copy(l,f.length+1);for(var d=n(p,l.length,r),y=new Buffer(l.length),g=0;g<d.length;g++)y[g]=l[g]^d[g];var m=8*c-e,v=255^255>>8-m<<8-m;y[0]=y[0]&v;var b=new Buffer(y.length+p.length+1);return y.copy(b,0),p.copy(b,y.length),b[b.length-1]=188,b},s.prototype.emsa_pss_verify=function(t,e,r){var n=this.options.signingSchemeOptions.hash||\"sha1\",s=this.options.signingSchemeOptions.mgf||o.eme_oaep_mgf1,a=this.options.signingSchemeOptions.saltLength||20,c=o.digestLength[n],u=Math.ceil(r/8);if(u<c+a+2||188!=e[e.length-1])return!1;var h=new Buffer(u-c-1);e.copy(h,0,0,u-c-1);for(var p=0,f=0,l=8*u-r;f<l;f++)p|=1<<7-f;if(0!=(h[0]&p))return!1;var d=e.slice(u-c-1,u-1),y=s(d,h.length,n);for(f=0;f<h.length;f++)h[f]^=y[f];for(p=255^255>>8-(l=8*u-r)<<8-l,h[0]=h[0]&p,f=0;0===h[f]&&f<h.length;f++);if(1!=h[f])return!1;var g=h.slice(h.length-a),m=new Buffer(8+c+a);m.fill(0,0,8),t.copy(m,8),g.copy(m,8+t.length);var v=i.createHash(n);return v.update(m),v=v.digest(),d.toString(\"hex\")===v.toString(\"hex\")},new s(t,e)}},function(t,e,r){var n=r(3);t.exports={getEngine:function(t,e){var i=r(144);return\"node\"===e.environment&&\"function\"==typeof n.publicEncrypt&&\"function\"==typeof n.privateDecrypt&&(i=\"function\"==typeof n.privateEncrypt&&\"function\"==typeof n.publicDecrypt?r(250):r(251)),i(t,e)}}},function(t,e,r){var n=r(3),i=r(63),o=r(30);t.exports=function(t,e){var r=o.pkcs1.makeScheme(t,e);return{encrypt:function(t,o){if(o){var s=i.RSA_PKCS1_PADDING;return e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding),n.privateEncrypt({key:e.rsaUtils.exportKey(\"private\"),padding:s},t)}s=i.RSA_PKCS1_OAEP_PADDING;\"pkcs1\"===e.encryptionScheme&&(s=i.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding);var a=t;return s===i.RSA_NO_PADDING&&(a=r.pkcs0pad(t)),n.publicEncrypt({key:e.rsaUtils.exportKey(\"public\"),padding:s},a)},decrypt:function(t,o){if(o){var s=i.RSA_PKCS1_PADDING;return e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding),n.publicDecrypt({key:e.rsaUtils.exportKey(\"public\"),padding:s},t)}s=i.RSA_PKCS1_OAEP_PADDING;\"pkcs1\"===e.encryptionScheme&&(s=i.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(s=e.encryptionSchemeOptions.padding);var a=n.privateDecrypt({key:e.rsaUtils.exportKey(\"private\"),padding:s},t);return s===i.RSA_NO_PADDING?r.pkcs0unpad(a):a}}}},function(t,e,r){var n=r(3),i=r(63),o=r(30);t.exports=function(t,e){var s=r(144)(t,e),a=o.pkcs1.makeScheme(t,e);return{encrypt:function(t,r){if(r)return s.encrypt(t,r);var o=i.RSA_PKCS1_OAEP_PADDING;\"pkcs1\"===e.encryptionScheme&&(o=i.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(o=e.encryptionSchemeOptions.padding);var c=t;return o===i.RSA_NO_PADDING&&(c=a.pkcs0pad(t)),n.publicEncrypt({key:e.rsaUtils.exportKey(\"public\"),padding:o},c)},decrypt:function(t,r){if(r)return s.decrypt(t,r);var o=i.RSA_PKCS1_OAEP_PADDING;\"pkcs1\"===e.encryptionScheme&&(o=i.RSA_PKCS1_PADDING),e.encryptionSchemeOptions&&e.encryptionSchemeOptions.padding&&(o=e.encryptionSchemeOptions.padding);var c=n.privateDecrypt({key:e.rsaUtils.exportKey(\"private\"),padding:o},t);return o===i.RSA_NO_PADDING?a.pkcs0unpad(c):c}}}},function(t,e,r){var n=r(104),i=r(105),o=r(253),s=r(254);for(var a in t.exports={Reader:o,Writer:s},i)i.hasOwnProperty(a)&&(t.exports[a]=i[a]);for(var c in n)n.hasOwnProperty(c)&&(t.exports[c]=n[c])},function(t,e,r){var n=r(145),i=r(105),o=r(104).newInvalidAsn1Error;function s(t){if(!t||!Buffer.isBuffer(t))throw new TypeError(\"data must be a node Buffer\");this._buf=t,this._size=t.length,this._len=0,this._offset=0}Object.defineProperty(s.prototype,\"length\",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(s.prototype,\"offset\",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(s.prototype,\"remain\",{get:function(){return this._size-this._offset}}),Object.defineProperty(s.prototype,\"buffer\",{get:function(){return this._buf.slice(this._offset)}}),s.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=255&this._buf[this._offset];return t||(this._offset+=1),e},s.prototype.peek=function(){return this.readByte(!0)},s.prototype.readLength=function(t){if(void 0===t&&(t=this._offset),t>=this._size)return null;var e=255&this._buf[t++];if(null===e)return null;if(128==(128&e)){if(0==(e&=127))throw o(\"Indefinite length not supported\");if(e>4)throw o(\"encoding too long\");if(this._size-t<e)return null;this._len=0;for(var r=0;r<e;r++)this._len=(this._len<<8)+(255&this._buf[t++])}else this._len=e;return t},s.prototype.readSequence=function(t){var e=this.peek();if(null===e)return null;if(void 0!==t&&t!==e)throw o(\"Expected 0x\"+t.toString(16)+\": got 0x\"+e.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,e)},s.prototype.readInt=function(){return this._readTag(i.Integer)},s.prototype.readBoolean=function(){return 0!==this._readTag(i.Boolean)},s.prototype.readEnumeration=function(){return this._readTag(i.Enumeration)},s.prototype.readString=function(t,e){t||(t=i.OctetString);var r=this.peek();if(null===r)return null;if(r!==t)throw o(\"Expected 0x\"+t.toString(16)+\": got 0x\"+r.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return e?new Buffer(0):\"\";var s=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,e?s:s.toString(\"utf8\")},s.prototype.readOID=function(t){t||(t=i.OID);var e=this.readString(t,!0);if(null===e)return null;for(var r=[],n=0,o=0;o<e.length;o++){var s=255&e[o];n<<=7,n+=127&s,0==(128&s)&&(r.push(n),n=0)}return n=r.shift(),r.unshift(n%40),r.unshift(n/40>>0),r.join(\".\")},s.prototype._readTag=function(t){n.ok(void 0!==t);var e=this.peek();if(null===e)return null;if(e!==t)throw o(\"Expected 0x\"+t.toString(16)+\": got 0x\"+e.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw o(\"Integer too long: \"+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var i=this._buf[this._offset],s=0,a=0;a<this.length;a++)s<<=8,s|=255&this._buf[this._offset++];return 128==(128&i)&&4!==a&&(s-=1<<8*a),s>>0},t.exports=s},function(t,e,r){var n=r(145),i=r(105),o=(r(104).newInvalidAsn1Error,{size:1024,growthFactor:8});function s(t){var e,r;e=o,r=t||{},n.ok(e),n.equal(typeof e,\"object\"),n.ok(r),n.equal(typeof r,\"object\"),Object.getOwnPropertyNames(e).forEach((function(t){if(!r[t]){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n)}})),t=r,this._buf=new Buffer(t.size||1024),this._size=this._buf.length,this._offset=0,this._options=t,this._seq=[]}Object.defineProperty(s.prototype,\"buffer\",{get:function(){if(this._seq.length)throw new InvalidAsn1Error(this._seq.length+\" unended sequence(s)\");return this._buf.slice(0,this._offset)}}),s.prototype.writeByte=function(t){if(\"number\"!=typeof t)throw new TypeError(\"argument must be a Number\");this._ensure(1),this._buf[this._offset++]=t},s.prototype.writeInt=function(t,e){if(\"number\"!=typeof t)throw new TypeError(\"argument must be a Number\");\"number\"!=typeof e&&(e=i.Integer);for(var r=4;(0==(4286578688&t)||-8388608==(4286578688&t))&&r>1;)r--,t<<=8;if(r>4)throw new InvalidAsn1Error(\"BER ints cannot be > 0xffffffff\");for(this._ensure(2+r),this._buf[this._offset++]=e,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(4278190080&t)>>>24,t<<=8},s.prototype.writeNull=function(){this.writeByte(i.Null),this.writeByte(0)},s.prototype.writeEnumeration=function(t,e){if(\"number\"!=typeof t)throw new TypeError(\"argument must be a Number\");return\"number\"!=typeof e&&(e=i.Enumeration),this.writeInt(t,e)},s.prototype.writeBoolean=function(t,e){if(\"boolean\"!=typeof t)throw new TypeError(\"argument must be a Boolean\");\"number\"!=typeof e&&(e=i.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0},s.prototype.writeString=function(t,e){if(\"string\"!=typeof t)throw new TypeError(\"argument must be a string (was: \"+typeof t+\")\");\"number\"!=typeof e&&(e=i.OctetString);var r=Buffer.byteLength(t);this.writeByte(e),this.writeLength(r),r&&(this._ensure(r),this._buf.write(t,this._offset),this._offset+=r)},s.prototype.writeBuffer=function(t,e){if(\"number\"!=typeof e)throw new TypeError(\"tag must be a number\");if(!Buffer.isBuffer(t))throw new TypeError(\"argument must be a buffer\");this.writeByte(e),this.writeLength(t.length),this._ensure(t.length),t.copy(this._buf,this._offset,0,t.length),this._offset+=t.length},s.prototype.writeStringArray=function(t){if(!t instanceof Array)throw new TypeError(\"argument must be an Array[String]\");var e=this;t.forEach((function(t){e.writeString(t)}))},s.prototype.writeOID=function(t,e){if(\"string\"!=typeof t)throw new TypeError(\"argument must be a string\");if(\"number\"!=typeof e&&(e=i.OID),!/^([0-9]+\\.){3,}[0-9]+$/.test(t))throw new Error(\"argument is not a valid OID string\");var r=t.split(\".\"),n=[];n.push(40*parseInt(r[0],10)+parseInt(r[1],10)),r.slice(2).forEach((function(t){!function(t,e){e<128?t.push(e):e<16384?(t.push(e>>>7|128),t.push(127&e)):e<2097152?(t.push(e>>>14|128),t.push(255&(e>>>7|128)),t.push(127&e)):e<268435456?(t.push(e>>>21|128),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e)):(t.push(255&(e>>>28|128)),t.push(255&(e>>>21|128)),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e))}(n,parseInt(t,10))}));var o=this;this._ensure(2+n.length),this.writeByte(e),this.writeLength(n.length),n.forEach((function(t){o.writeByte(t)}))},s.prototype.writeLength=function(t){if(\"number\"!=typeof t)throw new TypeError(\"argument must be a Number\");if(this._ensure(4),t<=127)this._buf[this._offset++]=t;else if(t<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(t<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else{if(!(t<=16777215))throw new InvalidAsn1ERror(\"Length too long (> 4 bytes)\");this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t}},s.prototype.startSequence=function(t){\"number\"!=typeof t&&(t=i.Sequence|i.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3},s.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,r=this._offset-e;if(r<=127)this._shift(e,r,-2),this._buf[t]=r;else if(r<=255)this._shift(e,r,-1),this._buf[t]=129,this._buf[t+1]=r;else if(r<=65535)this._buf[t]=130,this._buf[t+1]=r>>8,this._buf[t+2]=r;else{if(!(r<=16777215))throw new InvalidAsn1Error(\"Sequence too long\");this._shift(e,r,1),this._buf[t]=131,this._buf[t+1]=r>>16,this._buf[t+2]=r>>8,this._buf[t+3]=r}},s.prototype._shift=function(t,e,r){n.ok(void 0!==t),n.ok(void 0!==e),n.ok(r),this._buf.copy(this._buf,t+r,t,t+e),this._offset+=r},s.prototype._ensure=function(t){if(n.ok(t),this._size-this._offset<t){var e=this._size*this._options.growthFactor;e-this._offset<t&&(e+=t);var r=new Buffer(e);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=e}},t.exports=s},function(t,e,r){r(11)._;function n(t){t=t.split(\"-\");for(var e=\"private\",r={type:\"default\"},n=1;n<t.length;n++)if(t[n])switch(t[n]){case\"public\":case\"private\":e=t[n];break;case\"pem\":case\"der\":r.type=t[n]}return{scheme:t[0],keyType:e,keyOpt:r}}t.exports={pkcs1:r(256),pkcs8:r(257),components:r(258),isPrivateExport:function(e){return t.exports[e]&&\"function\"==typeof t.exports[e].privateExport},isPrivateImport:function(e){return t.exports[e]&&\"function\"==typeof t.exports[e].privateImport},isPublicExport:function(e){return t.exports[e]&&\"function\"==typeof t.exports[e].publicExport},isPublicImport:function(e){return t.exports[e]&&\"function\"==typeof t.exports[e].publicImport},detectAndImport:function(e,r,i){if(void 0===i){for(var o in t.exports)if(\"function\"==typeof t.exports[o].autoImport&&t.exports[o].autoImport(e,r))return!0}else if(i){var s=n(i);if(!t.exports[s.scheme])throw Error(\"Unsupported key format\");\"private\"===s.keyType?t.exports[s.scheme].privateImport(e,r,s.keyOpt):t.exports[s.scheme].publicImport(e,r,s.keyOpt)}return!1},detectAndExport:function(e,r){if(r){var i=n(r);if(t.exports[i.scheme]){if(\"private\"===i.keyType){if(!e.isPrivate())throw Error(\"This is not private key\");return t.exports[i.scheme].privateExport(e,i.keyOpt)}if(!e.isPublic())throw Error(\"This is not public key\");return t.exports[i.scheme].publicExport(e,i.keyOpt)}throw Error(\"Unsupported key format\")}}}},function(t,e,r){var n=r(103).Ber,i=r(11)._,o=r(11);t.exports={privateExport:function(t,e){e=e||{};var r=t.n.toBuffer(),i=t.d.toBuffer(),s=t.p.toBuffer(),a=t.q.toBuffer(),c=t.dmp1.toBuffer(),u=t.dmq1.toBuffer(),h=t.coeff.toBuffer(),p=r.length+i.length+s.length+a.length+c.length+u.length+h.length+512,f=new n.Writer({size:p});return f.startSequence(),f.writeInt(0),f.writeBuffer(r,2),f.writeInt(t.e),f.writeBuffer(i,2),f.writeBuffer(s,2),f.writeBuffer(a,2),f.writeBuffer(c,2),f.writeBuffer(u,2),f.writeBuffer(h,2),f.endSequence(),\"der\"===e.type?f.buffer:\"-----BEGIN RSA PRIVATE KEY-----\\n\"+o.linebrk(f.buffer.toString(\"base64\"),64)+\"\\n-----END RSA PRIVATE KEY-----\"},privateImport:function(t,e,r){var o;if(\"der\"!==(r=r||{}).type){if(Buffer.isBuffer(e)&&(e=e.toString(\"utf8\")),!i.isString(e))throw Error(\"Unsupported key format\");var s=e.replace(\"-----BEGIN RSA PRIVATE KEY-----\",\"\").replace(\"-----END RSA PRIVATE KEY-----\",\"\").replace(/\\s+|\\n\\r|\\n|\\r$/gm,\"\");o=new Buffer(s,\"base64\")}else{if(!Buffer.isBuffer(e))throw Error(\"Unsupported key format\");o=e}var a=new n.Reader(o);a.readSequence(),a.readString(2,!0),t.setPrivate(a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0),a.readString(2,!0))},publicExport:function(t,e){e=e||{};var r=t.n.toBuffer(),i=r.length+512,s=new n.Writer({size:i});return s.startSequence(),s.writeBuffer(r,2),s.writeInt(t.e),s.endSequence(),\"der\"===e.type?s.buffer:\"-----BEGIN RSA PUBLIC KEY-----\\n\"+o.linebrk(s.buffer.toString(\"base64\"),64)+\"\\n-----END RSA PUBLIC KEY-----\"},publicImport:function(t,e,r){var o;if(\"der\"!==(r=r||{}).type){if(Buffer.isBuffer(e)&&(e=e.toString(\"utf8\")),i.isString(e)){var s=e.replace(\"-----BEGIN RSA PUBLIC KEY-----\",\"\").replace(\"-----END RSA PUBLIC KEY-----\",\"\").replace(/\\s+|\\n\\r|\\n|\\r$/gm,\"\");o=new Buffer(s,\"base64\")}}else{if(!Buffer.isBuffer(e))throw Error(\"Unsupported key format\");o=e}var a=new n.Reader(o);a.readSequence(),t.setPublic(a.readString(2,!0),a.readString(2,!0))},autoImport:function(e,r){return/^\\s*-----BEGIN RSA PRIVATE KEY-----\\s*(?=(([A-Za-z0-9+/=]+\\s*)+))\\1-----END RSA PRIVATE KEY-----\\s*$/g.test(r)?(t.exports.privateImport(e,r),!0):!!/^\\s*-----BEGIN RSA PUBLIC KEY-----\\s*(?=(([A-Za-z0-9+/=]+\\s*)+))\\1-----END RSA PUBLIC KEY-----\\s*$/g.test(r)&&(t.exports.publicImport(e,r),!0)}}},function(t,e,r){var n=r(103).Ber,i=r(11)._,o=r(11);t.exports={privateExport:function(t,e){e=e||{};var r=t.n.toBuffer(),i=t.d.toBuffer(),s=t.p.toBuffer(),a=t.q.toBuffer(),c=t.dmp1.toBuffer(),u=t.dmq1.toBuffer(),h=t.coeff.toBuffer(),p=r.length+i.length+s.length+a.length+c.length+u.length+h.length+512,f=new n.Writer({size:p});f.startSequence(),f.writeInt(0),f.writeBuffer(r,2),f.writeInt(t.e),f.writeBuffer(i,2),f.writeBuffer(s,2),f.writeBuffer(a,2),f.writeBuffer(c,2),f.writeBuffer(u,2),f.writeBuffer(h,2),f.endSequence();var l=new n.Writer({size:p});return l.startSequence(),l.writeInt(0),l.startSequence(),l.writeOID(\"1.2.840.113549.1.1.1\"),l.writeNull(),l.endSequence(),l.writeBuffer(f.buffer,4),l.endSequence(),\"der\"===e.type?l.buffer:\"-----BEGIN PRIVATE KEY-----\\n\"+o.linebrk(l.buffer.toString(\"base64\"),64)+\"\\n-----END PRIVATE KEY-----\"},privateImport:function(t,e,r){var o;if(\"der\"!==(r=r||{}).type){if(Buffer.isBuffer(e)&&(e=e.toString(\"utf8\")),!i.isString(e))throw Error(\"Unsupported key format\");var s=e.replace(\"-----BEGIN PRIVATE KEY-----\",\"\").replace(\"-----END PRIVATE KEY-----\",\"\").replace(/\\s+|\\n\\r|\\n|\\r$/gm,\"\");o=new Buffer(s,\"base64\")}else{if(!Buffer.isBuffer(e))throw Error(\"Unsupported key format\");o=e}var a=new n.Reader(o);if(a.readSequence(),a.readInt(0),\"1.2.840.113549.1.1.1\"!==new n.Reader(a.readString(48,!0)).readOID(6,!0))throw Error(\"Invalid Public key format\");var c=new n.Reader(a.readString(4,!0));c.readSequence(),c.readString(2,!0),t.setPrivate(c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0),c.readString(2,!0))},publicExport:function(t,e){e=e||{};var r=t.n.toBuffer(),i=r.length+512,s=new n.Writer({size:i});s.writeByte(0),s.startSequence(),s.writeBuffer(r,2),s.writeInt(t.e),s.endSequence();var a=new n.Writer({size:i});return a.startSequence(),a.startSequence(),a.writeOID(\"1.2.840.113549.1.1.1\"),a.writeNull(),a.endSequence(),a.writeBuffer(s.buffer,3),a.endSequence(),\"der\"===e.type?a.buffer:\"-----BEGIN PUBLIC KEY-----\\n\"+o.linebrk(a.buffer.toString(\"base64\"),64)+\"\\n-----END PUBLIC KEY-----\"},publicImport:function(t,e,r){var o;if(\"der\"!==(r=r||{}).type){if(Buffer.isBuffer(e)&&(e=e.toString(\"utf8\")),i.isString(e)){var s=e.replace(\"-----BEGIN PUBLIC KEY-----\",\"\").replace(\"-----END PUBLIC KEY-----\",\"\").replace(/\\s+|\\n\\r|\\n|\\r$/gm,\"\");o=new Buffer(s,\"base64\")}}else{if(!Buffer.isBuffer(e))throw Error(\"Unsupported key format\");o=e}var a=new n.Reader(o);if(a.readSequence(),\"1.2.840.113549.1.1.1\"!==new n.Reader(a.readString(48,!0)).readOID(6,!0))throw Error(\"Invalid Public key format\");var c=new n.Reader(a.readString(3,!0));c.readByte(),c.readSequence(),t.setPublic(c.readString(2,!0),c.readString(2,!0))},autoImport:function(e,r){return/^\\s*-----BEGIN PRIVATE KEY-----\\s*(?=(([A-Za-z0-9+/=]+\\s*)+))\\1-----END PRIVATE KEY-----\\s*$/g.test(r)?(t.exports.privateImport(e,r),!0):!!/^\\s*-----BEGIN PUBLIC KEY-----\\s*(?=(([A-Za-z0-9+/=]+\\s*)+))\\1-----END PUBLIC KEY-----\\s*$/g.test(r)&&(t.exports.publicImport(e,r),!0)}}},function(t,e,r){r(11)._,r(11);t.exports={privateExport:function(t,e){return{n:t.n.toBuffer(),e:t.e,d:t.d.toBuffer(),p:t.p.toBuffer(),q:t.q.toBuffer(),dmp1:t.dmp1.toBuffer(),dmq1:t.dmq1.toBuffer(),coeff:t.coeff.toBuffer()}},privateImport:function(t,e,r){if(!(e.n&&e.e&&e.d&&e.p&&e.q&&e.dmp1&&e.dmq1&&e.coeff))throw Error(\"Invalid key data\");t.setPrivate(e.n,e.e,e.d,e.p,e.q,e.dmp1,e.dmq1,e.coeff)},publicExport:function(t,e){return{n:t.n.toBuffer(),e:t.e}},publicImport:function(t,e,r){if(!e.n||!e.e)throw Error(\"Invalid key data\");t.setPublic(e.n,e.e)},autoImport:function(e,r){return!(!r.n||!r.e)&&(r.d&&r.p&&r.q&&r.dmp1&&r.dmq1&&r.coeff?(t.exports.privateImport(e,r),!0):(t.exports.publicImport(e,r),!0))}}},function(t,e,r){\"use strict\";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t))&&\"[object Arguments]\"!==Object.prototype.toString.call(t))return;var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function i(t,e,r,n,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,i)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var s=t.apply(e,r);function a(t){i(s,n,o,a,c,\"next\",t)}function c(t){i(s,n,o,a,c,\"throw\",t)}a(void 0)}))}}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(r,!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(260),r(44),r(148),r(269),r(45),r(25),r(270);const u=r(2).EventEmitter,h=r(7).join,p=r(0)(\"ps4:device\"),f=r(84),l=r(273),d=r(107),y=r(153),g=r(152).delayMillis,m=h(process.env.HOME||process.env.HOMEPATH||process.env.USERPROFILE||\"\",\".ps4-wake.credentials.json\");t.exports=class extends u{constructor(t){super(),this.opts=a({autoLogin:!0,credentials:m,passCode:\"\",timeout:1e4,debug:!1},t),this.opts.credentials&&this.opts.credentials.length||(this.opts.credentials=m),this.opts.timeout||0===this.opts.timeout||(this.opts.timeout=1e4),this.lastInfo=null,this._retryDelay=500,this._onClose()}get isConnected(){return!!this._socket}close(){var t=this;return o((function*(){const e=t._socket;return t.__waker=null,t._socket=null,e?(e.close(),new Promise((t,r)=>{e.once(\"error\",t=>{r(t)}),e.once(\"disconnected\",()=>{t()})})):Promise.resolve()}))()}getDeviceStatus(){var t=this;return o((function*(){return(yield t._detect()).device}))()}openSocket(){var t=this;return o((function*(){return t._connect()}))()}getKeyboard(){var t=this;return o((function*(){if(t._osk)return t._osk;const e=yield t.openSocket();return yield t.login(),new Promise((r,n)=>{e.startOsk((e,i)=>{if(e)return n(e);const o=new l(t,i);o.once(\"close\",()=>{t._osk=null}),r(t._osk=o)})})}))()}sendKeys(t){var e=this,r=arguments;return o((function*(){if(!t||!t.length)throw new Error(\"No keys provided\");if(1!==r.length||!Array.isArray(t))throw new Error(\"sendKeys must be called with an array\");const i=t.map(t=>{if(Array.isArray(t))return[t[0].toUpperCase(),t[1]];if(\"string\"!=typeof t)throw new Error(`Invalid key: ${t}; must be a string or a tuple`);return[t.toUpperCase(),0]}),o=i.filter(t=>!(t[0]in d.RCKeys));if(o.length)throw new Error(\"Unknown key names: \"+o.map(t=>t[0]));const s=yield e.openSocket();yield e.login();const a=1500-(Date.now()-e._connectedAt);a>0&&(yield g(a)),s.remoteControl(d.RCKeys.OPEN_RC),yield g(200);var c=!0,u=!1,h=void 0;try{for(var p,f=i[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){const t=n(p.value,2),r=t[0],i=t[1],o=d.RCKeys[r];s.remoteControl(o,0),i&&(yield g(i),s.remoteControl(o,i)),i&&o===d.RCKeys.PS||s.remoteControl(d.RCKeys.KEY_OFF,0),r.endsWith(\"_RC\")||e.emit(\"sent-key\",r),yield g(o===d.RCKeys.PS?1e3:200)}}catch(t){u=!0,h=t}finally{try{c||null==f.return||f.return()}finally{if(u)throw h}}return s.remoteControl(d.RCKeys.CLOSE_RC),yield g(200),e}))()}startTitle(t){var e=this;return o((function*(){const r=yield e.openSocket();return yield e.login(),new Promise((n,i)=>{r.startTitle(t,t=>t?i(t):n(e))})}))()}turnOn(t){var e=this;return o((function*(){let r;return yield e._connect(),e._socket&&(r=e._socket._loginResult),r&&0===r.result?p(\"already logged in!\"):(p(\"not logged in yet; waiting for login; timeout?\",t),yield new Promise(r=>{const n=t=>{0===t.result&&(e.removeListener(\"login_result\",n),r())};e.on(\"login_result\",n),!1!==t&&setTimeout(()=>r(),e.opts.timeout)})),e}))()}turnOff(){var t=this,e=arguments;return o((function*(){const r=yield t._connectIfAwake();if(!r)return t;yield t.login();const n=e.length>0,i=(e,i)=>{r.requestStandby(o=>{o&&n?i(o):o?(r.close(),t._onClose(),setTimeout(()=>t.turnOff(e,i),t._retryDelay)):e(t)})};if(!n)return new Promise(i);i(e[0],e[1])}))()}login(){var t=this;return o((function*(){const e=t=>t.error?new Error(`Failed to login: ${t.error} (${t.result})`):null;if(t._socket){const r=t._socket._loginResult;if(r){const n=e(r);if(n)throw n;return t}}return new Promise((r,n)=>{t.once(\"login_result\",i=>{const o=e(i);o?n(o):r(t)}),t._connect(!0)})}))()}_connectIfAwake(){var t=this;return o((function*(){return(yield t._detectAwake())?t._connect():null}))()}_connect(t){var e=this;return o((function*(){if(e._socket)return e._socket;const r=yield e._detect(),n=a({},e.opts);return void 0!==t&&(n.autoLogin=t),new Promise((t,i)=>{e._waker().wake(n,r.device,(r,o)=>(p(`wake result: (autoLogin=${n.autoLogin})`,r,\"socket? \"+!!o),r?i(r):n.autoLogin?o?(e._socket&&(e._socket.close(),e._onClose()),e._socket=o,e._connectedAt=Date.now(),o.on(\"connected\",()=>{e.emit(\"connected\",e)}).on(\"ready\",()=>{e.emit(\"ready\",e)}).on(\"login_result\",t=>{e.emit(\"login_result\",t)}).on(\"login_retry\",()=>{e.emit(\"login_retry\",e)}).on(\"error\",t=>{e.emit(\"error\",t)}).on(\"disconnected\",()=>{e._onClose(),e.emit(\"disconnected\",e)}),t(o),void(o.client&&e.emit(\"connected\",e))):i(new Error(\"No socket\")):t()))})}))()}_detectAwake(){var t=this;return o((function*(){return\"OK\"===(yield t._detect()).device.status.toUpperCase()}))()}_detect(){var t=this;return o((function*(){return new Promise((e,r)=>{(t.opts.address?f.find.bind(f,t.opts.address):f.findAny.bind(f))(t.opts,(n,i,o)=>n?r(n):(i.address=o.address,i.port=i[\"host-request-port\"],t.lastInfo=i,e({device:i,rinfo:o})))})}))()}_onClose(){this._socket=null,this._osk=null,this._connectedAt=0}_waker(){return this.__waker?this.__waker:this.__waker=new y(this.opts.credentials,{autoLogin:this.opts.autoLogin,debug:this.opts.debug,errorIfAwake:!1,keepSocket:!0,ui:this.opts.ui}).on(\"need-credentials\",t=>{this.emit(\"need-credentials\",t)}).on(\"device-notified\",t=>{this.emit(\"device-notified\",t)}).on(\"logging-in\",t=>{this.emit(\"logging-in\",t)}).on(\"login_result\",t=>{p(\"got login result from waker\",t,\" sock?\",!!this._socket),this.emit(\"login_result\",t)})}}},function(t,e,r){\"use strict\";var n=r(12),i=r(19),o=r(6),s=r(13),a=r(10),c=r(23).f,u=r(128),h=o.Symbol;if(i&&\"function\"==typeof h&&(!(\"description\"in h.prototype)||void 0!==h().description)){var p={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new h(t):void 0===t?h():h(t);return\"\"===t&&(p[e]=!0),e};u(f,h);var l=f.prototype=h.prototype;l.constructor=f;var d=l.toString,y=\"Symbol(test)\"==String(h(\"test\")),g=/^Symbol\\((.*)\\)[^)]+$/;c(l,\"description\",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=d.call(t);if(s(p,t))return\"\";var r=y?e.slice(7,-1):e.replace(g,\"$1\");return\"\"===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:f})}},function(t,e,r){var n=r(4),i=r(149),o=r(23),s=n(\"unscopables\"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:i(null)}),t.exports=function(t){a[s][t]=!0}},function(t,e,r){var n=r(19),i=r(23),o=r(14),s=r(263);t.exports=n?Object.defineProperties:function(t,e){o(t);for(var r,n=s(e),a=n.length,c=0;a>c;)i.f(t,r=n[c++],e[r]);return t}},function(t,e,r){var n=r(130),i=r(93);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){\"use strict\";var n=r(12),i=r(265),o=r(151),s=r(267),a=r(94),c=r(26),u=r(37),h=r(4),p=r(38),f=r(40),l=r(150),d=l.IteratorPrototype,y=l.BUGGY_SAFARI_ITERATORS,g=h(\"iterator\"),m=function(){return this};t.exports=function(t,e,r,h,l,v,b){i(r,e,h);var w,_,S,E=function(t){if(t===l&&T)return T;if(!y&&t in O)return O[t];switch(t){case\"keys\":case\"values\":case\"entries\":return function(){return new r(this,t)}}return function(){return new r(this)}},x=e+\" Iterator\",k=!1,O=t.prototype,C=O[g]||O[\"@@iterator\"]||l&&O[l],T=!y&&C||E(l),B=\"Array\"==e&&O.entries||C;if(B&&(w=o(B.call(new t)),d!==Object.prototype&&w.next&&(p||o(w)===d||(s?s(w,d):\"function\"!=typeof w[g]&&c(w,g,m)),a(w,x,!0,!0),p&&(f[x]=m))),\"values\"==l&&C&&\"values\"!==C.name&&(k=!0,T=function(){return C.call(this)}),p&&!b||O[g]===T||c(O,g,T),f[e]=T,l)if(_={values:E(\"values\"),keys:v?T:E(\"keys\"),entries:E(\"entries\")},b)for(S in _)(y||k||!(S in O))&&u(O,S,_[S]);else n({target:e,proto:!0,forced:y||k},_);return _}},function(t,e,r){\"use strict\";var n=r(150).IteratorPrototype,i=r(149),o=r(56),s=r(94),a=r(40),c=function(){return this};t.exports=function(t,e,r){var u=e+\" Iterator\";return t.prototype=i(n,{next:o(1,r)}),s(t,u,!1,!0),a[u]=c,t}},function(t,e,r){var n=r(9);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,r){var n=r(14),i=r(268);t.exports=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,o){return n(r),i(o),e?t.call(r,o):r.__proto__=o,r}}():void 0)},function(t,e,r){var n=r(10);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError(\"Can't set \"+String(t)+\" as a prototype\");return t}},function(t,e,r){\"use strict\";var n=r(12),i=r(146).map,o=r(61),s=r(60),a=o(\"map\"),c=s(\"map\");n({target:\"Array\",proto:!0,forced:!a||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){\"use strict\";var n,i=r(12),o=r(35).f,s=r(27),a=r(271),c=r(36),u=r(272),h=r(38),p=\"\".endsWith,f=Math.min,l=u(\"endsWith\");i({target:\"String\",proto:!0,forced:!!(h||l||(n=o(String.prototype,\"endsWith\"),!n||n.writable))&&!l},{endsWith:function(t){var e=String(c(this));a(t);var r=arguments.length>1?arguments[1]:void 0,n=s(e.length),i=void 0===r?n:f(s(r),n),o=String(t);return p?p.call(e,o,i):e.slice(i-o.length,i)===o}})},function(t,e,r){var n=r(143);t.exports=function(t){if(n(t))throw TypeError(\"The method doesn't accept regular expressions\");return t}},function(t,e,r){var n=r(4)(\"match\");t.exports=function(t){var e=/./;try{\"/./\"[t](e)}catch(r){try{return e[n]=!1,\"/./\"[t](e)}catch(t){}}return!1}},function(t,e,r){\"use strict\";function n(t,e,r,n,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,i)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var s=t.apply(e,r);function a(t){n(s,i,o,a,c,\"next\",t)}function c(t){n(s,i,o,a,c,\"throw\",t)}a(void 0)}))}}r(25);const o=r(2).EventEmitter,s=r(0)(\"ps4:osk\");t.exports=class extends o{constructor(t,e){super(),this.device=t,this.state=e;const r=t._socket;r.on(\"osk_string_changed\",t=>{s(\"osk_string_changed\",t),this._lastStringPacket=t}),r.once(\"osk_command\",t=>{s(\"osk_command\",t.command),this._onClose()})}get isActive(){return this.state&&0===this.state.status}setText(t,e=-1){var r=this;return i((function*(){r._checkActive();return(yield r._openSocket()).changeOskString({caretIndex:-1===e?t.length:e},t),r}))()}close(){var t=this;return i((function*(){t._checkActive(),t._onClose();(yield t._openSocket()).sendOskCommand(\"close\")}))()}submit(){var t=this;return i((function*(){t._checkActive(),t._onClose();(yield t._openSocket()).sendOskCommand(\"return\")}))()}_onClose(){this.state=null,this.emit(\"close\")}_openSocket(){return this.device.openSocket()}_checkActive(){if(!this.isActive)throw new Error(\"Cannot perform that action on an inactive keyboard\")}}},function(t,e,r){\"use strict\";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(r,!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(44),r(142),r(45);const s=r(3),a=r(59),c=r(0)(\"ps4:packets\"),u=r(42),h=10,p=36,f=4,l=1868784496,d=32,y=30,g=34,m=14,v=16,b=12,w=28,_=20;function S(t){this._index=0,t instanceof Buffer?this.buf=t:(this.buf=Buffer.alloc(t,0),this.writeInt32LE(t))}S.randomSeed=Buffer.alloc(16),S.prototype.length=function(){return this.buf.length<4?0:this.readInt(0)},S.prototype.type=function(){return this.buf.length<8?-1:this.readInt(4)},S.prototype.slice=function(t,e){return this.buf.slice(t,e)},S.prototype.write=function(t,e,r){const n=void 0!==e;if(t instanceof Buffer){let r=t.length;return r>e&&(r=e),t.copy(this.buf,this._index,0,r),this._index+=t.length,this}let i,o=t;if(n&&o.length>e&&(o=o.substring(0,e)),i=r?this.buf.write(o,this._index,r):this.buf.write(o,this._index),this._index+=i,n){let t=e-i;for(;t>0;)this.buf.writeUInt8(0,this._index),this._index+=1,t-=1}return this},S.prototype.readInt32LE=function(t){let e=t;return void 0===e&&(e=this._index,this._index+=4),this.buf.readInt32LE(e)},S.prototype.readInt=S.prototype.readInt32LE,S.prototype.readString=function(t,e){const r=void 0===e?this.length():t+e;return this.buf.toString(\"UTF-16LE\",t,r)},S.prototype.writeInt32LE=function(t){return this.buf.writeInt32LE(t,this._index),this._index+=4,this},S.prototype.writeInt=S.prototype.writeInt32LE,S.prototype.encrypted=function(){if(!this._cipher)throw new Error(\"Cipher is not initialized!\");const t=1+(this.buf.length-1)/16<<4,e=Buffer.alloc(t);this.buf.copy(e,0,0,this.buf.length);const r=new S(this._cipher.update(e));return r._original=this.buf,r},S.prototype.decrypted=function(){if(!this._decipher)throw new Error(\"Decipher is not initialized!\");return new S(this._decipher.update(this.buf))},S.prototype.send=function(t){c(\">>>\",this._original||this.buf),t.write(this.buf)};class E{constructor(){this.reset()}create(t){const e=new S(t);return e._cipher=this.cipher,e._decipher=this.decipher,e}parse(t){let e=this.create(t);return e._index=8,this.decipher&&(this.decipher.update(t.slice(0,16)),e=e.decrypted()),e}reset(){this.cipher=null,this.decipher=null}setCryptoIV(t){t?(this.cipher=s.createCipheriv(\"aes-128-cbc\",S.randomSeed,t),this.decipher=s.createDecipheriv(\"aes-128-cbc\",S.randomSeed,t)):(this.cipher=null,this.decipher=null)}newByePacket(){return this.create(8).writeInt(f)}newCHelloPacket(){return this.create(28).writeInt(l).writeInt(131072).writeInt(0)}newHandshakePacket(t){const e=t.slice(20,36);this.setCryptoIV(e);const r=u.createPublicKey().encrypt(S.randomSeed);if(256!==r.length)throw new Error(`Key is wrong size (was ${r.length})`);if(e.length>16)throw new Error(`Seed is wrong size (was ${e.length})`);return this.create(280).writeInt(d).write(r).write(e)}newLoginPacket(t){const e=i({osVersion:\"4.4\",model:\"PS4 Waker\",appLabel:\"PlayStation\",pinCode:\"\",passCode:\"\"},t);t.modelAppendHostname&&(e.model+=\" \"+a.hostname());const r=this.create(384);return r.writeInt(y),r.write(e.passCode,4),r.writeInt(513),r.write(e.accountId,64).write(e.appLabel,256).write(e.osVersion,16).write(e.model,16).write(e.pinCode,16),r}newLogoutPacket(){return this.create(8).writeInt(g)}newOskChangeStringPacket(t,e){const r=i({preEditIndex:0,preEditLength:0,editIndex:0,editLength:0,caretIndex:-1},t);-1===r.caretIndex&&(r.caretIndex=r.editIndex+r.editLength);const n=Buffer.from(e,\"UTF-16LE\"),o=n.length;return this.create(28+o).writeInt(m).writeInt(r.preEditIndex).writeInt(r.preEditLength).writeInt(r.caretIndex).writeInt(r.editIndex).writeInt(r.editLength).write(n)}newOskStartPacket(){return this.create(8).writeInt(b)}newOskControlPacket(t){let e=t;if(\"number\"!=typeof comandId&&(e={close:1,return:0}[t]),void 0===e)throw new Error(\"Invalid OSK Control command: \"+t);return this.create(12).writeInt(v).writeInt(e)}newStatusPacket(t){return this.create(12).writeInt(_).writeInt(t||0)}newBootRequestPacket(t){return this.create(24).writeInt(h).write(t,16)}newBootRequest2Packet(t){return this.create(108).writeInt(p).writeInt(0).write(\"\",12).write(\"\",64).writeInt(0).write(t,16)}newRemoteControlPacket(t,e){return this.create(16).writeInt(w).writeInt(t).writeInt(e||0)}}E.RCKeys={UP:1,DOWN:2,RIGHT:4,LEFT:8,ENTER:16,BACK:32,OPTION:64,PS:128,KEY_OFF:256,CANCEL:512,CLOSE_RC:2048,OPEN_RC:1024},t.exports=E},function(t,e,r){\"use strict\";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r(44),r(45);const o=r(1),s=r(2).EventEmitter,a=r(42),c={srch(t,e){this.udp.discover(\"HTTP/1.1 \"+this.options.status,{\"host-id\":this.options[\"host-id\"],\"host-type\":\"PS4\",\"host-name\":this.options[\"host-name\"],\"host-request-port\":a.REQ_PORT},e)}};function u(t){this.options=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(r,!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({\"host-id\":\"1234567890AB\",\"host-name\":\"PS4-Waker\",status:a.STATUS_STANDBY},t),this.receivedWake=!1,this.alive=!0}o.inherits(u,s),u.prototype.setStandby=function(){this.options.status=a.STATUS_STANDBY},u.prototype.close=function(){this.udp.close()},u.prototype.listen=function(){if(process.getuid&&process.getuid())return void this.emit(\"error\",new Error(\"Root permissions required to start PS4 Dummy\"));const t=this,e=a.udpSocket();this.udp=e,this.udp.bind(a.DDP_PORT,()=>{e.setBroadcast(!0),e.on(\"message\",(e,r)=>{const n=a.parse(e),i=n.type.toLowerCase();i in c&&c[i].call(t,n,r),t.emit(i,n,r)}),e.on(\"error\",e=>{t.emit(\"error\",e)}),t.emit(\"ready\")})},t.exports=u},function(t,e,r){\"use strict\";function n(t,e,r,n,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,i)}r(277),r(141),r(148),r(25);const i=r(7),o=r(278),s=r(154).spawnSync;class a{static createForUI(){return new a({})}constructor(t,e){if(!t)throw new Error(\"`options` is required\");this.options=t,this.detectOpts=e||t}delayMillis(t){return new Promise(e=>{setTimeout(e,t)})}logError(t,...e){console.error(t,...e)}logEvent(...t){console.log(...t)}logResult(t){\"string\"==typeof t?console.log(t):console.log(JSON.stringify(t,null,2))}requireRoot(t,e){if(this.options.failfast)return void this.logError(t);const r=process.argv.concat([\"--user-id\",process.getuid()]);if(this.options.credentials&&this.options.credentials.length){const t=r.indexOf(\"-c\"),e=r.indexOf(\"--credentials\"),n=(-1!==t?t:e)+1;r[n]=i.resolve(r[n])}else r.push(\"-c\"),r.push(e);this.logEvent(t.message),this.logEvent(\"Attempting to request root permissions now (we will relinquish them as soon as possible):\"),this.logEvent(\"  sudo \"+r.join(\" \"));const n=s(\"sudo\",r,{stdio:\"inherit\"});n.error&&(\"ENOENT\"===n.error.errno?this.logError(t.stack):this.logError(t)),this.exitWith(n.status)}prompt(t){return(e=function*(){return new Promise(e=>{const r=o.createInterface({input:process.stdin,output:process.stdout});r.question(t,t=>{r.close(),e(t)})})},function(){var t=this,r=arguments;return new Promise((function(i,o){var s=e.apply(t,r);function a(t){n(s,i,o,a,c,\"next\",t)}function c(t){n(s,i,o,a,c,\"throw\",t)}a(void 0)}))})();var e}exitWith(t){process.exit(t)}}t.exports=a},function(t,e,r){\"use strict\";var n=r(12),i=r(9),o=r(101),s=r(10),a=r(106),c=r(27),u=r(102),h=r(147),p=r(61),f=r(4),l=r(96),d=f(\"isConcatSpreadable\"),y=l>=51||!i((function(){var t=[];return t[d]=!1,t.concat()[0]!==t})),g=p(\"concat\"),m=function(t){if(!s(t))return!1;var e=t[d];return void 0!==e?!!e:o(t)};n({target:\"Array\",proto:!0,forced:!y||!g},{concat:function(t){var e,r,n,i,o,s=a(this),p=h(s,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(m(o=-1===e?s:arguments[e])){if(f+(i=c(o.length))>9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");for(r=0;r<i;r++,f++)r in o&&u(p,f,o[r])}else{if(f>=9007199254740991)throw TypeError(\"Maximum allowed index exceeded\");u(p,f++,o)}return p.length=f,p}})},function(t,e){t.exports=require(\"readline\")},function(t,e,r){var n=r(280),i=r(108),o=r(159),s=r(0)(\"socket.io-client\");t.exports=e=c;var a=e.managers={};function c(t,e){\"object\"==typeof t&&(e=t,t=void 0),e=e||{};var r,i=n(t),c=i.source,u=i.id,h=i.path,p=a[u]&&h in a[u].nsps;return e.forceNew||e[\"force new connection\"]||!1===e.multiplex||p?(s(\"ignoring socket cache for %s\",c),r=o(c,e)):(a[u]||(s(\"new io instance for %s\",c),a[u]=o(c,e)),r=a[u]),i.query&&!e.query&&(e.query=i.query),r.socket(i.path,e)}e.protocol=i.protocol,e.connect=c,e.Manager=r(159),e.Socket=r(170)},function(t,e,r){var n=r(155),i=r(0)(\"socket.io-client:url\");t.exports=function(t,e){var r=t;e=e||\"undefined\"!=typeof location&&location,null==t&&(t=e.protocol+\"//\"+e.host);\"string\"==typeof t&&(\"/\"===t.charAt(0)&&(t=\"/\"===t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\\/\\//.test(t)||(i(\"protocol-less url %s\",t),t=void 0!==e?e.protocol+\"//\"+t:\"https://\"+t),i(\"parse %s\",t),r=n(t));r.port||(/^(http|ws)$/.test(r.protocol)?r.port=\"80\":/^(http|ws)s$/.test(r.protocol)&&(r.port=\"443\"));r.path=r.path||\"/\";var o=-1!==r.host.indexOf(\":\")?\"[\"+r.host+\"]\":r.host;return r.id=r.protocol+\"://\"+o+\":\"+r.port,r.href=r.protocol+\"://\"+o+(e&&e.port===r.port?\"\":\":\"+r.port),r}},function(t,e,r){\"undefined\"==typeof process||\"renderer\"===process.type?t.exports=r(282):t.exports=r(283)},function(t,e,r){function n(){var t;try{t=e.storage.debug}catch(t){}return!t&&\"undefined\"!=typeof process&&\"env\"in process&&(t=process.env.DEBUG),t}(e=t.exports=r(156)).log=function(){return\"object\"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var r=this.useColors;if(t[0]=(r?\"%c\":\"\")+this.namespace+(r?\" %c\":\" \")+t[0]+(r?\"%c \":\" \")+\"+\"+e.humanize(this.diff),!r)return;var n=\"color: \"+this.color;t.splice(1,0,n,\"color: inherit\");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){\"%%\"!==t&&(i++,\"%c\"===t&&(o=i))})),t.splice(o,0,n)},e.save=function(t){try{null==t?e.storage.removeItem(\"debug\"):e.storage.debug=t}catch(t){}},e.load=n,e.useColors=function(){if(\"undefined\"!=typeof window&&window.process&&\"renderer\"===window.process.type)return!0;if(\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/))return!1;return\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/)},e.storage=\"undefined\"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=[\"#0000CC\",\"#0000FF\",\"#0033CC\",\"#0033FF\",\"#0066CC\",\"#0066FF\",\"#0099CC\",\"#0099FF\",\"#00CC00\",\"#00CC33\",\"#00CC66\",\"#00CC99\",\"#00CCCC\",\"#00CCFF\",\"#3300CC\",\"#3300FF\",\"#3333CC\",\"#3333FF\",\"#3366CC\",\"#3366FF\",\"#3399CC\",\"#3399FF\",\"#33CC00\",\"#33CC33\",\"#33CC66\",\"#33CC99\",\"#33CCCC\",\"#33CCFF\",\"#6600CC\",\"#6600FF\",\"#6633CC\",\"#6633FF\",\"#66CC00\",\"#66CC33\",\"#9900CC\",\"#9900FF\",\"#9933CC\",\"#9933FF\",\"#99CC00\",\"#99CC33\",\"#CC0000\",\"#CC0033\",\"#CC0066\",\"#CC0099\",\"#CC00CC\",\"#CC00FF\",\"#CC3300\",\"#CC3333\",\"#CC3366\",\"#CC3399\",\"#CC33CC\",\"#CC33FF\",\"#CC6600\",\"#CC6633\",\"#CC9900\",\"#CC9933\",\"#CCCC00\",\"#CCCC33\",\"#FF0000\",\"#FF0033\",\"#FF0066\",\"#FF0099\",\"#FF00CC\",\"#FF00FF\",\"#FF3300\",\"#FF3333\",\"#FF3366\",\"#FF3399\",\"#FF33CC\",\"#FF33FF\",\"#FF6600\",\"#FF6633\",\"#FF9900\",\"#FF9933\",\"#FFCC00\",\"#FFCC33\"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return\"[UnexpectedJSONParseError]: \"+t.message}},e.enable(n())},function(t,e,r){var n=r(20),i=r(1);(e=t.exports=r(156)).init=function(t){t.inspectOpts={};for(var r=Object.keys(e.inspectOpts),n=0;n<r.length;n++)t.inspectOpts[r[n]]=e.inspectOpts[r[n]]},e.log=function(){return process.stderr.write(i.format.apply(i,arguments)+\"\\n\")},e.formatArgs=function(t){var r=this.namespace;if(this.useColors){var n=this.color,i=\"\u001b[3\"+(n<8?n:\"8;5;\"+n),o=\"  \"+i+\";1m\"+r+\" \u001b[0m\";t[0]=o+t[0].split(\"\\n\").join(\"\\n\"+o),t.push(i+\"m+\"+e.humanize(this.diff)+\"\u001b[0m\")}else t[0]=(e.inspectOpts.hideDate?\"\":(new Date).toISOString()+\" \")+r+\" \"+t[0]},e.save=function(t){null==t?delete process.env.DEBUG:process.env.DEBUG=t},e.load=s,e.useColors=function(){return\"colors\"in e.inspectOpts?Boolean(e.inspectOpts.colors):n.isatty(process.stderr.fd)},e.colors=[6,2,3,4,5,1];try{var o=r(58);o&&o.level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}function s(){return process.env.DEBUG}e.inspectOpts=Object.keys(process.env).filter((function(t){return/^debug_/i.test(t)})).reduce((function(t,e){var r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(function(t,e){return e.toUpperCase()})),n=process.env[e];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&(\"null\"===n?null:Number(n)),t[r]=n,t}),{}),e.formatters.o=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts).split(\"\\n\").map((function(t){return t.trim()})).join(\" \")},e.formatters.O=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts)},e.enable(s())},function(t,e,r){var n=r(157),i=r(158),o=Object.prototype.toString,s=\"function\"==typeof Blob||\"undefined\"!=typeof Blob&&\"[object BlobConstructor]\"===o.call(Blob),a=\"function\"==typeof File||\"undefined\"!=typeof File&&\"[object FileConstructor]\"===o.call(File);e.deconstructPacket=function(t){var e=[],r=t.data,o=t;return o.data=function t(e,r){if(!e)return e;if(i(e)){var o={_placeholder:!0,num:r.length};return r.push(e),o}if(n(e)){for(var s=new Array(e.length),a=0;a<e.length;a++)s[a]=t(e[a],r);return s}if(\"object\"==typeof e&&!(e instanceof Date)){s={};for(var c in e)s[c]=t(e[c],r);return s}return e}(r,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=function t(e,r){if(!e)return e;if(e&&e._placeholder)return r[e.num];if(n(e))for(var i=0;i<e.length;i++)e[i]=t(e[i],r);else if(\"object\"==typeof e)for(var o in e)e[o]=t(e[o],r);return e}(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){var r=0,o=t;!function t(c,u,h){if(!c)return c;if(s&&c instanceof Blob||a&&c instanceof File){r++;var p=new FileReader;p.onload=function(){h?h[u]=this.result:o=this.result,--r||e(o)},p.readAsArrayBuffer(c)}else if(n(c))for(var f=0;f<c.length;f++)t(c[f],f,c);else if(\"object\"==typeof c&&!i(c))for(var l in c)t(c[l],l,c)}(o),r||e(o)}},function(t,e,r){t.exports=r(286),t.exports.parser=r(16)},function(t,e,r){var n=r(160),i=r(115),o=r(0)(\"engine.io-client:socket\"),s=r(169),a=r(16),c=r(155),u=r(65);function h(t,e){if(!(this instanceof h))return new h(t,e);e=e||{},t&&\"object\"==typeof t&&(e=t,t=null),t?(t=c(t),e.hostname=t.host,e.secure=\"https\"===t.protocol||\"wss\"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=c(e.host).host),this.secure=null!=e.secure?e.secure:\"undefined\"!=typeof location&&\"https:\"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?\"443\":\"80\"),this.agent=e.agent||!1,this.hostname=e.hostname||(\"undefined\"!=typeof location?location.hostname:\"localhost\"),this.port=e.port||(\"undefined\"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},\"string\"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||\"/engine.io\").replace(/\\/$/,\"\")+\"/\",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.withCredentials=!1!==e.withCredentials,this.timestampParam=e.timestampParam||\"t\",this.timestampRequests=e.timestampRequests,this.transports=e.transports||[\"polling\",\"websocket\"],this.transportOptions=e.transportOptions||{},this.readyState=\"\",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode,this.isReactNative=\"undefined\"!=typeof navigator&&\"string\"==typeof navigator.product&&\"reactnative\"===navigator.product.toLowerCase(),(\"undefined\"==typeof self||this.isReactNative)&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}t.exports=h,h.priorWebsocketSuccess=!1,i(h.prototype),h.protocol=a.protocol,h.Socket=h,h.Transport=r(110),h.transports=r(160),h.parser=r(16),h.prototype.createTransport=function(t){o('creating transport \"%s\"',t);var e=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}(this.query);e.EIO=a.protocol,e.transport=t;var r=this.transportOptions[t]||{};return this.id&&(e.sid=this.id),new n[t]({query:e,socket:this,agent:r.agent||this.agent,hostname:r.hostname||this.hostname,port:r.port||this.port,secure:r.secure||this.secure,path:r.path||this.path,forceJSONP:r.forceJSONP||this.forceJSONP,jsonp:r.jsonp||this.jsonp,forceBase64:r.forceBase64||this.forceBase64,enablesXDR:r.enablesXDR||this.enablesXDR,withCredentials:r.withCredentials||this.withCredentials,timestampRequests:r.timestampRequests||this.timestampRequests,timestampParam:r.timestampParam||this.timestampParam,policyPort:r.policyPort||this.policyPort,pfx:r.pfx||this.pfx,key:r.key||this.key,passphrase:r.passphrase||this.passphrase,cert:r.cert||this.cert,ca:r.ca||this.ca,ciphers:r.ciphers||this.ciphers,rejectUnauthorized:r.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:r.perMessageDeflate||this.perMessageDeflate,extraHeaders:r.extraHeaders||this.extraHeaders,forceNode:r.forceNode||this.forceNode,localAddress:r.localAddress||this.localAddress,requestTimeout:r.requestTimeout||this.requestTimeout,protocols:r.protocols||void 0,isReactNative:this.isReactNative})},h.prototype.open=function(){var t;if(this.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf(\"websocket\"))t=\"websocket\";else{if(0===this.transports.length){var e=this;return void setTimeout((function(){e.emit(\"error\",\"No transports available\")}),0)}t=this.transports[0]}this.readyState=\"opening\";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},h.prototype.setTransport=function(t){o(\"setting transport %s\",t.name);var e=this;this.transport&&(o(\"clearing existing transport %s\",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on(\"drain\",(function(){e.onDrain()})).on(\"packet\",(function(t){e.onPacket(t)})).on(\"error\",(function(t){e.onError(t)})).on(\"close\",(function(){e.onClose(\"transport close\")}))},h.prototype.probe=function(t){o('probing transport \"%s\"',t);var e=this.createTransport(t,{probe:1}),r=!1,n=this;function i(){if(n.onlyBinaryUpgrades){var i=!this.supportsBinary&&n.transport.supportsBinary;r=r||i}r||(o('probe transport \"%s\" opened',t),e.send([{type:\"ping\",data:\"probe\"}]),e.once(\"packet\",(function(i){if(!r)if(\"pong\"===i.type&&\"probe\"===i.data){if(o('probe transport \"%s\" pong',t),n.upgrading=!0,n.emit(\"upgrading\",e),!e)return;h.priorWebsocketSuccess=\"websocket\"===e.name,o('pausing current transport \"%s\"',n.transport.name),n.transport.pause((function(){r||\"closed\"!==n.readyState&&(o(\"changing transport and sending upgrade packet\"),f(),n.setTransport(e),e.send([{type:\"upgrade\"}]),n.emit(\"upgrade\",e),e=null,n.upgrading=!1,n.flush())}))}else{o('probe transport \"%s\" failed',t);var s=new Error(\"probe error\");s.transport=e.name,n.emit(\"upgradeError\",s)}})))}function s(){r||(r=!0,f(),e.close(),e=null)}function a(r){var i=new Error(\"probe error: \"+r);i.transport=e.name,s(),o('probe transport \"%s\" failed because of error: %s',t,r),n.emit(\"upgradeError\",i)}function c(){a(\"transport closed\")}function u(){a(\"socket closed\")}function p(t){e&&t.name!==e.name&&(o('\"%s\" works - aborting \"%s\"',t.name,e.name),s())}function f(){e.removeListener(\"open\",i),e.removeListener(\"error\",a),e.removeListener(\"close\",c),n.removeListener(\"close\",u),n.removeListener(\"upgrading\",p)}h.priorWebsocketSuccess=!1,e.once(\"open\",i),e.once(\"error\",a),e.once(\"close\",c),this.once(\"close\",u),this.once(\"upgrading\",p),e.open()},h.prototype.onOpen=function(){if(o(\"socket open\"),this.readyState=\"open\",h.priorWebsocketSuccess=\"websocket\"===this.transport.name,this.emit(\"open\"),this.flush(),\"open\"===this.readyState&&this.upgrade&&this.transport.pause){o(\"starting upgrade probes\");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},h.prototype.onPacket=function(t){if(\"opening\"===this.readyState||\"open\"===this.readyState||\"closing\"===this.readyState)switch(o('socket receive: type \"%s\", data \"%s\"',t.type,t.data),this.emit(\"packet\",t),this.emit(\"heartbeat\"),t.type){case\"open\":this.onHandshake(JSON.parse(t.data));break;case\"pong\":this.setPing(),this.emit(\"pong\");break;case\"error\":var e=new Error(\"server error\");e.code=t.data,this.onError(e);break;case\"message\":this.emit(\"data\",t.data),this.emit(\"message\",t.data)}else o('packet received with socket readyState \"%s\"',this.readyState)},h.prototype.onHandshake=function(t){this.emit(\"handshake\",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),\"closed\"!==this.readyState&&(this.setPing(),this.removeListener(\"heartbeat\",this.onHeartbeat),this.on(\"heartbeat\",this.onHeartbeat))},h.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout((function(){\"closed\"!==e.readyState&&e.onClose(\"ping timeout\")}),t||e.pingInterval+e.pingTimeout)},h.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout((function(){o(\"writing ping packet - expecting pong within %sms\",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)}),t.pingInterval)},h.prototype.ping=function(){var t=this;this.sendPacket(\"ping\",(function(){t.emit(\"ping\")}))},h.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit(\"drain\"):this.flush()},h.prototype.flush=function(){\"closed\"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o(\"flushing %d packets in socket\",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit(\"flush\"))},h.prototype.write=h.prototype.send=function(t,e,r){return this.sendPacket(\"message\",t,e,r),this},h.prototype.sendPacket=function(t,e,r,n){if(\"function\"==typeof e&&(n=e,e=void 0),\"function\"==typeof r&&(n=r,r=null),\"closing\"!==this.readyState&&\"closed\"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var i={type:t,data:e,options:r};this.emit(\"packetCreate\",i),this.writeBuffer.push(i),n&&this.once(\"flush\",n),this.flush()}},h.prototype.close=function(){if(\"opening\"===this.readyState||\"open\"===this.readyState){this.readyState=\"closing\";var t=this;this.writeBuffer.length?this.once(\"drain\",(function(){this.upgrading?n():e()})):this.upgrading?n():e()}function e(){t.onClose(\"forced close\"),o(\"socket closing - telling transport to close\"),t.transport.close()}function r(){t.removeListener(\"upgrade\",r),t.removeListener(\"upgradeError\",r),e()}function n(){t.once(\"upgrade\",r),t.once(\"upgradeError\",r)}return this},h.prototype.onError=function(t){o(\"socket error %j\",t),h.priorWebsocketSuccess=!1,this.emit(\"error\",t),this.onClose(\"transport error\",t)},h.prototype.onClose=function(t,e){if(\"opening\"===this.readyState||\"open\"===this.readyState||\"closing\"===this.readyState){o('socket close with reason: \"%s\"',t);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners(\"close\"),this.transport.close(),this.transport.removeAllListeners(),this.readyState=\"closed\",this.id=null,this.emit(\"close\",t,e),this.writeBuffer=[],this.prevBufferLen=0}},h.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;r<n;r++)~s(this.transports,t[r])&&e.push(t[r]);return e}},function(t,e,r){var n=r(109),i=r(161),o=r(115),s=r(66),a=r(0)(\"engine.io-client:polling-xhr\"),c=r(163);function u(){}function h(t){if(i.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,\"undefined\"!=typeof location){var e=\"https:\"===location.protocol,r=location.port;r||(r=e?443:80),this.xd=\"undefined\"!=typeof location&&t.hostname!==location.hostname||r!==t.port,this.xs=t.secure!==e}}function p(t){this.method=t.method||\"GET\",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}if(t.exports=h,t.exports.Request=p,s(h,i),h.prototype.supportsBinary=!0,h.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new p(t)},h.prototype.doWrite=function(t,e){var r=\"string\"!=typeof t&&void 0!==t,n=this.request({method:\"POST\",data:t,isBinary:r}),i=this;n.on(\"success\",e),n.on(\"error\",(function(t){i.onError(\"xhr post error\",t)})),this.sendXhr=n},h.prototype.doPoll=function(){a(\"xhr poll\");var t=this.request(),e=this;t.on(\"data\",(function(t){e.onData(t)})),t.on(\"error\",(function(t){e.onError(\"xhr poll error\",t)})),this.pollXhr=t},o(p.prototype),p.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new n(t),r=this;try{a(\"xhr open %s: %s\",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&e.setRequestHeader(i,this.extraHeaders[i])}catch(t){}if(\"POST\"===this.method)try{this.isBinary?e.setRequestHeader(\"Content-type\",\"application/octet-stream\"):e.setRequestHeader(\"Content-type\",\"text/plain;charset=UTF-8\")}catch(t){}try{e.setRequestHeader(\"Accept\",\"*/*\")}catch(t){}\"withCredentials\"in e&&(e.withCredentials=this.withCredentials),this.requestTimeout&&(e.timeout=this.requestTimeout),this.hasXDR()?(e.onload=function(){r.onLoad()},e.onerror=function(){r.onError(e.responseText)}):e.onreadystatechange=function(){if(2===e.readyState)try{var t=e.getResponseHeader(\"Content-Type\");(r.supportsBinary&&\"application/octet-stream\"===t||\"application/octet-stream; charset=UTF-8\"===t)&&(e.responseType=\"arraybuffer\")}catch(t){}4===e.readyState&&(200===e.status||1223===e.status?r.onLoad():setTimeout((function(){r.onError(\"number\"==typeof e.status?e.status:0)}),0))},a(\"xhr data %s\",this.data),e.send(this.data)}catch(t){return void setTimeout((function(){r.onError(t)}),0)}\"undefined\"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)},p.prototype.onSuccess=function(){this.emit(\"success\"),this.cleanup()},p.prototype.onData=function(t){this.emit(\"data\",t),this.onSuccess()},p.prototype.onError=function(t){this.emit(\"error\",t),this.cleanup(!0)},p.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,t)try{this.xhr.abort()}catch(t){}\"undefined\"!=typeof document&&delete p.requests[this.index],this.xhr=null}},p.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader(\"Content-Type\")}catch(t){}t=(\"application/octet-stream\"===e||\"application/octet-stream; charset=UTF-8\"===e)&&this.xhr.response||this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},p.prototype.hasXDR=function(){return\"undefined\"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},p.prototype.abort=function(){this.cleanup()},p.requestsCount=0,p.requests={},\"undefined\"!=typeof document)if(\"function\"==typeof attachEvent)attachEvent(\"onunload\",f);else if(\"function\"==typeof addEventListener){addEventListener(\"onpagehide\"in c?\"pagehide\":\"unload\",f,!1)}function f(){for(var t in p.requests)p.requests.hasOwnProperty(t)&&p.requests[t].abort()}},function(t,e,r){var n=r(161),i=r(66),o=r(163);t.exports=h;var s,a=/\\n/g,c=/\\\\n/g;function u(){}function h(t){n.call(this,t),this.query=this.query||{},s||(s=o.___eio=o.___eio||[]),this.index=s.length;var e=this;s.push((function(t){e.onData(t)})),this.query.j=this.index,\"function\"==typeof addEventListener&&addEventListener(\"beforeunload\",(function(){e.script&&(e.script.onerror=u)}),!1)}i(h,n),h.prototype.supportsBinary=!1,h.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),n.prototype.doClose.call(this)},h.prototype.doPoll=function(){var t=this,e=document.createElement(\"script\");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError(\"jsonp poll error\",e)};var r=document.getElementsByTagName(\"script\")[0];r?r.parentNode.insertBefore(e,r):(document.head||document.body).appendChild(e),this.script=e,\"undefined\"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var t=document.createElement(\"iframe\");document.body.appendChild(t),document.body.removeChild(t)}),100)},h.prototype.doWrite=function(t,e){var r=this;if(!this.form){var n,i=document.createElement(\"form\"),o=document.createElement(\"textarea\"),s=this.iframeId=\"eio_iframe_\"+this.index;i.className=\"socketio\",i.style.position=\"absolute\",i.style.top=\"-1000px\",i.style.left=\"-1000px\",i.target=s,i.method=\"POST\",i.setAttribute(\"accept-charset\",\"utf-8\"),o.name=\"d\",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function u(){h(),e()}function h(){if(r.iframe)try{r.form.removeChild(r.iframe)}catch(t){r.onError(\"jsonp polling iframe removal error\",t)}try{var t='<iframe src=\"javascript:0\" name=\"'+r.iframeId+'\">';n=document.createElement(t)}catch(t){(n=document.createElement(\"iframe\")).name=r.iframeId,n.src=\"javascript:0\"}n.id=r.iframeId,r.form.appendChild(n),r.iframe=n}this.form.action=this.uri(),h(),t=t.replace(c,\"\\\\\\n\"),this.area.value=t.replace(a,\"\\\\n\");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){\"complete\"===r.iframe.readyState&&u()}:this.iframe.onload=u}},function(t,e,r){var n,i,o=r(110),s=r(16),a=r(65),c=r(66),u=r(162),h=r(0)(\"engine.io-client:websocket\");if(\"undefined\"!=typeof WebSocket?n=WebSocket:\"undefined\"!=typeof self&&(n=self.WebSocket||self.MozWebSocket),\"undefined\"==typeof window)try{i=r(290)}catch(t){}var p=n||i;function f(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=n&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(p=i),o.call(this,t)}t.exports=f,c(f,o),f.prototype.name=\"websocket\",f.prototype.supportsBinary=!0,f.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,r={agent:this.agent,perMessageDeflate:this.perMessageDeflate};r.pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?e?new p(t,e):new p(t):new p(t,e,r)}catch(t){return this.emit(\"error\",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType=\"nodebuffer\"):this.ws.binaryType=\"arraybuffer\",this.addEventListeners()}},f.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError(\"websocket error\",e)}},f.prototype.write=function(t){var e=this;this.writable=!1;for(var r=t.length,n=0,i=r;n<i;n++)!function(t){s.encodePacket(t,e.supportsBinary,(function(n){if(!e.usingBrowserWebSocket){var i={};if(t.options&&(i.compress=t.options.compress),e.perMessageDeflate)(\"string\"==typeof n?Buffer.byteLength(n):n.length)<e.perMessageDeflate.threshold&&(i.compress=!1)}try{e.usingBrowserWebSocket?e.ws.send(n):e.ws.send(n,i)}catch(t){h(\"websocket closed before onclose event\")}--r||o()}))}(t[n]);function o(){e.emit(\"flush\"),setTimeout((function(){e.writable=!0,e.emit(\"drain\")}),0)}},f.prototype.onClose=function(){o.prototype.onClose.call(this)},f.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},f.prototype.uri=function(){var t=this.query||{},e=this.secure?\"wss\":\"ws\",r=\"\";return this.port&&(\"wss\"===e&&443!==Number(this.port)||\"ws\"===e&&80!==Number(this.port))&&(r=\":\"+this.port),this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||(t.b64=1),(t=a.encode(t)).length&&(t=\"?\"+t),e+\"://\"+(-1!==this.hostname.indexOf(\":\")?\"[\"+this.hostname+\"]\":this.hostname)+r+this.path+t},f.prototype.check=function(){return!(!p||\"__initialize\"in p&&this.name===f.prototype.name)}},function(t,e,r){\"use strict\";const n=r(164);n.Server=r(293),n.Receiver=r(166),n.Sender=r(168),t.exports=n},function(t,e,r){\"use strict\";function n(t){if(!(this instanceof n))return new n(t);t=t||{},this.concurrency=t.concurrency||1/0,this.pending=0,this.jobs=[],this.cbs=[],this._done=i.bind(this)}function i(){this.pending--,this._run()}[\"push\",\"unshift\",\"splice\"].forEach((function(t){n.prototype[t]=function(){var e=Array.prototype[t].apply(this.jobs,arguments);return this._run(),e}})),Object.defineProperty(n.prototype,\"length\",{get:function(){return this.pending+this.jobs.length}}),n.prototype._run=function(){if(this.pending!==this.concurrency){if(this.jobs.length){var t=this.jobs.shift();this.pending++,t(this._done),this._run()}if(0===this.pending)for(;0!==this.cbs.length;){var e=this.cbs.pop();process.nextTick(e)}}},n.prototype.onDone=function(t){\"function\"==typeof t&&(this.cbs.push(t),this._run())},t.exports=n},function(t,e,r){\"use strict\";class n{constructor(t,e){this.target=e,this.type=t}}class i extends n{constructor(t,e){super(\"message\",e),this.data=t}}class o extends n{constructor(t,e,r){super(\"close\",r),this.wasClean=r._closeFrameReceived&&r._closeFrameSent,this.reason=e,this.code=t}}class s extends n{constructor(t){super(\"open\",t)}}class a extends n{constructor(t,e){super(\"error\",e),this.message=t.message,this.error=t}}const c={addEventListener(t,e){function r(t){e.call(this,new i(t,this))}function n(t,r){e.call(this,new o(t,r,this))}function c(t){e.call(this,new a(t,this))}function u(){e.call(this,new s(this))}\"function\"==typeof e&&(\"message\"===t?(r._listener=e,this.on(t,r)):\"close\"===t?(n._listener=e,this.on(t,n)):\"error\"===t?(c._listener=e,this.on(t,c)):\"open\"===t?(u._listener=e,this.on(t,u)):this.on(t,e))},removeEventListener(t,e){const r=this.listeners(t);for(var n=0;n<r.length;n++)r[n]!==e&&r[n]._listener!==e||this.removeListener(t,r[n])}};t.exports=c},function(t,e,r){\"use strict\";const n=r(2),i=r(3),o=r(8),s=r(67),a=r(165),c=r(48),u=r(164);function h(t){t.emit(\"close\")}function p(){this.destroy()}function f(t,e,r,n){t.writable&&(r=r||o.STATUS_CODES[e],n=Object.assign({Connection:\"close\",\"Content-type\":\"text/html\",\"Content-Length\":Buffer.byteLength(r)},n),t.write(`HTTP/1.1 ${e} ${o.STATUS_CODES[e]}\\r\\n`+Object.keys(n).map(t=>`${t}: ${n[t]}`).join(\"\\r\\n\")+\"\\r\\n\\r\\n\"+r)),t.removeListener(\"error\",p),t.destroy()}t.exports=class extends n{constructor(t,e){if(super(),null==(t=Object.assign({maxPayload:104857600,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null},t)).port&&!t.server&&!t.noServer)throw new TypeError('One of the \"port\", \"server\", or \"noServer\" options must be specified');null!=t.port?(this._server=o.createServer((t,e)=>{const r=o.STATUS_CODES[426];e.writeHead(426,{\"Content-Length\":r.length,\"Content-Type\":\"text/plain\"}),e.end(r)}),this._server.listen(t.port,t.host,t.backlog,e)):t.server&&(this._server=t.server),this._server&&(this._removeListeners=function(t,e){for(const r of Object.keys(e))t.on(r,e[r]);return function(){for(const r of Object.keys(e))t.removeListener(r,e[r])}}(this._server,{listening:this.emit.bind(this,\"listening\"),error:this.emit.bind(this,\"error\"),upgrade:(t,e,r)=>{this.handleUpgrade(t,e,r,e=>{this.emit(\"connection\",e,t)})}})),!0===t.perMessageDeflate&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set),this.options=t}address(){if(this.options.noServer)throw new Error('The server is operating in \"noServer\" mode');return this._server?this._server.address():null}close(t){if(t&&this.once(\"close\",t),this.clients)for(const t of this.clients)t.terminate();const e=this._server;e&&(this._removeListeners(),this._removeListeners=this._server=null,null!=this.options.port)?e.close(()=>this.emit(\"close\")):process.nextTick(h,this)}shouldHandle(t){if(this.options.path){const e=t.url.indexOf(\"?\");if((-1!==e?t.url.slice(0,e):t.url)!==this.options.path)return!1}return!0}handleUpgrade(t,e,r,n){e.on(\"error\",p);const i=+t.headers[\"sec-websocket-version\"],o={};if(\"GET\"!==t.method||\"websocket\"!==t.headers.upgrade.toLowerCase()||!t.headers[\"sec-websocket-key\"]||8!==i&&13!==i||!this.shouldHandle(t))return f(e,400);if(this.options.perMessageDeflate){const r=new s(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=a.parse(t.headers[\"sec-websocket-extensions\"]);e[s.extensionName]&&(r.accept(e[s.extensionName]),o[s.extensionName]=r)}catch(t){return f(e,400)}}if(this.options.verifyClient){const s={origin:t.headers[\"\"+(8===i?\"sec-websocket-origin\":\"origin\")],secure:!(!t.connection.authorized&&!t.connection.encrypted),req:t};if(2===this.options.verifyClient.length)return void this.options.verifyClient(s,(i,s,a,c)=>{if(!i)return f(e,s||401,a,c);this.completeUpgrade(o,t,e,r,n)});if(!this.options.verifyClient(s))return f(e,401)}this.completeUpgrade(o,t,e,r,n)}completeUpgrade(t,e,r,n,o){if(!r.readable||!r.writable)return r.destroy();const h=[\"HTTP/1.1 101 Switching Protocols\",\"Upgrade: websocket\",\"Connection: Upgrade\",\"Sec-WebSocket-Accept: \"+i.createHash(\"sha1\").update(e.headers[\"sec-websocket-key\"]+c.GUID,\"binary\").digest(\"base64\")],f=new u(null);var l=e.headers[\"sec-websocket-protocol\"];if(l&&(l=l.trim().split(/ *, */),(l=this.options.handleProtocols?this.options.handleProtocols(l,e):l[0])&&(h.push(\"Sec-WebSocket-Protocol: \"+l),f.protocol=l)),t[s.extensionName]){const e=t[s.extensionName].params,r=a.format({[s.extensionName]:[e]});h.push(\"Sec-WebSocket-Extensions: \"+r),f._extensions=t}this.emit(\"headers\",h,e),r.write(h.concat(\"\\r\\n\").join(\"\\r\\n\")),r.removeListener(\"error\",p),f.setSocket(r,n,this.options.maxPayload),this.clients&&(this.clients.add(f),f.on(\"close\",()=>this.clients.delete(f))),o(f)}}},function(t,e){t.exports=function(t,e){for(var r=[],n=(e=e||0)||0;n<t.length;n++)r[n-e]=t[n];return r}},function(t,e){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-r:t+r}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}}]));","extractedComments":[]}